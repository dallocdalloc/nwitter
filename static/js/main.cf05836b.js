/*! For license information please see main.cf05836b.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),i=n(43),s=n(950);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}var l=Symbol.for("react.element"),u=Symbol.for("react.transitional.element"),c=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),m=Symbol.for("react.consumer"),g=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),_=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var E=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var S=Symbol.for("react.memo_cache_sentinel"),T=Symbol.iterator;function k(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=T&&e[T]||e["@@iterator"])?e:null}var I=Symbol.for("react.client.reference");function C(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===I?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case h:return"Fragment";case c:return"Portal";case f:return"Profiler";case d:return"StrictMode";case v:return"Suspense";case w:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case g:return(e.displayName||"Context")+".Provider";case m:return(e._context.displayName||"Context")+".Consumer";case y:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case b:return null!==(t=e.displayName||null)?t:C(e.type)||"Memo";case _:t=e._payload,e=e._init;try{return C(e(t))}catch(Hu){}}return null}var A,x,N=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R=Object.assign;function P(e){if(void 0===A)try{throw Error()}catch(Hu){var t=Hu.stack.trim().match(/\n( *(at )?)/);A=t&&t[1]||"",x=-1<Hu.stack.indexOf("\n    at")?" (<anonymous>)":-1<Hu.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+A+e+x}var D=!1;function O(e,t){if(!e||D)return"";D=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(Hu){var r=Hu}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(s){r=s}(n=e())&&"function"===typeof n.catch&&n.catch((function(){}))}}catch(o){if(o&&r&&"string"===typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),o=s[0],a=s[1];if(o&&a){var l=o.split("\n"),u=a.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===u.length)for(r=l.length-1,i=u.length-1;1<=r&&0<=i&&l[r]!==u[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==u[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==u[i]){var c="\n"+l[r].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=r&&0<=i);break}}}finally{D=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?P(n):""}function L(e){switch(e.tag){case 26:case 27:case 5:return P(e.type);case 16:return P("Lazy");case 13:return P("Suspense");case 19:return P("SuspenseList");case 0:case 15:return e=O(e.type,!1);case 11:return e=O(e.type.render,!1);case 1:return e=O(e.type,!0);default:return""}}function M(e){try{var t="";do{t+=L(e),e=e.return}while(e);return t}catch(Hu){return"\nError generating stack: "+Hu.message+"\n"+Hu.stack}}function F(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function U(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function V(e){if(F(e)!==e)throw Error(o(188))}function z(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=z(e)))return t;e=e.sibling}return null}var j=Array.isArray,B=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},$=[],H=-1;function W(e){return{current:e}}function K(e){0>H||(e.current=$[H],$[H]=null,H--)}function G(e,t){H++,$[H]=e.current,e.current=t}var Q=W(null),Y=W(null),J=W(null),X=W(null);function Z(e,t){switch(G(J,t),G(Y,e),G(Q,null),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)&&(t=t.namespaceURI)?Jc(t):0;break;default:if(t=(e=8===e?t.parentNode:t).tagName,e=e.namespaceURI)t=Xc(e=Jc(e),t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}K(Q),G(Q,t)}function ee(){K(Q),K(Y),K(J)}function te(e){null!==e.memoizedState&&G(X,e);var t=Q.current,n=Xc(t,e.type);t!==n&&(G(Y,e),G(Q,n))}function ne(e){Y.current===e&&(K(Q),K(Y)),X.current===e&&(K(X),Fh._currentValue=q)}var re=Object.prototype.hasOwnProperty,ie=r.unstable_scheduleCallback,se=r.unstable_cancelCallback,oe=r.unstable_shouldYield,ae=r.unstable_requestPaint,le=r.unstable_now,ue=r.unstable_getCurrentPriorityLevel,ce=r.unstable_ImmediatePriority,he=r.unstable_UserBlockingPriority,de=r.unstable_NormalPriority,fe=r.unstable_LowPriority,pe=r.unstable_IdlePriority,me=r.log,ge=r.unstable_setDisableYieldValue,ye=null,ve=null;function we(e){if("function"===typeof me&&ge(e),ve&&"function"===typeof ve.setStrictMode)try{ve.setStrictMode(ye,e)}catch(t){}}var be=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(_e(e)/Ee|0)|0},_e=Math.log,Ee=Math.LN2;var Se=128,Te=4194304;function ke(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194176&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ie(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=e.warmLanes;e=0!==e.finishedLanes;var a=134217727&n;return 0!==a?0!==(n=a&~i)?r=ke(n):0!==(s&=a)?r=ke(s):e||0!==(o=a&~o)&&(r=ke(o)):0!==(a=n&~i)?r=ke(a):0!==s?r=ke(s):e||0!==(o=n&~o)&&(r=ke(o)),0===r?0:0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||32===i&&0!==(4194176&o))?t:r}function Ce(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ae(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function xe(){var e=Se;return 0===(4194176&(Se<<=1))&&(Se=128),e}function Ne(){var e=Te;return 0===(62914560&(Te<<=1))&&(Te=4194304),e}function Re(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Pe(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function De(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-be(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194218&n}function Oe(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-be(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Le(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Me(){var e=B.p;return 0!==e?e:void 0===(e=window.event)?32:Xh(e.type)}var Fe=Math.random().toString(36).slice(2),Ue="__reactFiber$"+Fe,Ve="__reactProps$"+Fe,ze="__reactContainer$"+Fe,je="__reactEvents$"+Fe,Be="__reactListeners$"+Fe,qe="__reactHandles$"+Fe,$e="__reactResources$"+Fe,He="__reactMarker$"+Fe;function We(e){delete e[Ue],delete e[Ve],delete e[je],delete e[Be],delete e[qe]}function Ke(e){var t=e[Ue];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ze]||n[Ue]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=uh(e);null!==e;){if(n=e[Ue])return n;e=uh(e)}return t}n=(e=n).parentNode}return null}function Ge(e){if(e=e[Ue]||e[ze]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Qe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function Ye(e){var t=e[$e];return t||(t=e[$e]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Je(e){e[He]=!0}var Xe=new Set,Ze={};function et(e,t){tt(e,t),tt(e+"Capture",t)}function tt(e,t){for(Ze[e]=t,e=0;e<t.length;e++)Xe.add(t[e])}var nt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),rt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),it={},st={};function ot(e,t,n){if(i=t,re.call(st,i)||!re.call(it,i)&&(rt.test(i)?st[i]=!0:(it[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function at(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function lt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function ut(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ct(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ht(e){e._valueTracker||(e._valueTracker=function(e){var t=ct(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function dt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ct(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function mt(e){return e.replace(pt,(function(e){return"\\"+e.charCodeAt(0).toString(16)+" "}))}function gt(e,t,n,r,i,s,o,a){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ut(t)):e.value!==""+ut(t)&&(e.value=""+ut(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?vt(e,o,ut(t)):null!=n?vt(e,o,ut(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=s&&(e.defaultChecked=!!s),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+ut(a):e.removeAttribute("name")}function yt(e,t,n,r,i,s,o,a){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=n){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return;n=null!=n?""+ut(n):"",t=null!=t?""+ut(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=a?e.checked:!!r,e.defaultChecked=!!r,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o)}function vt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function wt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ut(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function bt(e,t,n){null==t||((t=""+ut(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ut(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function _t(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(o(92));if(j(r)){if(1<r.length)throw Error(o(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ut(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function Et(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var St=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||St.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function kt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&Tt(e,i,r)}else for(var s in t)t.hasOwnProperty(s)&&Tt(e,s,t[s])}function It(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ct=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),At=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xt(e){return At.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Nt=null;function Rt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Pt=null,Dt=null;function Ot(e){var t=Ge(e);if(t&&(e=t.stateNode)){var n=e[Ve]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[Ve]||null;if(!i)throw Error(o(90));gt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&dt(r)}break e;case"textarea":bt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&wt(e,!!n.multiple,t,!1)}}}var Lt=!1;function Mt(e,t,n){if(Lt)return e(t,n);Lt=!0;try{return e(t)}finally{if(Lt=!1,(null!==Pt||null!==Dt)&&(Uu(),Pt&&(t=Pt,e=Dt,Dt=Pt=null,Ot(t),e)))for(t=0;t<e.length;t++)Ot(e[t])}}function Ft(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Ve]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ut=!1;if(nt)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){Ut=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch(Ed){Ut=!1}var zt=null,jt=null,Bt=null;function qt(){if(Bt)return Bt;var e,t,n=jt,r=n.length,i="value"in zt?zt.value:zt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Bt=i.slice(e,1<t?1-t:void 0)}function $t(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Ht(){return!0}function Wt(){return!1}function Kt(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Ht:Wt,this.isPropagationStopped=Wt,this}return R(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Ht)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Ht)},persist:function(){},isPersistent:Ht}),t}var Gt,Qt,Yt,Jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xt=Kt(Jt),Zt=R({},Jt,{view:0,detail:0}),en=Kt(Zt),tn=R({},Zt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Yt&&(Yt&&"mousemove"===e.type?(Gt=e.screenX-Yt.screenX,Qt=e.screenY-Yt.screenY):Qt=Gt=0,Yt=e),Gt)},movementY:function(e){return"movementY"in e?e.movementY:Qt}}),nn=Kt(tn),rn=Kt(R({},tn,{dataTransfer:0})),sn=Kt(R({},Zt,{relatedTarget:0})),on=Kt(R({},Jt,{animationName:0,elapsedTime:0,pseudoElement:0})),an=Kt(R({},Jt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),ln=Kt(R({},Jt,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function fn(){return dn}var pn=Kt(R({},Zt,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=$t(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?cn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fn,charCode:function(e){return"keypress"===e.type?$t(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?$t(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),mn=Kt(R({},tn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),gn=Kt(R({},Zt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fn})),yn=Kt(R({},Jt,{propertyName:0,elapsedTime:0,pseudoElement:0})),vn=Kt(R({},tn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),wn=Kt(R({},Jt,{newState:0,oldState:0})),bn=[9,13,27,32],_n=nt&&"CompositionEvent"in window,En=null;nt&&"documentMode"in document&&(En=document.documentMode);var Sn=nt&&"TextEvent"in window&&!En,Tn=nt&&(!_n||En&&8<En&&11>=En),kn=String.fromCharCode(32),In=!1;function Cn(e,t){switch(e){case"keyup":return-1!==bn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function An(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var xn=!1;var Nn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Nn[e.type]:"textarea"===t}function Pn(e,t,n,r){Pt?Dt?Dt.push(r):Dt=[r]:Pt=r,0<(t=Fc(t,"onChange")).length&&(n=new Xt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Dn=null,On=null;function Ln(e){xc(e,0)}function Mn(e){if(dt(Qe(e)))return e}function Fn(e,t){if("change"===e)return t}var Un=!1;if(nt){var Vn;if(nt){var zn="oninput"in document;if(!zn){var jn=document.createElement("div");jn.setAttribute("oninput","return;"),zn="function"===typeof jn.oninput}Vn=zn}else Vn=!1;Un=Vn&&(!document.documentMode||9<document.documentMode)}function Bn(){Dn&&(Dn.detachEvent("onpropertychange",qn),On=Dn=null)}function qn(e){if("value"===e.propertyName&&Mn(On)){var t=[];Pn(t,On,e,Rt(e)),Mt(Ln,t)}}function $n(e,t,n){"focusin"===e?(Bn(),On=n,(Dn=t).attachEvent("onpropertychange",qn)):"focusout"===e&&Bn()}function Hn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Mn(On)}function Wn(e,t){if("click"===e)return Mn(t)}function Kn(e,t){if("input"===e||"change"===e)return Mn(t)}var Gn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Qn(e,t){if(Gn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!re.call(t,i)||!Gn(e[i],t[i]))return!1}return!0}function Yn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jn(e,t){var n,r=Yn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Yn(r)}}function Xn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Xn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Zn(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function er(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function tr(e,t){var n=Zn(t);t=e.focusedElem;var r=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&Xn(t.ownerDocument.documentElement,t)){if(null!==r&&er(t))if(e=r.start,void 0===(n=r.end)&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if((n=(e=t.ownerDocument||document)&&e.defaultView||window).getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=Jn(t,s);var o=Jn(t,r);i&&o&&(1!==n.rangeCount||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&((e=e.createRange()).setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}for(e=[],n=t;n=n.parentNode;)1===n.nodeType&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for("function"===typeof t.focus&&t.focus(),t=0;t<e.length;t++)(n=e[t]).element.scrollLeft=n.left,n.element.scrollTop=n.top}}var nr=nt&&"documentMode"in document&&11>=document.documentMode,rr=null,ir=null,sr=null,or=!1;function ar(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;or||null==rr||rr!==ft(r)||("selectionStart"in(r=rr)&&er(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},sr&&Qn(sr,r)||(sr=r,0<(r=Fc(ir,"onSelect")).length&&(t=new Xt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ur={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},cr={},hr={};function dr(e){if(cr[e])return cr[e];if(!ur[e])return e;var t,n=ur[e];for(t in n)if(n.hasOwnProperty(t)&&t in hr)return cr[e]=n[t];return e}nt&&(hr=document.createElement("div").style,"AnimationEvent"in window||(delete ur.animationend.animation,delete ur.animationiteration.animation,delete ur.animationstart.animation),"TransitionEvent"in window||delete ur.transitionend.transition);var fr=dr("animationend"),pr=dr("animationiteration"),mr=dr("animationstart"),gr=dr("transitionrun"),yr=dr("transitionstart"),vr=dr("transitioncancel"),wr=dr("transitionend"),br=new Map,_r="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Er(e,t){br.set(e,t),et(t,[e])}var Sr=[],Tr=0,kr=0;function Ir(){for(var e=Tr,t=kr=Tr=0;t<e;){var n=Sr[t];Sr[t++]=null;var r=Sr[t];Sr[t++]=null;var i=Sr[t];Sr[t++]=null;var s=Sr[t];if(Sr[t++]=null,null!==r&&null!==i){var o=r.pending;null===o?i.next=i:(i.next=o.next,o.next=i),r.pending=i}0!==s&&Nr(n,i,s)}}function Cr(e,t,n,r){Sr[Tr++]=e,Sr[Tr++]=t,Sr[Tr++]=n,Sr[Tr++]=r,kr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Ar(e,t,n,r){return Cr(e,t,n,r),Rr(e)}function xr(e,t){return Cr(e,null,null,t),Rr(e)}function Nr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(i=!0)),e=s,s=s.return;i&&null!==t&&3===e.tag&&(s=e.stateNode,i=31-be(n),null===(e=(s=s.hiddenUpdates)[i])?s[i]=[t]:e.push(t),t.lane=536870912|n)}function Rr(e){if(50<Au)throw Au=0,xu=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Pr={},Dr=new WeakMap;function Or(e,t){if("object"===typeof e&&null!==e){var n=Dr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:M(t)},Dr.set(e,t),t)}return{value:e,source:t,stack:M(t)}}var Lr=[],Mr=0,Fr=null,Ur=0,Vr=[],zr=0,jr=null,Br=1,qr="";function $r(e,t){Lr[Mr++]=Ur,Lr[Mr++]=Fr,Fr=e,Ur=t}function Hr(e,t,n){Vr[zr++]=Br,Vr[zr++]=qr,Vr[zr++]=jr,jr=e;var r=Br;e=qr;var i=32-be(r)-1;r&=~(1<<i),n+=1;var s=32-be(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Br=1<<32-be(t)+i|n<<i|r,qr=s+e}else Br=1<<s|n<<i|r,qr=e}function Wr(e){null!==e.return&&($r(e,1),Hr(e,1,0))}function Kr(e){for(;e===Fr;)Fr=Lr[--Mr],Lr[Mr]=null,Ur=Lr[--Mr],Lr[Mr]=null;for(;e===jr;)jr=Vr[--zr],Vr[zr]=null,qr=Vr[--zr],Vr[zr]=null,Br=Vr[--zr],Vr[zr]=null}var Gr=null,Qr=null,Yr=!1,Jr=null,Xr=!1,Zr=Error(o(519));function ei(e){throw si(Or(Error(o(418,"")),e)),Zr}function ti(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Ue]=e,t[Ve]=r,n){case"dialog":Nc("cancel",t),Nc("close",t);break;case"iframe":case"object":case"embed":Nc("load",t);break;case"video":case"audio":for(n=0;n<Cc.length;n++)Nc(Cc[n],t);break;case"source":Nc("error",t);break;case"img":case"image":case"link":Nc("error",t),Nc("load",t);break;case"details":Nc("toggle",t);break;case"input":Nc("invalid",t),yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),ht(t);break;case"select":Nc("invalid",t);break;case"textarea":Nc("invalid",t),_t(t,r.value,r.defaultValue,r.children),ht(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||qc(t.textContent,n)?(null!=r.popover&&(Nc("beforetoggle",t),Nc("toggle",t)),null!=r.onScroll&&Nc("scroll",t),null!=r.onScrollEnd&&Nc("scrollend",t),null!=r.onClick&&(t.onclick=$c),t=!0):t=!1,t||ei(e)}function ni(e){for(Gr=e.return;Gr;)switch(Gr.tag){case 3:case 27:return void(Xr=!0);case 5:case 13:return void(Xr=!1);default:Gr=Gr.return}}function ri(e){if(e!==Gr)return!1;if(!Yr)return ni(e),Yr=!0,!1;var t,n=!1;if((t=3!==e.tag&&27!==e.tag)&&((t=5===e.tag)&&(t=!("form"!==(t=e.type)&&"button"!==t)||Zc(e.type,e.memoizedProps)),t=!t),t&&(n=!0),n&&Qr&&ei(e),ni(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){Qr=lh(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}Qr=null}}else Qr=Gr?lh(e.stateNode.nextSibling):null;return!0}function ii(){Qr=Gr=null,Yr=!1}function si(e){null===Jr?Jr=[e]:Jr.push(e)}var oi=Error(o(460)),ai=Error(o(474)),li={then:function(){}};function ui(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ci(){}function hi(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(ci,ci),t=n),t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===oi)throw Error(o(483));throw e;default:if("string"===typeof t.status)t.then(ci,ci);else{if(null!==(e=tu)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}}),(function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===oi)throw Error(o(483));throw e}throw di=t,oi}}var di=null;function fi(){if(null===di)throw Error(o(459));var e=di;return di=null,e}var pi=null,mi=0;function gi(e){var t=mi;return mi+=1,null===pi&&(pi=[]),hi(pi,e,t)}function yi(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function vi(e,t){if(t.$$typeof===l)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function wi(e){return(0,e._init)(e._payload)}function bi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Fl(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=33554434,n):r:(t.flags|=33554434,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=33554434),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Bl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n,r){var s=n.type;return s===h?p(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===_&&wi(s)===t.type)?(yi(t=i(t,n.props),n),t.return=e,t):(yi(t=Vl(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function f(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=ql(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function p(e,t,n,r,s){return null===t||7!==t.tag?((t=zl(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function m(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Bl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case u:return yi(n=Vl(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case c:return(t=ql(t,e.mode,n)).return=e,t;case _:return m(e,t=(0,t._init)(t._payload),n)}if(j(t)||k(t))return(t=zl(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return m(e,gi(t),n);if(t.$$typeof===g)return m(e,Ia(e,t),n);vi(e,t)}return null}function y(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case u:return n.key===i?d(e,t,n,r):null;case c:return n.key===i?f(e,t,n,r):null;case _:return y(e,t,n=(i=n._init)(n._payload),r)}if(j(n)||k(n))return null!==i?null:p(e,t,n,r,null);if("function"===typeof n.then)return y(e,t,gi(n),r);if(n.$$typeof===g)return y(e,t,Ia(e,n),r);vi(e,n)}return null}function v(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case u:return d(t,e=e.get(null===r.key?n:r.key)||null,r,i);case c:return f(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return v(e,t,n,r=(0,r._init)(r._payload),i)}if(j(r)||k(r))return p(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return v(e,t,n,gi(r),i);if(r.$$typeof===g)return v(e,t,n,Ia(t,r),i);vi(t,r)}return null}function w(l,d,f,p){if("object"===typeof f&&null!==f&&f.type===h&&null===f.key&&(f=f.props.children),"object"===typeof f&&null!==f){switch(f.$$typeof){case u:e:{for(var b=f.key;null!==d;){if(d.key===b){if((b=f.type)===h){if(7===d.tag){n(l,d.sibling),(p=i(d,f.props.children)).return=l,l=p;break e}}else if(d.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===_&&wi(b)===d.type){n(l,d.sibling),yi(p=i(d,f.props),f),p.return=l,l=p;break e}n(l,d);break}t(l,d),d=d.sibling}f.type===h?((p=zl(f.props.children,l.mode,p,f.key)).return=l,l=p):(yi(p=Vl(f.type,f.key,f.props,null,l.mode,p),f),p.return=l,l=p)}return a(l);case c:e:{for(b=f.key;null!==d;){if(d.key===b){if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){n(l,d.sibling),(p=i(d,f.children||[])).return=l,l=p;break e}n(l,d);break}t(l,d),d=d.sibling}(p=ql(f,l.mode,p)).return=l,l=p}return a(l);case _:return w(l,d,f=(b=f._init)(f._payload),p)}if(j(f))return function(i,o,a,l){for(var u=null,c=null,h=o,d=o=0,f=null;null!==h&&d<a.length;d++){h.index>d?(f=h,h=null):f=h.sibling;var p=y(i,h,a[d],l);if(null===p){null===h&&(h=f);break}e&&h&&null===p.alternate&&t(i,h),o=s(p,o,d),null===c?u=p:c.sibling=p,c=p,h=f}if(d===a.length)return n(i,h),Yr&&$r(i,d),u;if(null===h){for(;d<a.length;d++)null!==(h=m(i,a[d],l))&&(o=s(h,o,d),null===c?u=h:c.sibling=h,c=h);return Yr&&$r(i,d),u}for(h=r(h);d<a.length;d++)null!==(f=v(h,i,d,a[d],l))&&(e&&null!==f.alternate&&h.delete(null===f.key?d:f.key),o=s(f,o,d),null===c?u=f:c.sibling=f,c=f);return e&&h.forEach((function(e){return t(i,e)})),Yr&&$r(i,d),u}(l,d,f,p);if(k(f)){if("function"!==typeof(b=k(f)))throw Error(o(150));return function(i,a,l,u){if(null==l)throw Error(o(151));for(var c=null,h=null,d=a,f=a=0,p=null,g=l.next();null!==d&&!g.done;f++,g=l.next()){d.index>f?(p=d,d=null):p=d.sibling;var w=y(i,d,g.value,u);if(null===w){null===d&&(d=p);break}e&&d&&null===w.alternate&&t(i,d),a=s(w,a,f),null===h?c=w:h.sibling=w,h=w,d=p}if(g.done)return n(i,d),Yr&&$r(i,f),c;if(null===d){for(;!g.done;f++,g=l.next())null!==(g=m(i,g.value,u))&&(a=s(g,a,f),null===h?c=g:h.sibling=g,h=g);return Yr&&$r(i,f),c}for(d=r(d);!g.done;f++,g=l.next())null!==(g=v(d,i,f,g.value,u))&&(e&&null!==g.alternate&&d.delete(null===g.key?f:g.key),a=s(g,a,f),null===h?c=g:h.sibling=g,h=g);return e&&d.forEach((function(e){return t(i,e)})),Yr&&$r(i,f),c}(l,d,f=b.call(f),p)}if("function"===typeof f.then)return w(l,d,gi(f),p);if(f.$$typeof===g)return w(l,d,Ia(l,f),p);vi(l,f)}return"string"===typeof f&&""!==f||"number"===typeof f||"bigint"===typeof f?(f=""+f,null!==d&&6===d.tag?(n(l,d.sibling),(p=i(d,f)).return=l,l=p):(n(l,d),(p=Bl(f,l.mode,p)).return=l,l=p),a(l)):n(l,d)}return function(e,t,n,r){try{mi=0;var i=w(e,t,n,r);return pi=null,i}catch(Hu){if(Hu===oi)throw Hu;var s=Ll(29,Hu,null,e.mode);return s.lanes=r,s.return=e,s}}}var _i=bi(!0),Ei=bi(!1),Si=W(null),Ti=W(0);function ki(e,t){G(Ti,e=uu),G(Si,t),uu=e|t.baseLanes}function Ii(){G(Ti,uu),G(Si,Si.current)}function Ci(){uu=Ti.current,K(Si),K(Ti)}var Ai=W(null),xi=null;function Ni(e){var t=e.alternate;G(Oi,1&Oi.current),G(Ai,e),null===xi&&(null===t||null!==Si.current||null!==t.memoizedState)&&(xi=e)}function Ri(e){if(22===e.tag){if(G(Oi,Oi.current),G(Ai,e),null===xi){var t=e.alternate;null!==t&&null!==t.memoizedState&&(xi=e)}}else Pi()}function Pi(){G(Oi,Oi.current),G(Ai,Ai.current)}function Di(e){K(Ai),xi===e&&(xi=null),K(Oi)}var Oi=W(0);function Li(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Mi="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},Fi=r.unstable_scheduleCallback,Ui=r.unstable_NormalPriority,Vi={$$typeof:g,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zi(){return{controller:new Mi,data:new Map,refCount:0}}function ji(e){e.refCount--,0===e.refCount&&Fi(Ui,(function(){e.controller.abort()}))}var Bi=null,qi=0,$i=0,Hi=null;function Wi(){if(0===--qi&&null!==Bi){null!==Hi&&(Hi.status="fulfilled");var e=Bi;Bi=null,$i=0,Hi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ki=N.S;N.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Bi){var n=Bi=[];qi=0,$i=Ec(),Hi={status:"pending",value:void 0,then:function(e){n.push(e)}}}qi++,t.then(Wi,Wi)}(0,t),null!==Ki&&Ki(e,t)};var Gi=W(null);function Qi(){var e=Gi.current;return null!==e?e:tu.pooledCache}function Yi(e,t){G(Gi,null===t?Gi.current:t.pool)}function Ji(){var e=Qi();return null===e?null:{parent:Vi._currentValue,pool:e}}var Xi=0,Zi=null,es=null,ts=null,ns=!1,rs=!1,is=!1,ss=0,os=0,as=null,ls=0;function us(){throw Error(o(321))}function cs(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Gn(e[n],t[n]))return!1;return!0}function hs(e,t,n,r,i,s){return Xi=s,Zi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,N.H=null===e||null===e.memoizedState?Io:Co,is=!1,s=n(r,i),is=!1,rs&&(s=fs(t,n,r,i)),ds(e),s}function ds(e){N.H=ko;var t=null!==es&&null!==es.next;if(Xi=0,ts=es=Zi=null,ns=!1,os=0,as=null,t)throw Error(o(300));null===e||$o||null!==(e=e.dependencies)&&Sa(e)&&($o=!0)}function fs(e,t,n,r){Zi=e;var i=0;do{if(rs&&(as=null),os=0,rs=!1,25<=i)throw Error(o(301));if(i+=1,ts=es=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}N.H=Ao,s=t(n,r)}while(rs);return s}function ps(){var e=N.H,t=e.useState()[0];return t="function"===typeof t.then?bs(t):t,e=e.useState()[0],(null!==es?es.memoizedState:null)!==e&&(Zi.flags|=1024),t}function ms(){var e=0!==ss;return ss=0,e}function gs(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function ys(e){if(ns){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}ns=!1}Xi=0,ts=es=Zi=null,rs=!1,os=ss=0,as=null}function vs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ts?Zi.memoizedState=ts=e:ts=ts.next=e,ts}function ws(){if(null===es){var e=Zi.alternate;e=null!==e?e.memoizedState:null}else e=es.next;var t=null===ts?Zi.memoizedState:ts.next;if(null!==t)ts=t,es=e;else{if(null===e){if(null===Zi.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(es=e).memoizedState,baseState:es.baseState,baseQueue:es.baseQueue,queue:es.queue,next:null},null===ts?Zi.memoizedState=ts=e:ts=ts.next=e}return ts}function bs(e){var t=os;return os+=1,null===as&&(as=[]),e=hi(as,e,t),t=Zi,null===(null===ts?t.memoizedState:ts.next)&&(t=t.alternate,N.H=null===t||null===t.memoizedState?Io:Co),e}function _s(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return bs(e);if(e.$$typeof===g)return ka(e)}throw Error(o(438,String(e)))}function Es(e){var t=null,n=Zi.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Zi.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map((function(e){return e.slice()})),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Zi.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=S;return t.index++,n}function Ss(e,t){return"function"===typeof t?t(e):t}function Ts(e){return ks(ws(),es,e)}function ks(e,t,n){var r=e.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=n;var i=e.baseQueue,s=r.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}t.baseQueue=i=s,r.pending=null}if(s=e.baseState,null===i)e.memoizedState=s;else{var l=a=null,u=null,c=t=i.next,h=!1;do{var d=-536870913&c.lane;if(d!==c.lane?(ru&d)===d:(Xi&d)===d){var f=c.revertLane;if(0===f)null!==u&&(u=u.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),d===$i&&(h=!0);else{if((Xi&f)===f){c=c.next,f===$i&&(h=!0);continue}d={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=d,a=s):u=u.next=d,Zi.lanes|=f,hu|=f}d=c.action,is&&n(s,d),s=c.hasEagerState?c.eagerState:n(s,d)}else f={lane:d,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=f,a=s):u=u.next=f,Zi.lanes|=d,hu|=d;c=c.next}while(null!==c&&c!==t);if(null===u?a=s:u.next=l,!Gn(s,e.memoizedState)&&($o=!0,h&&null!==(n=Hi)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=u,r.lastRenderedState=s}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Is(e){var t=ws(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);Gn(s,t.memoizedState)||($o=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Cs(e,t,n){var r=Zi,i=ws(),s=Yr;if(s){if(void 0===n)throw Error(o(407));n=n()}else n=t();var a=!Gn((es||i).memoizedState,n);if(a&&(i.memoizedState=n,$o=!0),i=i.queue,Xs(Ns.bind(null,r,i,e),[e]),i.getSnapshot!==t||a||null!==ts&&1&ts.memoizedState.tag){if(r.flags|=2048,Ks(9,xs.bind(null,r,i,n,t),{destroy:void 0},null),null===tu)throw Error(o(349));s||0!==(60&Xi)||As(r,t,n)}return n}function As(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Zi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Zi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function xs(e,t,n,r){t.value=n,t.getSnapshot=r,Rs(t)&&Ps(e)}function Ns(e,t,n){return n((function(){Rs(t)&&Ps(e)}))}function Rs(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Gn(e,n)}catch(r){return!0}}function Ps(e){var t=xr(e,2);null!==t&&Pu(t,e,2)}function Ds(e){var t=vs();if("function"===typeof e){var n=e;if(e=n(),is){we(!0);try{n()}finally{we(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ss,lastRenderedState:e},t}function Os(e,t,n,r){return e.baseState=n,ks(e,es,"function"===typeof r?r:Ss)}function Ls(e,t,n,r,i){if(Eo(e))throw Error(o(485));if(null!==(e=t.action)){var s={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==N.T?n(!0):s.isTransition=!1,r(s),null===(n=t.pending)?(s.next=t.pending=s,Ms(t,s)):(s.next=n.next,t.pending=n.next=s)}}function Ms(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var s=N.T,o={};N.T=o;try{var a=n(i,r),l=N.S;null!==l&&l(o,a),Fs(e,t,a)}catch(u){Vs(e,t,u)}finally{N.T=s}}else try{Fs(e,t,s=n(i,r))}catch(c){Vs(e,t,c)}}function Fs(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then((function(n){Us(e,t,n)}),(function(n){return Vs(e,t,n)})):Us(e,t,n)}function Us(e,t,n){t.status="fulfilled",t.value=n,zs(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Ms(e,n)))}function Vs(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,zs(t),t=t.next}while(t!==r)}e.action=null}function zs(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function js(e,t){return t}function Bs(e,t){if(Yr){var n=tu.formState;if(null!==n){e:{var r=Zi;if(Yr){if(Qr){t:{for(var i=Qr,s=Xr;8!==i.nodeType;){if(!s){i=null;break t}if(null===(i=lh(i.nextSibling))){i=null;break t}}i="F!"===(s=i.data)||"F"===s?i:null}if(i){Qr=lh(i.nextSibling),r="F!"===i.data;break e}}ei(r)}r=!1}r&&(t=n[0])}}return(n=vs()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:js,lastRenderedState:t},n.queue=r,n=wo.bind(null,Zi,r),r.dispatch=n,r=Ds(!1),s=_o.bind(null,Zi,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=vs()).queue=i,n=Ls.bind(null,Zi,i,s,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function qs(e){return $s(ws(),es,e)}function $s(e,t,n){t=ks(e,t,js)[0],e=Ts(Ss)[0],t="object"===typeof t&&null!==t&&"function"===typeof t.then?bs(t):t;var r=ws(),i=r.queue,s=i.dispatch;return n!==r.memoizedState&&(Zi.flags|=2048,Ks(9,Hs.bind(null,i,n),{destroy:void 0},null)),[t,s,e]}function Hs(e,t){e.action=t}function Ws(e){var t=ws(),n=es;if(null!==n)return $s(t,n,e);ws(),t=t.memoizedState;var r=(n=ws()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Ks(e,t,n,r){return e={tag:e,create:t,inst:n,deps:r,next:null},null===(t=Zi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Zi.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Gs(){return ws().memoizedState}function Qs(e,t,n,r){var i=vs();Zi.flags|=e,i.memoizedState=Ks(1|t,n,{destroy:void 0},void 0===r?null:r)}function Ys(e,t,n,r){var i=ws();r=void 0===r?null:r;var s=i.memoizedState.inst;null!==es&&null!==r&&cs(r,es.memoizedState.deps)?i.memoizedState=Ks(t,n,s,r):(Zi.flags|=e,i.memoizedState=Ks(1|t,n,s,r))}function Js(e,t){Qs(8390656,8,e,t)}function Xs(e,t){Ys(2048,8,e,t)}function Zs(e,t){return Ys(4,2,e,t)}function eo(e,t){return Ys(4,4,e,t)}function to(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function no(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Ys(4,4,to.bind(null,t,e),n)}function ro(){}function io(e,t){var n=ws();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&cs(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function so(e,t){var n=ws();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&cs(t,r[1]))return r[0];if(r=e(),is){we(!0);try{e()}finally{we(!1)}}return n.memoizedState=[r,t],r}function oo(e,t,n){return void 0===n||0!==(1073741824&Xi)?e.memoizedState=t:(e.memoizedState=n,e=Ru(),Zi.lanes|=e,hu|=e,n)}function ao(e,t,n,r){return Gn(n,t)?n:null!==Si.current?(e=oo(e,n,r),Gn(e,t)||($o=!0),e):0===(42&Xi)?($o=!0,e.memoizedState=n):(e=Ru(),Zi.lanes|=e,hu|=e,t)}function lo(e,t,n,r,i){var s=B.p;B.p=0!==s&&8>s?s:8;var o=N.T,a={};N.T=a,_o(e,!1,t,n);try{var l=i(),u=N.S;if(null!==u&&u(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)bo(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then((function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)}),(function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)})),r}(l,r),Nu());else bo(e,t,r,Nu())}catch(c){bo(e,t,{then:function(){},status:"rejected",reason:c},Nu())}finally{B.p=s,N.T=o}}function uo(){}function co(e,t,n,r){if(5!==e.tag)throw Error(o(476));var i=ho(e).queue;lo(e,i,t,q,null===n?uo:function(){return fo(e),n(r)})}function ho(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ss,lastRenderedState:q},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ss,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function fo(e){bo(e,ho(e).next.queue,{},Nu())}function po(){return ka(Fh)}function mo(){return ws().memoizedState}function go(){return ws().memoizedState}function yo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Nu(),r=Pa(t,e=Ra(n),n);return null!==r&&(Pu(r,t,n),Da(r,t,n)),t={cache:zi()},void(e.payload=t)}t=t.return}}function vo(e,t,n){var r=Nu();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Eo(e)?So(t,n):null!==(n=Ar(e,t,n,r))&&(Pu(n,e,r),To(n,t,r))}function wo(e,t,n){bo(e,t,n,Nu())}function bo(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Eo(e))So(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Gn(a,o))return Cr(e,t,i,0),null===tu&&Ir(),!1}catch(l){}if(null!==(n=Ar(e,t,i,r)))return Pu(n,e,r),To(n,t,r),!0}return!1}function _o(e,t,n,r){if(r={lane:2,revertLane:Ec(),action:r,hasEagerState:!1,eagerState:null,next:null},Eo(e)){if(t)throw Error(o(479))}else null!==(t=Ar(e,n,r,2))&&Pu(t,e,2)}function Eo(e){var t=e.alternate;return e===Zi||null!==t&&t===Zi}function So(e,t){rs=ns=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function To(e,t,n){if(0!==(4194176&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Oe(e,n)}}var ko={readContext:ka,use:_s,useCallback:us,useContext:us,useEffect:us,useImperativeHandle:us,useLayoutEffect:us,useInsertionEffect:us,useMemo:us,useReducer:us,useRef:us,useState:us,useDebugValue:us,useDeferredValue:us,useTransition:us,useSyncExternalStore:us,useId:us};ko.useCacheRefresh=us,ko.useMemoCache=us,ko.useHostTransitionStatus=us,ko.useFormState=us,ko.useActionState=us,ko.useOptimistic=us;var Io={readContext:ka,use:_s,useCallback:function(e,t){return vs().memoizedState=[e,void 0===t?null:t],e},useContext:ka,useEffect:Js,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Qs(4194308,4,to.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Qs(4194308,4,e,t)},useInsertionEffect:function(e,t){Qs(4,2,e,t)},useMemo:function(e,t){var n=vs();t=void 0===t?null:t;var r=e();if(is){we(!0);try{e()}finally{we(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=vs();if(void 0!==n){var i=n(t);if(is){we(!0);try{n(t)}finally{we(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=vo.bind(null,Zi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vs().memoizedState=e},useState:function(e){var t=(e=Ds(e)).queue,n=wo.bind(null,Zi,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:ro,useDeferredValue:function(e,t){return oo(vs(),e,t)},useTransition:function(){var e=Ds(!1);return e=lo.bind(null,Zi,e.queue,!0,!1),vs().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Zi,i=vs();if(Yr){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===tu)throw Error(o(349));0!==(60&ru)||As(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Js(Ns.bind(null,r,s,e),[e]),r.flags|=2048,Ks(9,xs.bind(null,r,s,n,t),{destroy:void 0},null),n},useId:function(){var e=vs(),t=tu.identifierPrefix;if(Yr){var n=qr;t=":"+t+"R"+(n=(Br&~(1<<32-be(Br)-1)).toString(32)+n),0<(n=ss++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ls++).toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return vs().memoizedState=yo.bind(null,Zi)}};Io.useMemoCache=Es,Io.useHostTransitionStatus=po,Io.useFormState=Bs,Io.useActionState=Bs,Io.useOptimistic=function(e){var t=vs();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=_o.bind(null,Zi,!0,n),n.dispatch=t,[e,t]};var Co={readContext:ka,use:_s,useCallback:io,useContext:ka,useEffect:Xs,useImperativeHandle:no,useInsertionEffect:Zs,useLayoutEffect:eo,useMemo:so,useReducer:Ts,useRef:Gs,useState:function(){return Ts(Ss)},useDebugValue:ro,useDeferredValue:function(e,t){return ao(ws(),es.memoizedState,e,t)},useTransition:function(){var e=Ts(Ss)[0],t=ws().memoizedState;return["boolean"===typeof e?e:bs(e),t]},useSyncExternalStore:Cs,useId:mo};Co.useCacheRefresh=go,Co.useMemoCache=Es,Co.useHostTransitionStatus=po,Co.useFormState=qs,Co.useActionState=qs,Co.useOptimistic=function(e,t){return Os(ws(),0,e,t)};var Ao={readContext:ka,use:_s,useCallback:io,useContext:ka,useEffect:Xs,useImperativeHandle:no,useInsertionEffect:Zs,useLayoutEffect:eo,useMemo:so,useReducer:Is,useRef:Gs,useState:function(){return Is(Ss)},useDebugValue:ro,useDeferredValue:function(e,t){var n=ws();return null===es?oo(n,e,t):ao(n,es.memoizedState,e,t)},useTransition:function(){var e=Is(Ss)[0],t=ws().memoizedState;return["boolean"===typeof e?e:bs(e),t]},useSyncExternalStore:Cs,useId:mo};function xo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:R({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}Ao.useCacheRefresh=go,Ao.useMemoCache=Es,Ao.useHostTransitionStatus=po,Ao.useFormState=Ws,Ao.useActionState=Ws,Ao.useOptimistic=function(e,t){var n=ws();return null!==es?Os(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])};var No={isMounted:function(e){return!!(e=e._reactInternals)&&F(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Nu(),i=Ra(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Pa(e,i,r))&&(Pu(t,e,r),Da(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Nu(),i=Ra(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Pa(e,i,r))&&(Pu(t,e,r),Da(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Nu(),r=Ra(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Pa(e,r,n))&&(Pu(t,e,n),Da(t,e,n))}};function Ro(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!Qn(n,r)||!Qn(i,s))}function Po(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&No.enqueueReplaceState(t,t.state,null)}function Do(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=R({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var Oo="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function Lo(e){Oo(e)}function Mo(e){console.error(e)}function Fo(e){Oo(e)}function Uo(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout((function(){throw n}))}}function Vo(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout((function(){throw r}))}}function zo(e,t,n){return(n=Ra(n)).tag=3,n.payload={element:null},n.callback=function(){Uo(e,t)},n}function jo(e){return(e=Ra(e)).tag=3,e}function Bo(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var s=r.value;e.payload=function(){return i(s)},e.callback=function(){Vo(t,n,r)}}var o=n.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){Vo(t,n,r),"function"!==typeof i&&(null===Eu?Eu=new Set([this]):Eu.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var qo=Error(o(461)),$o=!1;function Ho(e,t,n,r){t.child=null===e?Ei(t,null,n,r):_i(t,e.child,n,r)}function Wo(e,t,n,r,i){n=n.render;var s=t.ref;if("ref"in r){var o={};for(var a in r)"ref"!==a&&(o[a]=r[a])}else o=r;return Ta(t),r=hs(e,t,n,o,s,i),a=ms(),null===e||$o?(Yr&&a&&Wr(t),t.flags|=1,Ho(e,t,r,i),t.child):(gs(e,t,i),da(e,t,i))}function Ko(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Ml(s)||void 0!==s.defaultProps||null!==n.compare?((e=Vl(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Go(e,t,s,r,i))}if(s=e.child,!fa(e,i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:Qn)(o,r)&&e.ref===t.ref)return da(e,t,i)}return t.flags|=1,(e=Fl(s,r)).ref=t.ref,e.return=t,t.child=e}function Go(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(Qn(s,r)&&e.ref===t.ref){if($o=!1,t.pendingProps=r=s,!fa(e,i))return t.lanes=e.lanes,da(e,t,i);0!==(131072&e.flags)&&($o=!0)}}return Xo(e,t,n,r,i)}function Qo(e,t,n){var r=t.pendingProps,i=r.children,s=0!==(2&t.stateNode._pendingVisibility),o=null!==e?e.memoizedState:null;if(Jo(e,t),"hidden"===r.mode||s){if(0!==(128&t.flags)){if(r=null!==o?o.baseLanes|n:n,null!==e){for(i=t.child=e.child,s=0;null!==i;)s=s|i.lanes|i.childLanes,i=i.sibling;t.childLanes=s&~r}else t.childLanes=0,t.child=null;return Yo(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Yo(e,t,null!==o?o.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Yi(0,null!==o?o.cachePool:null),null!==o?ki(t,o):Ii(),Ri(t)}else null!==o?(Yi(0,o.cachePool),ki(t,o),Pi(),t.memoizedState=null):(null!==e&&Yi(0,null),Ii(),Pi());return Ho(e,t,i,n),t.child}function Yo(e,t,n,r){var i=Qi();return i=null===i?null:{parent:Vi._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Yi(0,null),Ii(),Ri(t),null!==e&&Ea(e,t,r,!0),null}function Jo(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=2097664);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(o(284));null!==e&&e.ref===n||(t.flags|=2097664)}}function Xo(e,t,n,r,i){return Ta(t),n=hs(e,t,n,r,void 0,i),r=ms(),null===e||$o?(Yr&&r&&Wr(t),t.flags|=1,Ho(e,t,n,i),t.child):(gs(e,t,i),da(e,t,i))}function Zo(e,t,n,r,i,s){return Ta(t),t.updateQueue=null,n=fs(t,r,n,i),ds(e),r=ms(),null===e||$o?(Yr&&r&&Wr(t),t.flags|=1,Ho(e,t,n,s),t.child):(gs(e,t,s),da(e,t,s))}function ea(e,t,n,r,i){if(Ta(t),null===t.stateNode){var s=Pr,o=n.contextType;"object"===typeof o&&null!==o&&(s=ka(o)),s=new n(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=No,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},xa(t),o=n.contextType,s.context="object"===typeof o&&null!==o?ka(o):Pr,s.state=t.memoizedState,"function"===typeof(o=n.getDerivedStateFromProps)&&(xo(t,n,o,r),s.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(o=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),o!==s.state&&No.enqueueReplaceState(s,s.state,null),Fa(t,r,s,i),Ma(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var a=t.memoizedProps,l=Do(n,a);s.props=l;var u=s.context,c=n.contextType;o=Pr,"object"===typeof c&&null!==c&&(o=ka(c));var h=n.getDerivedStateFromProps;c="function"===typeof h||"function"===typeof s.getSnapshotBeforeUpdate,a=t.pendingProps!==a,c||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a||u!==o)&&Po(t,s,r,o),Aa=!1;var d=t.memoizedState;s.state=d,Fa(t,r,s,i),Ma(),u=t.memoizedState,a||d!==u||Aa?("function"===typeof h&&(xo(t,n,h,r),u=t.memoizedState),(l=Aa||Ro(t,n,l,r,d,u,o))?(c||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),s.props=r,s.state=u,s.context=o,r=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Na(e,t),c=Do(n,o=t.memoizedProps),s.props=c,h=t.pendingProps,d=s.context,u=n.contextType,l=Pr,"object"===typeof u&&null!==u&&(l=ka(u)),(u="function"===typeof(a=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==h||d!==l)&&Po(t,s,r,l),Aa=!1,d=t.memoizedState,s.state=d,Fa(t,r,s,i),Ma();var f=t.memoizedState;o!==h||d!==f||Aa||null!==e&&null!==e.dependencies&&Sa(e.dependencies)?("function"===typeof a&&(xo(t,n,a,r),f=t.memoizedState),(c=Aa||Ro(t,n,c,r,d,f,l)||null!==e&&null!==e.dependencies&&Sa(e.dependencies))?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,Jo(e,t),r=0!==(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=_i(t,e.child,null,i),t.child=_i(t,null,n,i)):Ho(e,t,n,i),t.memoizedState=s.state,e=t.child):e=da(e,t,i),e}function ta(e,t,n,r){return ii(),t.flags|=256,Ho(e,t,n,r),t.child}var na={dehydrated:null,treeContext:null,retryLane:0};function ra(e){return{baseLanes:e,cachePool:Ji()}}function ia(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=pu),e}function sa(e,t,n){var r,i=t.pendingProps,s=!1,a=0!==(128&t.flags);if((r=a)||(r=(null===e||null!==e.memoizedState)&&0!==(2&Oi.current)),r&&(s=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(Yr){if(s?Ni(t):Pi(),Yr){var l,u=Qr;if(l=u){e:{for(l=u,u=Xr;8!==l.nodeType;){if(!u){u=null;break e}if(null===(l=lh(l.nextSibling))){u=null;break e}}u=l}null!==u?(t.memoizedState={dehydrated:u,treeContext:null!==jr?{id:Br,overflow:qr}:null,retryLane:536870912},(l=Ll(18,null,null,0)).stateNode=u,l.return=t,t.child=l,Gr=t,Qr=null,l=!0):l=!1}l||ei(t)}if(null!==(u=t.memoizedState)&&null!==(u=u.dehydrated))return"$!"===u.data?t.lanes=16:t.lanes=536870912,null;Di(t)}return u=i.children,i=i.fallback,s?(Pi(),u=aa({mode:"hidden",children:u},s=t.mode),i=zl(i,s,n,null),u.return=t,i.return=t,u.sibling=i,t.child=u,(s=t.child).memoizedState=ra(n),s.childLanes=ia(e,r,n),t.memoizedState=na,i):(Ni(t),oa(t,u))}if(null!==(l=e.memoizedState)&&null!==(u=l.dehydrated)){if(a)256&t.flags?(Ni(t),t.flags&=-257,t=la(e,t,n)):null!==t.memoizedState?(Pi(),t.child=e.child,t.flags|=128,t=null):(Pi(),s=i.fallback,u=t.mode,i=aa({mode:"visible",children:i.children},u),(s=zl(s,u,n,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,_i(t,e.child,null,n),(i=t.child).memoizedState=ra(n),i.childLanes=ia(e,r,n),t.memoizedState=na,t=s);else if(Ni(t),"$!"===u.data){if(r=u.nextSibling&&u.nextSibling.dataset)var c=r.dgst;r=c,(i=Error(o(419))).stack="",i.digest=r,si({value:i,source:null,stack:null}),t=la(e,t,n)}else if($o||Ea(e,t,n,!1),r=0!==(n&e.childLanes),$o||r){if(null!==(r=tu)){if(0!==(42&(i=n&-n)))i=1;else switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=64;break;case 268435456:i=134217728;break;default:i=0}if(0!==(i=0!==(i&(r.suspendedLanes|n))?0:i)&&i!==l.retryLane)throw l.retryLane=i,xr(e,i),Pu(r,e,i),qo}"$?"===u.data||$u(),t=la(e,t,n)}else"$?"===u.data?(t.flags|=128,t.child=e.child,t=lc.bind(null,e),u._reactRetry=t,t=null):(e=l.treeContext,Qr=lh(u.nextSibling),Gr=t,Yr=!0,Jr=null,Xr=!1,null!==e&&(Vr[zr++]=Br,Vr[zr++]=qr,Vr[zr++]=jr,Br=e.id,qr=e.overflow,jr=t),(t=oa(t,i.children)).flags|=4096);return t}return s?(Pi(),s=i.fallback,u=t.mode,c=(l=e.child).sibling,(i=Fl(l,{mode:"hidden",children:i.children})).subtreeFlags=31457280&l.subtreeFlags,null!==c?s=Fl(c,s):(s=zl(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,null===(u=e.child.memoizedState)?u=ra(n):(null!==(l=u.cachePool)?(c=Vi._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=Ji(),u={baseLanes:u.baseLanes|n,cachePool:l}),s.memoizedState=u,s.childLanes=ia(e,r,n),t.memoizedState=na,i):(Ni(t),e=(n=e.child).sibling,(n=Fl(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function oa(e,t){return(t=aa({mode:"visible",children:t},e.mode)).return=e,e.child=t}function aa(e,t){return jl(e,t,0,null)}function la(e,t,n){return _i(t,e.child,null,n),(e=oa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ua(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ba(e.return,t,n)}function ca(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function ha(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Ho(e,t,r.children,n),0!==(2&(r=Oi.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ua(e,n,t);else if(19===e.tag)ua(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(G(Oi,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Li(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ca(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Li(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ca(t,!0,n,null,s);break;case"together":ca(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function da(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),hu|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ea(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Fl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function fa(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Sa(e))}function pa(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)$o=!0;else{if(!fa(e,n)&&0===(128&t.flags))return $o=!1,function(e,t,n){switch(t.tag){case 3:Z(t,t.stateNode.containerInfo),va(t,Vi,e.memoizedState.cache),ii();break;case 27:case 5:te(t);break;case 4:Z(t,t.stateNode.containerInfo);break;case 10:va(t,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Ni(t),t.flags|=128,null):0!==(n&t.child.childLanes)?sa(e,t,n):(Ni(t),null!==(e=da(e,t,n))?e.sibling:null);Ni(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Ea(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return ha(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),G(Oi,Oi.current),r)break;return null;case 22:case 23:return t.lanes=0,Qo(e,t,n);case 24:va(t,Vi,e.memoizedState.cache)}return da(e,t,n)}(e,t,n);$o=0!==(131072&e.flags)}else $o=!1,Yr&&0!==(1048576&t.flags)&&Hr(t,Ur,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((i=r.$$typeof)===y){t.tag=11,t=Wo(null,t,r,e,n);break e}if(i===b){t.tag=14,t=Ko(null,t,r,e,n);break e}}throw t=C(r)||r,Error(o(306,t,""))}Ml(r)?(e=Do(r,e),t.tag=1,t=ea(null,t,r,e,n)):(t.tag=0,t=Xo(null,t,r,e,n))}return t;case 0:return Xo(e,t,t.type,t.pendingProps,n);case 1:return ea(e,t,r=t.type,i=Do(r,t.pendingProps),n);case 3:e:{if(Z(t,t.stateNode.containerInfo),null===e)throw Error(o(387));var s=t.pendingProps;r=(i=t.memoizedState).element,Na(e,t),Fa(t,s,null,n);var a=t.memoizedState;if(s=a.cache,va(t,Vi,s),s!==i.cache&&_a(t,[Vi],n,!0),Ma(),s=a.element,i.isDehydrated){if(i={element:s,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=ta(e,t,s,n);break e}if(s!==r){si(r=Or(Error(o(424)),t)),t=ta(e,t,s,n);break e}for(Qr=lh(t.stateNode.containerInfo.firstChild),Gr=t,Yr=!0,Jr=null,Xr=!0,n=Ei(t,null,s,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ii(),s===r){t=da(e,t,n);break e}Ho(e,t,s,n)}t=t.child}return t;case 26:return Jo(e,t),null===e?(n=yh(t.type,null,t.pendingProps,null))?t.memoizedState=n:Yr||(n=t.type,e=t.pendingProps,(r=Yc(J.current).createElement(n))[Ue]=t,r[Ve]=e,Kc(r,n,e),Je(r),t.stateNode=r):t.memoizedState=yh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return te(t),null===e&&Yr&&(r=t.stateNode=ch(t.type,t.pendingProps,J.current),Gr=t,Xr=!0,Qr=lh(r.firstChild)),r=t.pendingProps.children,null!==e||Yr?Ho(e,t,r,n):t.child=_i(t,null,r,n),Jo(e,t),t.child;case 5:return null===e&&Yr&&((i=r=Qr)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[He])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==i.rel||e.getAttribute("href")!==(null==i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===s)return e}if(null===(e=lh(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,Xr))?(t.stateNode=r,Gr=t,Qr=lh(r.firstChild),Xr=!1,i=!0):i=!1),i||ei(t)),te(t),i=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,r=s.children,Zc(i,s)?r=null:null!==a&&Zc(i,a)&&(t.flags|=32),null!==t.memoizedState&&(i=hs(e,t,ps,null,null,n),Fh._currentValue=i),Jo(e,t),Ho(e,t,r,n),t.child;case 6:return null===e&&Yr&&((e=n=Qr)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=lh(e.nextSibling)))return null}return e}(n,t.pendingProps,Xr))?(t.stateNode=n,Gr=t,Qr=null,e=!0):e=!1),e||ei(t)),null;case 13:return sa(e,t,n);case 4:return Z(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=_i(t,null,r,n):Ho(e,t,r,n),t.child;case 11:return Wo(e,t,t.type,t.pendingProps,n);case 7:return Ho(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ho(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,va(t,t.type,r.value),Ho(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Ta(t),r=r(i=ka(i)),t.flags|=1,Ho(e,t,r,n),t.child;case 14:return Ko(e,t,t.type,t.pendingProps,n);case 15:return Go(e,t,t.type,t.pendingProps,n);case 19:return ha(e,t,n);case 22:return Qo(e,t,n);case 24:return Ta(t),r=ka(Vi),null===e?(null===(i=Qi())&&(i=tu,s=zi(),i.pooledCache=s,s.refCount++,null!==s&&(i.pooledCacheLanes|=n),i=s),t.memoizedState={parent:r,cache:i},xa(t),va(t,Vi,i)):(0!==(e.lanes&n)&&(Na(e,t),Fa(t,null,null,n),Ma()),i=e.memoizedState,s=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),va(t,Vi,r)):(r=s.cache,va(t,Vi,r),r!==i.cache&&_a(t,[Vi],n,!0))),Ho(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}var ma=W(null),ga=null,ya=null;function va(e,t,n){G(ma,t._currentValue),t._currentValue=n}function wa(e){e._currentValue=ma.current,K(ma)}function ba(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function _a(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var s=i.dependencies;if(null!==s){var a=i.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=i;for(var u=0;u<t.length;u++)if(l.context===t[u]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),ba(s.return,n,e),r||(a=null);break e}s=l.next}}else if(18===i.tag){if(null===(a=i.return))throw Error(o(341));a.lanes|=n,null!==(s=a.alternate)&&(s.lanes|=n),ba(a,n,e),a=null}else a=i.child;if(null!==a)a.return=i;else for(a=i;null!==a;){if(a===e){a=null;break}if(null!==(i=a.sibling)){i.return=a.return,a=i;break}a=a.return}i=a}}function Ea(e,t,n,r){e=null;for(var i=t,s=!1;null!==i;){if(!s)if(0!==(524288&i.flags))s=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var a=i.alternate;if(null===a)throw Error(o(387));if(null!==(a=a.memoizedProps)){var l=i.type;Gn(i.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(i===X.current){if(null===(a=i.alternate))throw Error(o(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(Fh):e=[Fh])}i=i.return}null!==e&&_a(t,e,n,r),t.flags|=262144}function Sa(e){for(e=e.firstContext;null!==e;){if(!Gn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ta(e){ga=e,ya=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function ka(e){return Ca(ga,e)}function Ia(e,t){return null===ga&&Ta(e),Ca(e,t)}function Ca(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===ya){if(null===e)throw Error(o(308));ya=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ya=ya.next=t;return n}var Aa=!1;function xa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Na(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ra(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Pa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&eu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Rr(e),Nr(e,null,n),t}return Cr(e,r,t,n),Rr(e)}function Da(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194176&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Oe(e,n)}}function Oa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var La=!1;function Ma(){if(La){if(null!==Hi)throw Hi}}function Fa(e,t,n,r){La=!1;var i=e.updateQueue;Aa=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,u=l.next;l.next=null,null===o?s=u:o.next=u,o=l;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,c=u=l=null,a=s;;){var d=-536870913&a.lane,f=d!==a.lane;if(f?(ru&d)===d:(r&d)===d){0!==d&&d===$i&&(La=!0),null!==c&&(c=c.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var p=e,m=a;d=t;var g=n;switch(m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(g,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(g,h,d):p)||void 0===d)break e;h=R({},h,d);break e;case 2:Aa=!0}}null!==(d=a.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=i.callbacks)?i.callbacks=[d]:f.push(d))}else f={lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(u=c=f,l=h):c=c.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(f=a).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null===s&&(i.shared.lanes=0),hu|=o,e.lanes=o,e.memoizedState=h}}function Ua(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function Va(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Ua(n[e],t)}function za(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var s=n.create,o=n.inst;r=s(),o.destroy=r}n=n.next}while(n!==i)}}catch(a){ic(t,t.return,a)}}function ja(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var s=i.next;r=s;do{if((r.tag&e)===e){var o=r.inst,a=o.destroy;if(void 0!==a){o.destroy=void 0,i=t;var l=n;try{a()}catch(u){ic(i,l,u)}}}r=r.next}while(r!==s)}}catch(u){ic(t,t.return,u)}}function Ba(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Va(t,n)}catch(r){ic(e,e.return,r)}}}function qa(e,t,n){n.props=Do(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){ic(e,t,r)}}function $a(e,t){try{var n=e.ref;if(null!==n){var r=e.stateNode;switch(e.tag){case 26:case 27:case 5:var i=r;break;default:i=r}"function"===typeof n?e.refCleanup=n(i):n.current=i}}catch(s){ic(e,t,s)}}function Ha(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){ic(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(s){ic(e,t,s)}else n.current=null}function Wa(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){ic(e,e.return,i)}}function Ka(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,a=null,l=null,u=null,c=null,h=null;for(p in n){var d=n[p];if(n.hasOwnProperty(p)&&null!=d)switch(p){case"checked":case"value":break;case"defaultValue":u=d;default:r.hasOwnProperty(p)||Hc(e,t,p,null,r,d)}}for(var f in r){var p=r[f];if(d=n[f],r.hasOwnProperty(f)&&(null!=p||null!=d))switch(f){case"type":s=p;break;case"name":i=p;break;case"checked":c=p;break;case"defaultChecked":h=p;break;case"value":a=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:p!==d&&Hc(e,t,f,p,r,d)}}return void gt(e,a,l,u,c,h,s,i);case"select":for(s in p=a=l=f=null,n)if(u=n[s],n.hasOwnProperty(s)&&null!=u)switch(s){case"value":break;case"multiple":p=u;default:r.hasOwnProperty(s)||Hc(e,t,s,null,r,u)}for(i in r)if(s=r[i],u=n[i],r.hasOwnProperty(i)&&(null!=s||null!=u))switch(i){case"value":f=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==u&&Hc(e,t,i,s,r,u)}return t=l,n=a,r=p,void(null!=f?wt(e,!!n,f,!1):!!r!==!!n&&(null!=t?wt(e,!!n,t,!0):wt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Hc(e,t,l,null,r,i)}for(a in r)if(i=r[a],s=n[a],r.hasOwnProperty(a)&&(null!=i||null!=s))switch(a){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(o(91));break;default:i!==s&&Hc(e,t,a,i,r,s)}return void bt(e,f,p);case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else Hc(e,t,m,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))if("selected"===u)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else Hc(e,t,u,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&Hc(e,t,g,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(o(137,t));break;default:Hc(e,t,c,f,r,p)}return;default:if(It(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&Wc(e,t,y,void 0,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||void 0===f&&void 0===p||Wc(e,t,h,f,r,p);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!r.hasOwnProperty(v)&&Hc(e,t,v,null,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||null==f&&null==p||Hc(e,t,d,f,r,p)}(r,e.type,n,t),r[Ve]=t}catch(i){ic(e,e.return,i)}}function Ga(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag||4===e.tag}function Qa(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Ga(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&27!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Ya(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$c));else if(4!==r&&27!==r&&null!==(e=e.child))for(Ya(e,t,n),e=e.sibling;null!==e;)Ya(e,t,n),e=e.sibling}function Ja(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&27!==r&&null!==(e=e.child))for(Ja(e,t,n),e=e.sibling;null!==e;)Ja(e,t,n),e=e.sibling}var Xa=!1,Za=!1,el=!1,tl="function"===typeof WeakSet?WeakSet:Set,nl=null,rl=!1;function il(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:yl(e,n),4&r&&za(5,n);break;case 1:if(yl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){ic(n,n.return,a)}else{var i=Do(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(l){ic(n,n.return,l)}}64&r&&Ba(n),512&r&&$a(n,n.return);break;case 3:if(yl(e,n),64&r&&null!==(r=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:e=n.child.stateNode}try{Va(r,e)}catch(a){ic(n,n.return,a)}}break;case 26:yl(e,n),512&r&&$a(n,n.return);break;case 27:case 5:yl(e,n),null===t&&4&r&&Wa(n),512&r&&$a(n,n.return);break;case 12:default:yl(e,n);break;case 13:yl(e,n),4&r&&cl(e,n);break;case 22:if(!(i=null!==n.memoizedState||Xa)){t=null!==t&&null!==t.memoizedState||Za;var s=Xa,o=Za;Xa=i,(Za=t)&&!o?wl(e,n,0!==(8772&n.subtreeFlags)):yl(e,n),Xa=s,Za=o}512&r&&("manual"===n.memoizedProps.mode?$a(n,n.return):Ha(n,n.return))}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&We(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ol=null,al=!1;function ll(e,t,n){for(n=n.child;null!==n;)ul(e,t,n),n=n.sibling}function ul(e,t,n){if(ve&&"function"===typeof ve.onCommitFiberUnmount)try{ve.onCommitFiberUnmount(ye,n)}catch(o){}switch(n.tag){case 26:Za||Ha(n,t),ll(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Za||Ha(n,t);var r=ol,i=al;for(ol=n.stateNode,ll(e,t,n),t=(n=n.stateNode).attributes;t.length;)n.removeAttributeNode(t[0]);We(n),ol=r,al=i;break;case 5:Za||Ha(n,t);case 6:i=ol;var s=al;if(ol=null,ll(e,t,n),al=s,null!==(ol=i))if(al)try{e=ol,r=n.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)}catch(a){ic(n,t,a)}else try{ol.removeChild(n.stateNode)}catch(a){ic(n,t,a)}break;case 18:null!==ol&&(al?(t=ol,n=n.stateNode,8===t.nodeType?oh(t.parentNode,n):1===t.nodeType&&oh(t,n),gd(t)):oh(ol,n.stateNode));break;case 4:r=ol,i=al,ol=n.stateNode.containerInfo,al=!0,ll(e,t,n),ol=r,al=i;break;case 0:case 11:case 14:case 15:Za||ja(2,n,t),Za||ja(4,n,t),ll(e,t,n);break;case 1:Za||(Ha(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&qa(n,t,r)),ll(e,t,n);break;case 21:ll(e,t,n);break;case 22:Za||Ha(n,t),Za=(r=Za)||null!==n.memoizedState,ll(e,t,n),Za=r;break;default:ll(e,t,n)}}function cl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{gd(e)}catch(n){ic(t,t.return,n)}}function hl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new tl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new tl),t;default:throw Error(o(435,e.tag))}}(e);t.forEach((function(t){var r=uc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}function dl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:case 5:ol=l.stateNode,al=!1;break e;case 3:case 4:ol=l.stateNode.containerInfo,al=!0;break e}l=l.return}if(null===ol)throw Error(o(160));ul(s,a,i),ol=null,al=!1,null!==(s=i.alternate)&&(s.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)pl(t,e),t=t.sibling}var fl=null;function pl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:dl(t,e),ml(e),4&r&&(ja(3,e,e.return),za(3,e),ja(5,e,e.return));break;case 1:dl(t,e),ml(e),512&r&&(Za||null===n||Ha(n,n.return)),64&r&&Xa&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=fl;if(dl(t,e),ml(e),512&r&&(Za||null===n||Ha(n,n.return)),4&r){var s=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(s=i.getElementsByTagName("title")[0])||s[He]||s[Ue]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=i.createElement(r),i.head.insertBefore(s,i.querySelector("head > title"))),Kc(s,r,n),s[Ue]=e,Je(s),r=s;break e;case"link":var a=Ah("link","href",i).get(r+(n.href||""));if(a)for(var l=0;l<a.length;l++)if((s=a[l]).getAttribute("href")===(null==n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){a.splice(l,1);break t}Kc(s=i.createElement(r),r,n),i.head.appendChild(s);break;case"meta":if(a=Ah("meta","content",i).get(r+(n.content||"")))for(l=0;l<a.length;l++)if((s=a[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){a.splice(l,1);break t}Kc(s=i.createElement(r),r,n),i.head.appendChild(s);break;default:throw Error(o(468,r))}s[Ue]=e,Je(s),r=s}e.stateNode=r}else xh(i,e.type,e.stateNode);else e.stateNode=Sh(i,r,e.memoizedProps);else s!==r?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===r?xh(i,e.type,e.stateNode):Sh(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&Ka(e,e.memoizedProps,n.memoizedProps)}break;case 27:if(4&r&&null===e.alternate){i=e.stateNode,s=e.memoizedProps;try{for(var u=i.firstChild;u;){var c=u.nextSibling,h=u.nodeName;u[He]||"HEAD"===h||"BODY"===h||"SCRIPT"===h||"STYLE"===h||"LINK"===h&&"stylesheet"===u.rel.toLowerCase()||i.removeChild(u),u=c}for(var d=e.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Kc(i,d,s),i[Ue]=e,i[Ve]=s}catch(m){ic(e,e.return,m)}}case 5:if(dl(t,e),ml(e),512&r&&(Za||null===n||Ha(n,n.return)),32&e.flags){i=e.stateNode;try{Et(i,"")}catch(m){ic(e,e.return,m)}}4&r&&null!=e.stateNode&&Ka(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(el=!0);break;case 6:if(dl(t,e),ml(e),4&r){if(null===e.stateNode)throw Error(o(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(m){ic(e,e.return,m)}}break;case 3:if(Ch=null,i=fl,fl=fh(t.containerInfo),dl(t,e),fl=i,ml(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{gd(t.containerInfo)}catch(m){ic(e,e.return,m)}el&&(el=!1,gl(e));break;case 4:r=fl,fl=fh(e.stateNode.containerInfo),dl(t,e),ml(e),fl=r;break;case 12:dl(t,e),ml(e);break;case 13:dl(t,e),ml(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(wu=le()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,hl(e,r)));break;case 22:if(512&r&&(Za||null===n||Ha(n,n.return)),u=null!==e.memoizedState,c=null!==n&&null!==n.memoizedState,Xa=(h=Xa)||u,Za=(d=Za)||c,dl(t,e),Za=d,Xa=h,ml(e),(t=e.stateNode)._current=e,t._visibility&=-3,t._visibility|=2&t._pendingVisibility,8192&r&&(t._visibility=u?-2&t._visibility:1|t._visibility,u&&(t=Xa||Za,null===n||c||t||vl(e)),null===e.memoizedProps||"manual"!==e.memoizedProps.mode))e:for(n=null,t=e;;){if(5===t.tag||26===t.tag||27===t.tag){if(null===n){c=n=t;try{if(i=c.stateNode,u)"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{a=c.stateNode;var p=void 0!==(l=c.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null;a.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(m){ic(c,c.return,m)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(m){ic(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,hl(e,n))));break;case 19:dl(t,e),ml(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,hl(e,r)));break;case 21:break;default:dl(t,e),ml(e)}}function ml(e){var t=e.flags;if(2&t){try{if(27!==e.tag){e:{for(var n=e.return;null!==n;){if(Ga(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 27:var i=r.stateNode;Ja(e,Qa(e),i);break;case 5:var s=r.stateNode;32&r.flags&&(Et(s,""),r.flags&=-33),Ja(e,Qa(e),s);break;case 3:case 4:var a=r.stateNode.containerInfo;Ya(e,Qa(e),a);break;default:throw Error(o(161))}}}catch(l){ic(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;gl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function yl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)il(e,t.alternate,t),t=t.sibling}function vl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ja(4,t,t.return),vl(t);break;case 1:Ha(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&qa(t,t.return,n),vl(t);break;case 26:case 27:case 5:Ha(t,t.return),vl(t);break;case 22:Ha(t,t.return),null===t.memoizedState&&vl(t);break;default:vl(t)}e=e.sibling}}function wl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,s=t,o=s.flags;switch(s.tag){case 0:case 11:case 15:wl(i,s,n),za(4,s);break;case 1:if(wl(i,s,n),"function"===typeof(i=(r=s).stateNode).componentDidMount)try{i.componentDidMount()}catch(u){ic(r,r.return,u)}if(null!==(i=(r=s).updateQueue)){var a=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)Ua(l[i],a)}catch(u){ic(r,r.return,u)}}n&&64&o&&Ba(s),$a(s,s.return);break;case 26:case 27:case 5:wl(i,s,n),n&&null===r&&4&o&&Wa(s),$a(s,s.return);break;case 12:default:wl(i,s,n);break;case 13:wl(i,s,n),n&&4&o&&cl(i,s);break;case 22:null===s.memoizedState&&wl(i,s,n),$a(s,s.return)}t=t.sibling}}function bl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&ji(n))}function _l(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&ji(e))}function El(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Sl(e,t,n,r),t=t.sibling}function Sl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:El(e,t,n,r),2048&i&&za(9,t);break;case 3:El(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&ji(e)));break;case 12:if(2048&i){El(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,o=s.id,a=s.onPostCommit;"function"===typeof a&&a(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){ic(t,t.return,l)}}else El(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,null!==t.memoizedState?4&s._visibility?El(e,t,n,r):kl(e,t):4&s._visibility?El(e,t,n,r):(s._visibility|=4,Tl(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&i&&bl(t.alternate,t);break;case 24:El(e,t,n,r),2048&i&&_l(t.alternate,t);break;default:El(e,t,n,r)}}function Tl(e,t,n,r,i){for(i=i&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var s=e,o=t,a=n,l=r,u=o.flags;switch(o.tag){case 0:case 11:case 15:Tl(s,o,a,l,i),za(8,o);break;case 23:break;case 22:var c=o.stateNode;null!==o.memoizedState?4&c._visibility?Tl(s,o,a,l,i):kl(s,o):(c._visibility|=4,Tl(s,o,a,l,i)),i&&2048&u&&bl(o.alternate,o);break;case 24:Tl(s,o,a,l,i),i&&2048&u&&_l(o.alternate,o);break;default:Tl(s,o,a,l,i)}t=t.sibling}}function kl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:kl(n,r),2048&i&&bl(r.alternate,r);break;case 24:kl(n,r),2048&i&&_l(r.alternate,r);break;default:kl(n,r)}t=t.sibling}}var Il=8192;function Cl(e){if(e.subtreeFlags&Il)for(e=e.child;null!==e;)Al(e),e=e.sibling}function Al(e){switch(e.tag){case 26:Cl(e),e.flags&Il&&null!==e.memoizedState&&function(e,t,n){if(null===Rh)throw Error(o(475));var r=Rh;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var i=vh(n.href),s=e.querySelector(wh(i));if(s)return null!==(e=s._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Dh.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=s,void Je(s);s=e.ownerDocument||e,n=bh(n),(i=hh.get(i))&&kh(n,i),Je(s=s.createElement("link"));var a=s;a._p=new Promise((function(e,t){a.onload=e,a.onerror=t})),Kc(s,"link",n),t.instance=s}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Dh.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(fl,e.memoizedState,e.memoizedProps);break;case 5:default:Cl(e);break;case 3:case 4:var t=fl;fl=fh(e.stateNode.containerInfo),Cl(e),fl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Il,Il=16777216,Cl(e),Il=t):Cl(e))}}function xl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Nl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];nl=r,Dl(r,e)}xl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Rl(e),e=e.sibling}function Rl(e){switch(e.tag){case 0:case 11:case 15:Nl(e),2048&e.flags&&ja(9,e,e.return);break;case 3:case 12:default:Nl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&4&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-5,Pl(e)):Nl(e)}}function Pl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];nl=r,Dl(r,e)}xl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ja(8,t,t.return),Pl(t);break;case 22:4&(n=t.stateNode)._visibility&&(n._visibility&=-5,Pl(t));break;default:Pl(t)}e=e.sibling}}function Dl(e,t){for(;null!==nl;){var n=nl;switch(n.tag){case 0:case 11:case 15:ja(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:ji(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,nl=r;else e:for(n=e;null!==nl;){var i=(r=nl).sibling,s=r.return;if(sl(r),r===n){nl=null;break e}if(null!==i){i.return=s,nl=i;break e}nl=s}}}function Ol(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ll(e,t,n,r){return new Ol(e,t,n,r)}function Ml(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fl(e,t){var n=e.alternate;return null===n?((n=Ll(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=31457280&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ul(e,t){e.flags&=31457282;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Vl(e,t,n,r,i,s){var a=0;if(r=e,"function"===typeof e)Ml(e)&&(a=1);else if("string"===typeof e)a=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,Q.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case h:return zl(n.children,i,s,t);case d:a=8,i|=24;break;case f:return(e=Ll(12,n,t,2|i)).elementType=f,e.lanes=s,e;case v:return(e=Ll(13,n,t,i)).elementType=v,e.lanes=s,e;case w:return(e=Ll(19,n,t,i)).elementType=w,e.lanes=s,e;case E:return jl(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case p:case g:a=10;break e;case m:a=9;break e;case y:a=11;break e;case b:a=14;break e;case _:a=16,r=null;break e}a=29,n=Error(o(130,null===e?"null":typeof e,"")),r=null}return(t=Ll(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function zl(e,t,n,r){return(e=Ll(7,e,r,t)).lanes=n,e}function jl(e,t,n,r){(e=Ll(22,e,r,t)).elementType=E,e.lanes=n;var i={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var e=i._current;if(null===e)throw Error(o(456));if(0===(2&i._pendingVisibility)){var t=xr(e,2);null!==t&&(i._pendingVisibility|=2,Pu(t,e,2))}},attach:function(){var e=i._current;if(null===e)throw Error(o(456));if(0!==(2&i._pendingVisibility)){var t=xr(e,2);null!==t&&(i._pendingVisibility&=-3,Pu(t,e,2))}}};return e.stateNode=i,e}function Bl(e,t,n){return(e=Ll(6,e,null,t)).lanes=n,e}function ql(e,t,n){return(t=Ll(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $l(e){e.flags|=4}function Hl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Nh(t)){if(null!==(t=Ai.current)&&((4194176&ru)===ru?null!==xi:(62914560&ru)!==ru&&0===(536870912&ru)||t!==xi))throw di=li,ai;e.flags|=8192}}function Wl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ne():536870912,e.lanes|=t,mu|=t)}function Kl(e,t){if(!Yr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=31457280&i.subtreeFlags,r|=31457280&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ql(e,t,n){var r=t.pendingProps;switch(Kr(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return Gl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),wa(Vi),ee(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ri(t)?$l(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Jr&&(Ou(Jr),Jr=null))),Gl(t),null;case 26:return n=t.memoizedState,null===e?($l(t),null!==n?(Gl(t),Hl(t,n)):(Gl(t),t.flags&=-16777217)):n?n!==e.memoizedState?($l(t),Gl(t),Hl(t,n)):(Gl(t),t.flags&=-16777217):(e.memoizedProps!==r&&$l(t),Gl(t),t.flags&=-16777217),null;case 27:ne(t),n=J.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&$l(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Gl(t),null}e=Q.current,ri(t)?ti(t):(e=ch(i,r,n),t.stateNode=e,$l(t))}return Gl(t),null;case 5:if(ne(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&$l(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Gl(t),null}if(e=Q.current,ri(t))ti(t);else{switch(i=Yc(J.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}e[Ue]=t,e[Ve]=r;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(Kc(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&$l(t)}}return Gl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&$l(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(e=J.current,ri(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=Gr))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[Ue]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||qc(e.nodeValue,n)))||ei(t)}else(e=Yc(e).createTextNode(r))[Ue]=t,t.stateNode=e}return Gl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=ri(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(o(317));i[Ue]=t}else ii(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gl(t),i=!1}else null!==Jr&&(Ou(Jr),Jr=null),i=!0;if(!i)return 256&t.flags?(Di(t),t):(Di(t),null)}if(Di(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var s=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(s=r.memoizedState.cachePool.pool),s!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Wl(t,t.updateQueue),Gl(t),null;case 4:return ee(),null===e&&Dc(t.stateNode.containerInfo),Gl(t),null;case 10:return wa(t.type),Gl(t),null;case 19:if(K(Oi),null===(i=t.memoizedState))return Gl(t),null;if(r=0!==(128&t.flags),null===(s=i.rendering))if(r)Kl(i,!1);else{if(0!==cu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=Li(e))){for(t.flags|=128,Kl(i,!1),e=s.updateQueue,t.updateQueue=e,Wl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Ul(n,e),n=n.sibling;return G(Oi,1&Oi.current|2),t.child}e=e.sibling}null!==i.tail&&le()>bu&&(t.flags|=128,r=!0,Kl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=Li(s))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,Wl(t,e),Kl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!s.alternate&&!Yr)return Gl(t),null}else 2*le()-i.renderingStartTime>bu&&536870912!==n&&(t.flags|=128,r=!0,Kl(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=i.last)?e.sibling=s:t.child=s,i.last=s)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=le(),t.sibling=null,e=Oi.current,G(Oi,r?1&e|2:1&e),t):(Gl(t),null);case 22:case 23:return Di(t),Ci(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(Gl(t),6&t.subtreeFlags&&(t.flags|=8192)):Gl(t),null!==(n=t.updateQueue)&&Wl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&K(Gi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),wa(Vi),Gl(t),null;case 25:return null}throw Error(o(156,t.tag))}function Yl(e,t){switch(Kr(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return wa(Vi),ee(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return ne(t),null;case 13:if(Di(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));ii()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return K(Oi),null;case 4:return ee(),null;case 10:return wa(t.type),null;case 22:case 23:return Di(t),Ci(),null!==e&&K(Gi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return wa(Vi),null;default:return null}}function Jl(e,t){switch(Kr(t),t.tag){case 3:wa(Vi),ee();break;case 26:case 27:case 5:ne(t);break;case 4:ee();break;case 13:Di(t);break;case 19:K(Oi);break;case 10:wa(t.type);break;case 22:case 23:Di(t),Ci(),null!==e&&K(Gi);break;case 24:wa(Vi)}}var Xl={getCacheForType:function(e){var t=ka(Vi),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},Zl="function"===typeof WeakMap?WeakMap:Map,eu=0,tu=null,nu=null,ru=0,iu=0,su=null,ou=!1,au=!1,lu=!1,uu=0,cu=0,hu=0,du=0,fu=0,pu=0,mu=0,gu=null,yu=null,vu=!1,wu=0,bu=1/0,_u=null,Eu=null,Su=!1,Tu=null,ku=0,Iu=0,Cu=null,Au=0,xu=null;function Nu(){if(0!==(2&eu)&&0!==ru)return ru&-ru;if(null!==N.T){return 0!==$i?$i:Ec()}return Me()}function Ru(){0===pu&&(pu=0===(536870912&ru)||Yr?xe():536870912);var e=Ai.current;return null!==e&&(e.flags|=32),pu}function Pu(e,t,n){(e===tu&&2===iu||null!==e.cancelPendingCommit)&&(zu(e,0),Fu(e,ru,pu,!1)),Pe(e,n),0!==(2&eu)&&e===tu||(e===tu&&(0===(2&eu)&&(du|=n),4===cu&&Fu(e,ru,pu,!1)),gc(e))}function Du(e,t,n){if(0!==(6&eu))throw Error(o(327));for(var r=!n&&0===(60&t)&&0===(t&e.expiredLanes)||Ce(e,t),i=r?function(e,t){var n=eu;eu|=2;var r=Bu(),i=qu();tu!==e||ru!==t?(_u=null,bu=le()+500,zu(e,t)):au=Ce(e,t);e:for(;;)try{if(0!==iu&&null!==nu){t=nu;var s=su;t:switch(iu){case 1:iu=0,su=null,Ju(e,t,s,1);break;case 2:if(ui(s)){iu=0,su=null,Yu(t);break}t=function(){2===iu&&tu===e&&(iu=7),gc(e)},s.then(t,t);break e;case 3:iu=7;break e;case 4:iu=5;break e;case 7:ui(s)?(iu=0,su=null,Yu(t)):(iu=0,su=null,Ju(e,t,s,7));break;case 5:var a=null;switch(nu.tag){case 26:a=nu.memoizedState;case 5:case 27:var l=nu;if(!a||Nh(a)){iu=0,su=null;var u=l.sibling;if(null!==u)nu=u;else{var c=l.return;null!==c?(nu=c,Xu(c)):nu=null}break t}}iu=0,su=null,Ju(e,t,s,5);break;case 6:iu=0,su=null,Ju(e,t,s,6);break;case 8:Vu(),cu=6;break e;default:throw Error(o(462))}}Gu();break}catch(h){ju(e,h)}return ya=ga=null,N.H=r,N.A=i,eu=n,null!==nu?0:(tu=null,ru=0,Ir(),cu)}(e,t):Wu(e,t,!0),s=r;;){if(0===i){au&&!r&&Fu(e,t,0,!1);break}if(6===i)Fu(e,t,0,!ou);else{if(n=e.current.alternate,s&&!Mu(n)){i=Wu(e,t,!1),s=!1;continue}if(2===i){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;i=gu;var u=l.current.memoizedState.isDehydrated;if(u&&(zu(l,a).flags|=256),2!==(a=Wu(l,a,!1))){if(lu&&!u){l.errorRecoveryDisabledLanes|=s,du|=s,i=4;break e}s=yu,yu=i,null!==s&&Ou(s)}i=a}if(s=!1,2!==i)continue}}if(1===i){zu(e,0),Fu(e,t,0,!0);break}e:{switch(r=e,i){case 0:case 1:throw Error(o(345));case 4:if((4194176&t)===t){Fu(r,t,pu,!ou);break e}break;case 2:yu=null;break;case 3:case 5:break;default:throw Error(o(329))}if(r.finishedWork=n,r.finishedLanes=t,(62914560&t)===t&&10<(s=wu+300-le())){if(Fu(r,t,pu,!ou),0!==Ie(r,0))break e;r.timeoutHandle=th(Lu.bind(null,r,n,yu,_u,vu,t,pu,du,mu,ou,2,-0,0),s)}else Lu(r,n,yu,_u,vu,t,pu,du,mu,ou,0,-0,0)}}break}gc(e)}function Ou(e){null===yu?yu=e:yu.push.apply(yu,e)}function Lu(e,t,n,r,i,s,a,l,u,c,h,d,f){var p=t.subtreeFlags;if((8192&p||16785408===(16785408&p))&&(Rh={stylesheets:null,count:0,unsuspend:Ph},Al(t),null!==(t=function(){if(null===Rh)throw Error(o(475));var e=Rh;return e.stylesheets&&0===e.count&&Lh(e,e.stylesheets),0<e.count?function(t){var n=setTimeout((function(){if(e.stylesheets&&Lh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}),6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=t(ec.bind(null,e,n,r,i,a,l,u,1,d,f)),void Fu(e,s,a,!c);ec(e,n,r,i,a,l,u,h,d,f)}function Mu(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Gn(s(),i))return!1}catch(o){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Fu(e,t,n,r){t&=~fu,t&=~du,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var s=31-be(i),o=1<<s;r[s]=-1,i&=~o}0!==n&&De(e,n,t)}function Uu(){return 0!==(6&eu)||(yc(0,!1),!1)}function Vu(){if(null!==nu){if(0===iu)var e=nu.return;else ya=ga=null,ys(e=nu),pi=null,mi=0,e=nu;for(;null!==e;)Jl(e.alternate,e),e=e.return;nu=null}}function zu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,nh(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Vu(),tu=e,nu=n=Fl(e.current,null),ru=t,iu=0,su=null,ou=!1,au=Ce(e,t),lu=!1,mu=pu=fu=du=hu=cu=0,yu=gu=null,vu=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-be(r),s=1<<i;t|=e[i],r&=~s}return uu=t,Ir(),n}function ju(e,t){Zi=null,N.H=ko,t===oi?(t=fi(),iu=3):t===ai?(t=fi(),iu=4):iu=t===qo?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,su=t,null===nu&&(cu=1,Uo(e,Or(t,e.current)))}function Bu(){var e=N.H;return N.H=ko,null===e?ko:e}function qu(){var e=N.A;return N.A=Xl,e}function $u(){cu=4,ou||(4194176&ru)!==ru&&null!==Ai.current||(au=!0),0===(134217727&hu)&&0===(134217727&du)||null===tu||Fu(tu,ru,pu,!1)}function Wu(e,t,n){var r=eu;eu|=2;var i=Bu(),s=qu();tu===e&&ru===t||(_u=null,zu(e,t)),t=!1;var o=cu;e:for(;;)try{if(0!==iu&&null!==nu){var a=nu,l=su;switch(iu){case 8:Vu(),o=6;break e;case 3:case 2:case 6:null===Ai.current&&(t=!0);var u=iu;if(iu=0,su=null,Ju(e,a,l,u),n&&au){o=0;break e}break;default:u=iu,iu=0,su=null,Ju(e,a,l,u)}}Ku(),o=cu;break}catch(c){ju(e,c)}return t&&e.shellSuspendCounter++,ya=ga=null,eu=r,N.H=i,N.A=s,null===nu&&(tu=null,ru=0,Ir()),o}function Ku(){for(;null!==nu;)Qu(nu)}function Gu(){for(;null!==nu&&!oe();)Qu(nu)}function Qu(e){var t=pa(e.alternate,e,uu);e.memoizedProps=e.pendingProps,null===t?Xu(e):nu=t}function Yu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Zo(n,t,t.pendingProps,t.type,void 0,ru);break;case 11:t=Zo(n,t,t.pendingProps,t.type.render,t.ref,ru);break;case 5:ys(t);default:Jl(n,t),t=pa(n,t=nu=Ul(t,uu),uu)}e.memoizedProps=e.pendingProps,null===t?Xu(e):nu=t}function Ju(e,t,n,r){ya=ga=null,ys(t),pi=null,mi=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Ea(t,n,i,!0),null!==(n=Ai.current)){switch(n.tag){case 13:return null===xi?$u():null===n.alternate&&0===cu&&(cu=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===li?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),sc(e,r,i)),!1;case 22:return n.flags|=65536,r===li?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),sc(e,r,i)),!1}throw Error(o(435,n.tag))}return sc(e,r,i),$u(),!1}if(Yr)return null!==(t=Ai.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==Zr&&si(Or(e=Error(o(422),{cause:r}),n))):(r!==Zr&&si(Or(t=Error(o(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=Or(r,n),Oa(e,i=zo(e.stateNode,r,i)),4!==cu&&(cu=2)),!1;var s=Error(o(520),{cause:r});if(s=Or(s,n),null===gu?gu=[s]:gu.push(s),4!==cu&&(cu=2),null===t)return!0;r=Or(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,Oa(n,e=zo(n.stateNode,r,e)),!1;case 1:if(t=n.type,s=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===Eu||!Eu.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,Bo(i=jo(i),e,n,r),Oa(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,ru))return cu=1,Uo(e,Or(n,e.current)),void(nu=null)}catch(s){if(null!==i)throw nu=i,s;return cu=1,Uo(e,Or(n,e.current)),void(nu=null)}32768&t.flags?(Yr||1===r?e=!0:au||0!==(536870912&ru)?e=!1:(ou=e=!0,(2===r||3===r||6===r)&&(null!==(r=Ai.current)&&13===r.tag&&(r.flags|=16384))),Zu(t,e)):Xu(t)}function Xu(e){var t=e;do{if(0!==(32768&t.flags))return void Zu(t,ou);e=t.return;var n=Ql(t.alternate,t,uu);if(null!==n)return void(nu=n);if(null!==(t=t.sibling))return void(nu=t);nu=t=e}while(null!==t);0===cu&&(cu=5)}function Zu(e,t){do{var n=Yl(e.alternate,e);if(null!==n)return n.flags&=32767,void(nu=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(nu=e);nu=e=n}while(null!==e);cu=6,nu=null}function ec(e,t,n,r,i,s,a,l,u,c){var h=N.T,d=B.p;try{B.p=2,N.T=null,function(e,t,n,r,i,s,a,l){do{nc()}while(null!==Tu);if(0!==(6&eu))throw Error(o(327));var u=e.finishedWork;if(r=e.finishedLanes,null===u)return null;if(e.finishedWork=null,e.finishedLanes=0,u===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var c=u.lanes|u.childLanes;if(function(e,t,n,r,i,s){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,u=e.hiddenUpdates;for(n=o&~n;0<n;){var c=31-be(n),h=1<<c;a[c]=0,l[c]=-1;var d=u[c];if(null!==d)for(u[c]=null,c=0;c<d.length;c++){var f=d[c];null!==f&&(f.lane&=-536870913)}n&=~h}0!==r&&De(e,r,0),0!==s&&0===i&&0!==e.tag&&(e.suspendedLanes|=s&~(o&~t))}(e,r,c|=kr,s,a,l),e===tu&&(nu=tu=null,ru=0),0===(10256&u.subtreeFlags)&&0===(10256&u.flags)||Su||(Su=!0,Iu=c,Cu=n,function(e,t){ie(e,t)}(de,(function(){return nc(),null}))),n=0!==(15990&u.flags),0!==(15990&u.subtreeFlags)||n?(n=N.T,N.T=null,s=B.p,B.p=2,a=eu,eu|=4,function(e,t){if(e=e.containerInfo,Gc=Hh,er(e=Zn(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(g){n=null;break e}var a=0,l=-1,u=-1,c=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==s||0!==r&&3!==d.nodeType||(u=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++c===i&&(l=a),f===s&&++h===r&&(u=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qc={focusedElem:e,selectionRange:n},Hh=!1,nl=t;null!==nl;)if(e=(t=nl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,nl=e;else for(;null!==nl;){switch(s=(t=nl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,n=t,i=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var m=Do(n.type,i,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(m,s),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){ic(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))ah(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ah(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,nl=e;break}nl=t.return}m=rl,rl=!1}(e,u),pl(u,e),tr(Qc,e.containerInfo),Hh=!!Gc,Qc=Gc=null,e.current=u,il(e,u.alternate,u),ae(),eu=a,B.p=s,N.T=n):e.current=u,Su?(Su=!1,Tu=e,ku=r):tc(e,c),c=e.pendingLanes,0===c&&(Eu=null),function(e){if(ve&&"function"===typeof ve.onCommitFiberRoot)try{ve.onCommitFiberRoot(ye,e,void 0,128===(128&e.current.flags))}catch(t){}}(u.stateNode),gc(e),null!==t)for(i=e.onRecoverableError,u=0;u<t.length;u++)c=t[u],i(c.value,{componentStack:c.stack});0!==(3&ku)&&nc(),c=e.pendingLanes,0!==(4194218&r)&&0!==(42&c)?e===xu?Au++:(Au=0,xu=e):Au=0,yc(0,!1)}(e,t,n,r,d,i,s,a)}finally{N.T=h,B.p=d}}function tc(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,ji(t)))}function nc(){if(null!==Tu){var e=Tu,t=Iu;Iu=0;var n=Le(ku),r=N.T,i=B.p;try{if(B.p=32>n?32:n,N.T=null,null===Tu)var s=!1;else{n=Cu,Cu=null;var a=Tu,l=ku;if(Tu=null,ku=0,0!==(6&eu))throw Error(o(331));var u=eu;if(eu|=4,Rl(a.current),Sl(a,a.current,l,n),eu=u,yc(0,!1),ve&&"function"===typeof ve.onPostCommitFiberRoot)try{ve.onPostCommitFiberRoot(ye,a)}catch(c){}s=!0}return s}finally{B.p=i,N.T=r,tc(e,t)}}return!1}function rc(e,t,n){t=Or(n,t),null!==(e=Pa(e,t=zo(e.stateNode,t,2),2))&&(Pe(e,2),gc(e))}function ic(e,t,n){if(3===e.tag)rc(e,e,n);else for(;null!==t;){if(3===t.tag){rc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Eu||!Eu.has(r))){e=Or(n,e),null!==(r=Pa(t,n=jo(2),2))&&(Bo(n,r,t,e),Pe(r,2),gc(r));break}}t=t.return}}function sc(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new Zl;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(lu=!0,i.add(n),e=oc.bind(null,e,t,n),t.then(e,e))}function oc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,tu===e&&(ru&n)===n&&(4===cu||3===cu&&(62914560&ru)===ru&&300>le()-wu?0===(2&eu)&&zu(e,0):fu|=n,mu===ru&&(mu=0)),gc(e)}function ac(e,t){0===t&&(t=Ne()),null!==(e=xr(e,t))&&(Pe(e,t),gc(e))}function lc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),ac(e,n)}function uc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==r&&r.delete(t),ac(e,n)}var cc=null,hc=null,dc=!1,fc=!1,pc=!1,mc=0;function gc(e){var t;e!==hc&&null===e.next&&(null===hc?cc=hc=e:hc=hc.next=e),fc=!0,dc||(dc=!0,t=vc,ih((function(){0!==(6&eu)?ie(ce,t):t()})))}function yc(e,t){if(!pc&&fc){pc=!0;do{for(var n=!1,r=cc;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var s=0;else{var o=r.suspendedLanes,a=r.pingedLanes;s=(1<<31-be(42|e)+1)-1,s=201326677&(s&=i&~(o&~a))?201326677&s|1:s?2|s:0}0!==s&&(n=!0,_c(r,s))}else s=ru,0===(3&(s=Ie(r,r===tu?s:0)))||Ce(r,s)||(n=!0,_c(r,s));r=r.next}}while(n);pc=!1}}function vc(){fc=dc=!1;var e=0;0!==mc&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==eh&&(eh=e,!0);return eh=null,!1}()&&(e=mc),mc=0);for(var t=le(),n=null,r=cc;null!==r;){var i=r.next,s=wc(r,t);0===s?(r.next=null,null===n?cc=i:n.next=i,null===i&&(hc=n)):(n=r,(0!==e||0!==(3&s))&&(fc=!0)),r=i}yc(e,!1)}function wc(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var o=31-be(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=Ae(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}if(n=ru,n=Ie(e,e===(t=tu)?n:0),r=e.callbackNode,0===n||e===t&&2===iu||null!==e.cancelPendingCommit)return null!==r&&null!==r&&se(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Ce(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&se(r),Le(n)){case 2:case 8:n=he;break;case 32:default:n=de;break;case 268435456:n=pe}return r=bc.bind(null,e),n=ie(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&se(r),e.callbackPriority=2,e.callbackNode=null,2}function bc(e,t){var n=e.callbackNode;if(nc()&&e.callbackNode!==n)return null;var r=ru;return 0===(r=Ie(e,e===tu?r:0))?null:(Du(e,r,t),wc(e,le()),null!=e.callbackNode&&e.callbackNode===n?bc.bind(null,e):null)}function _c(e,t){if(nc())return null;Du(e,t,!0)}function Ec(){return 0===mc&&(mc=xe()),mc}function Sc(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:xt(""+e)}function Tc(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var kc=0;kc<_r.length;kc++){var Ic=_r[kc];Er(Ic.toLowerCase(),"on"+(Ic[0].toUpperCase()+Ic.slice(1)))}Er(fr,"onAnimationEnd"),Er(pr,"onAnimationIteration"),Er(mr,"onAnimationStart"),Er("dblclick","onDoubleClick"),Er("focusin","onFocus"),Er("focusout","onBlur"),Er(gr,"onTransitionRun"),Er(yr,"onTransitionStart"),Er(vr,"onTransitionCancel"),Er(wr,"onTransitionEnd"),tt("onMouseEnter",["mouseout","mouseover"]),tt("onMouseLeave",["mouseout","mouseover"]),tt("onPointerEnter",["pointerout","pointerover"]),tt("onPointerLeave",["pointerout","pointerover"]),et("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),et("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),et("onBeforeInput",["compositionend","keypress","textInput","paste"]),et("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),et("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),et("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ac=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cc));function xc(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;s=a,i.currentTarget=u;try{s(i)}catch(c){Oo(c)}i.currentTarget=null,s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;s=a,i.currentTarget=u;try{s(i)}catch(c){Oo(c)}i.currentTarget=null,s=l}}}}function Nc(e,t){var n=t[je];void 0===n&&(n=t[je]=new Set);var r=e+"__bubble";n.has(r)||(Oc(t,e,2,!1),n.add(r))}function Rc(e,t,n){var r=0;t&&(r|=4),Oc(n,e,r,t)}var Pc="_reactListening"+Math.random().toString(36).slice(2);function Dc(e){if(!e[Pc]){e[Pc]=!0,Xe.forEach((function(t){"selectionchange"!==t&&(Ac.has(t)||Rc(t,!1,e),Rc(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Pc]||(t[Pc]=!0,Rc("selectionchange",!1,t))}}function Oc(e,t,n,r){switch(Xh(t)){case 2:var i=Wh;break;case 8:i=Kh;break;default:i=Gh}n=i.bind(null,t,n,e),i=void 0,!Ut||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Lc(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=Ke(a)))return;if(5===(l=o.tag)||6===l||26===l||27===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Mt((function(){var r=s,i=Rt(n),o=[];e:{var a=br.get(e);if(void 0!==a){var l=Xt,u=e;switch(e){case"keypress":if(0===$t(n))break e;case"keydown":case"keyup":l=pn;break;case"focusin":u="focus",l=sn;break;case"focusout":u="blur",l=sn;break;case"beforeblur":case"afterblur":l=sn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=nn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=rn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=gn;break;case fr:case pr:case mr:l=on;break;case wr:l=yn;break;case"scroll":case"scrollend":l=en;break;case"wheel":l=vn;break;case"copy":case"cut":case"paste":l=an;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=mn;break;case"toggle":case"beforetoggle":l=wn}var c=0!==(4&t),h=!c&&("scroll"===e||"scrollend"===e),d=c?null!==a?a+"Capture":null:a;c=[];for(var f,p=r;null!==p;){var m=p;if(f=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===f||null===d||null!=(m=Ft(p,d))&&c.push(Mc(p,m,f)),h)break;p=p.return}0<c.length&&(a=new l(a,u,null,n,i),o.push({event:a,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===Nt||!(u=n.relatedTarget||n.fromElement)||!Ke(u)&&!u[ze])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?Ke(u):null)&&(h=F(u),c=u.tag,u!==h||5!==c&&27!==c&&6!==c)&&(u=null)):(l=null,u=r),l!==u)){if(c=nn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=mn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:Qe(l),f=null==u?a:Qe(u),(a=new c(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,Ke(i)===r&&((c=new c(d,p+"enter",u,n,i)).target=f,c.relatedTarget=h,m=c),h=m,l&&u)e:{for(d=u,p=0,f=c=l;f;f=Uc(f))p++;for(f=0,m=d;m;m=Uc(m))f++;for(;0<p-f;)c=Uc(c),p--;for(;0<f-p;)d=Uc(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Uc(c),d=Uc(d)}c=null}else c=null;null!==l&&Vc(o,a,l,c,!1),null!==u&&null!==h&&Vc(o,h,u,c,!0)}if("select"===(l=(a=r?Qe(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Fn;else if(Rn(a))if(Un)g=Kn;else{g=Hn;var y=$n}else!(l=a.nodeName)||"input"!==l.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?r&&It(r.elementType)&&(g=Fn):g=Wn;switch(g&&(g=g(e,r))?Pn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&r&&"number"===a.type&&null!=r.memoizedProps.value&&vt(a,"number",a.value)),y=r?Qe(r):window,e){case"focusin":(Rn(y)||"true"===y.contentEditable)&&(rr=y,ir=r,sr=null);break;case"focusout":sr=ir=rr=null;break;case"mousedown":or=!0;break;case"contextmenu":case"mouseup":case"dragend":or=!1,ar(o,n,i);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":ar(o,n,i)}var v;if(_n)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else xn?Cn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Tn&&"ko"!==n.locale&&(xn||"onCompositionStart"!==w?"onCompositionEnd"===w&&xn&&(v=qt()):(jt="value"in(zt=i)?zt.value:zt.textContent,xn=!0)),0<(y=Fc(r,w)).length&&(w=new ln(w,e,null,n,i),o.push({event:w,listeners:y}),v?w.data=v:null!==(v=An(n))&&(w.data=v))),(v=Sn?function(e,t){switch(e){case"compositionend":return An(t);case"keypress":return 32!==t.which?null:(In=!0,kn);case"textInput":return(e=t.data)===kn&&In?null:e;default:return null}}(e,n):function(e,t){if(xn)return"compositionend"===e||!_n&&Cn(e,t)?(e=qt(),Bt=jt=zt=null,xn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=Fc(r,"onBeforeInput")).length&&(y=new ln("onBeforeInput","beforeinput",null,n,i),o.push({event:y,listeners:w}),y.data=v)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var s=Sc((i[Ve]||null).action),o=r.submitter;o&&null!==(t=(t=o[Ve]||null)?Sc(t.formAction):o.getAttribute("formAction"))&&(s=t,o=null);var a=new Xt("action","action",null,r,i);e.push({event:a,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==mc){var e=o?Tc(i,o):new FormData(i);co(n,{pending:!0,data:e,method:i.method,action:s},null,e)}}else"function"===typeof s&&(a.preventDefault(),e=o?Tc(i,o):new FormData(i),co(n,{pending:!0,data:e,method:i.method,action:s},s,e))},currentTarget:i}]})}}(o,e,r,n,i)}xc(o,t)}))}function Mc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fc(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5!==(i=i.tag)&&26!==i&&27!==i||null===s||(null!=(i=Ft(e,n))&&r.unshift(Mc(e,i,s)),null!=(i=Ft(e,t))&&r.push(Mc(e,i,s))),e=e.return}return r}function Uc(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Vc(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(a=a.tag,null!==l&&l===r)break;5!==a&&26!==a&&27!==a||null===u||(l=u,i?null!=(u=Ft(n,s))&&o.unshift(Mc(n,u,l)):i||null!=(u=Ft(n,s))&&o.push(Mc(n,u,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var zc=/\r\n?/g,jc=/\u0000|\uFFFD/g;function Bc(e){return("string"===typeof e?e:""+e).replace(zc,"\n").replace(jc,"")}function qc(e,t){return t=Bc(t),Bc(e)===t}function $c(){}function Hc(e,t,n,r,i,s){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||Et(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&Et(e,""+r);break;case"className":at(e,"class",r);break;case"tabIndex":at(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":at(e,n,r);break;case"style":kt(e,r,s);break;case"data":if("object"!==t){at(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=xt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===n?("input"!==t&&Hc(e,t,"name",i.name,i,null),Hc(e,t,"formEncType",i.formEncType,i,null),Hc(e,t,"formMethod",i.formMethod,i,null),Hc(e,t,"formTarget",i.formTarget,i,null)):(Hc(e,t,"encType",i.encType,i,null),Hc(e,t,"method",i.method,i,null),Hc(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=xt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=$c);break;case"onScroll":null!=r&&Nc("scroll",e);break;case"onScrollEnd":null!=r&&Nc("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=xt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Nc("beforetoggle",e),Nc("toggle",e),ot(e,"popover",r);break;case"xlinkActuate":lt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":lt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":lt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":lt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":lt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":lt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":lt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":lt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":lt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":ot(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&ot(e,n=Ct.get(n)||n,r)}}function Wc(e,t,n,r,i,s){switch(n){case"style":kt(e,r,s);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"children":"string"===typeof r?Et(e,r):("number"===typeof r||"bigint"===typeof r)&&Et(e,""+r);break;case"onScroll":null!=r&&Nc("scroll",e);break;case"onScrollEnd":null!=r&&Nc("scrollend",e);break;case"onClick":null!=r&&(e.onclick=$c);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ze.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(s=null!=(s=e[Ve]||null)?s[n]:null)&&e.removeEventListener(t,s,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):ot(e,n,r):("function"!==typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function Kc(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nc("error",e),Nc("load",e);var r,i=!1,s=!1;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(null!=a)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Hc(e,t,r,a,n,null)}}return s&&Hc(e,t,"srcSet",n.srcSet,n,null),void(i&&Hc(e,t,"src",n.src,n,null));case"input":Nc("invalid",e);var l=r=a=s=null,u=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var h=n[i];if(null!=h)switch(i){case"name":s=h;break;case"type":a=h;break;case"checked":u=h;break;case"defaultChecked":c=h;break;case"value":r=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(o(137,t));break;default:Hc(e,t,i,h,n,null)}}return yt(e,r,l,u,c,a,s,!1),void ht(e);case"select":for(s in Nc("invalid",e),i=a=r=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:Hc(e,t,s,l,n,null)}return t=r,n=a,e.multiple=!!i,void(null!=t?wt(e,!!i,t,!1):null!=n&&wt(e,!!i,n,!0));case"textarea":for(a in Nc("invalid",e),r=s=i=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:Hc(e,t,a,l,n,null)}return _t(e,i,s,r),void ht(e);case"option":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))if("selected"===u)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else Hc(e,t,u,i,n,null);return;case"dialog":Nc("cancel",e),Nc("close",e);break;case"iframe":case"object":Nc("load",e);break;case"video":case"audio":for(i=0;i<Cc.length;i++)Nc(Cc[i],e);break;case"image":Nc("error",e),Nc("load",e);break;case"details":Nc("toggle",e);break;case"embed":case"source":case"link":Nc("error",e),Nc("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Hc(e,t,c,i,n,null)}return;default:if(It(t)){for(h in n)n.hasOwnProperty(h)&&(void 0!==(i=n[h])&&Wc(e,t,h,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&Hc(e,t,l,i,n,null))}var Gc=null,Qc=null;function Yc(e){return 9===e.nodeType?e:e.ownerDocument}function Jc(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Xc(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function Zc(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var eh=null;var th="function"===typeof setTimeout?setTimeout:void 0,nh="function"===typeof clearTimeout?clearTimeout:void 0,rh="function"===typeof Promise?Promise:void 0,ih="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof rh?function(e){return rh.resolve(null).then(e).catch(sh)}:th;function sh(e){setTimeout((function(){throw e}))}function oh(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void gd(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);gd(t)}function ah(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":ah(n),We(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function lh(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}function uh(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function ch(e,t,n){switch(t=Yc(n),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}var hh=new Map,dh=new Set;function fh(e){return"function"===typeof e.getRootNode?e.getRootNode():e.ownerDocument}var ph=B.d;B.d={f:function(){var e=ph.f(),t=Uu();return e||t},r:function(e){var t=Ge(e);null!==t&&5===t.tag&&"form"===t.type?fo(t):ph.r(e)},D:function(e){ph.D(e),gh("dns-prefetch",e,null)},C:function(e,t){ph.C(e,t),gh("preconnect",e,t)},L:function(e,t,n){ph.L(e,t,n);var r=mh;if(r&&e&&t){var i='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+mt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+mt(n.imageSizes)+'"]')):i+='[href="'+mt(e)+'"]';var s=i;switch(t){case"style":s=vh(e);break;case"script":s=_h(e)}hh.has(s)||(e=R({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),hh.set(s,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(wh(s))||"script"===t&&r.querySelector(Eh(s))||(Kc(t=r.createElement("link"),"link",e),Je(t),r.head.appendChild(t)))}},m:function(e,t){ph.m(e,t);var n=mh;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+mt(r)+'"][href="'+mt(e)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=_h(e)}if(!hh.has(s)&&(e=R({rel:"modulepreload",href:e},t),hh.set(s,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Eh(s)))return}Kc(r=n.createElement("link"),"link",e),Je(r),n.head.appendChild(r)}}},X:function(e,t){ph.X(e,t);var n=mh;if(n&&e){var r=Ye(n).hoistableScripts,i=_h(e),s=r.get(i);s||((s=n.querySelector(Eh(i)))||(e=R({src:e,async:!0},t),(t=hh.get(i))&&Ih(e,t),Je(s=n.createElement("script")),Kc(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}},S:function(e,t,n){ph.S(e,t,n);var r=mh;if(r&&e){var i=Ye(r).hoistableStyles,s=vh(e);t=t||"default";var o=i.get(s);if(!o){var a={loading:0,preload:null};if(o=r.querySelector(wh(s)))a.loading=5;else{e=R({rel:"stylesheet",href:e,"data-precedence":t},n),(n=hh.get(s))&&kh(e,n);var l=o=r.createElement("link");Je(l),Kc(l,"link",e),l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),l.addEventListener("load",(function(){a.loading|=1})),l.addEventListener("error",(function(){a.loading|=2})),a.loading|=4,Th(o,t,r)}o={type:"stylesheet",instance:o,count:1,state:a},i.set(s,o)}}},M:function(e,t){ph.M(e,t);var n=mh;if(n&&e){var r=Ye(n).hoistableScripts,i=_h(e),s=r.get(i);s||((s=n.querySelector(Eh(i)))||(e=R({src:e,async:!0,type:"module"},t),(t=hh.get(i))&&Ih(e,t),Je(s=n.createElement("script")),Kc(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}};var mh="undefined"===typeof document?null:document;function gh(e,t,n){var r=mh;if(r&&"string"===typeof t&&t){var i=mt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),dh.has(i)||(dh.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(Kc(t=r.createElement("link"),"link",e),Je(t),r.head.appendChild(t)))}}function yh(e,t,n,r){var i,s,a,l,u=(u=J.current)?fh(u):null;if(!u)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=vh(n.href),(r=(n=Ye(u).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=vh(n.href);var c=Ye(u).hoistableStyles,h=c.get(e);if(h||(u=u.ownerDocument||u,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,h),(c=u.querySelector(wh(e)))&&!c._p&&(h.instance=c,h.state.loading=5),hh.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},hh.set(e,n),c||(i=u,s=e,a=n,l=h.state,i.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=i.createElement("link"),l.preload=s,s.addEventListener("load",(function(){return l.loading|=1})),s.addEventListener("error",(function(){return l.loading|=2})),Kc(s,"link",a),Je(s),i.head.appendChild(s))))),t&&null===r)throw Error(o(528,""));return h}if(t&&null!==r)throw Error(o(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=_h(n),(r=(n=Ye(u).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function vh(e){return'href="'+mt(e)+'"'}function wh(e){return'link[rel="stylesheet"]['+e+"]"}function bh(e){return R({},e,{"data-precedence":e.precedence,precedence:null})}function _h(e){return'[src="'+mt(e)+'"]'}function Eh(e){return"script[async]"+e}function Sh(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+mt(n.href)+'"]');if(r)return t.instance=r,Je(r),r;var i=R({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Je(r=(e.ownerDocument||e).createElement("style")),Kc(r,"style",i),Th(r,n.precedence,e),t.instance=r;case"stylesheet":i=vh(n.href);var s=e.querySelector(wh(i));if(s)return t.state.loading|=4,t.instance=s,Je(s),s;r=bh(n),(i=hh.get(i))&&kh(r,i),Je(s=(e.ownerDocument||e).createElement("link"));var a=s;return a._p=new Promise((function(e,t){a.onload=e,a.onerror=t})),Kc(s,"link",r),t.state.loading|=4,Th(s,n.precedence,e),t.instance=s;case"script":return s=_h(n.src),(i=e.querySelector(Eh(s)))?(t.instance=i,Je(i),i):(r=n,(i=hh.get(s))&&Ih(r=R({},n),i),Je(i=(e=e.ownerDocument||e).createElement("script")),Kc(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Th(r,n.precedence,e));return t.instance}function Th(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,o=0;o<r.length;o++){var a=r[o];if(a.dataset.precedence===t)s=a;else if(s!==i)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function kh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Ih(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Ch=null;function Ah(e,t,n){if(null===Ch){var r=new Map,i=Ch=new Map;i.set(n,r)}else(r=(i=Ch).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var s=n[i];if(!(s[He]||s[Ue]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var o=s.getAttribute(t)||"";o=e+o;var a=r.get(o);a?a.push(s):r.set(o,[s])}}return r}function xh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Nh(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Rh=null;function Ph(){}function Dh(){if(this.count--,0===this.count)if(this.stylesheets)Lh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Oh=null;function Lh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Oh=new Map,t.forEach(Mh,e),Oh=null,Dh.call(e))}function Mh(e,t){if(!(4&t.state.loading)){var n=Oh.get(e);if(n)var r=n.get(null);else{n=new Map,Oh.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var o=i[s];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}o=(i=t.instance).getAttribute("data-precedence"),(s=n.get(o)||r)===r&&n.set(null,i),n.set(o,i),this.count++,r=Dh.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Fh={$$typeof:g,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function Uh(e,t,n,r,i,s,o,a){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Re(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Re(0),this.hiddenUpdates=Re(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function Vh(e,t,n,r,i,s,o,a,l,u,c,h){return e=new Uh(e,t,n,o,a,l,u,h),t=1,!0===s&&(t|=24),s=Ll(3,null,null,t),e.current=s,s.stateNode=e,(t=zi()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},xa(s),e}function zh(e){return e?e=Pr:Pr}function jh(e,t,n,r,i,s){i=zh(i),null===r.context?r.context=i:r.pendingContext=i,(r=Ra(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=Pa(e,r,t))&&(Pu(n,0,t),Da(n,e,t))}function Bh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qh(e,t){Bh(e,t),(e=e.alternate)&&Bh(e,t)}function $h(e){if(13===e.tag){var t=xr(e,67108864);null!==t&&Pu(t,0,67108864),qh(e,67108864)}}var Hh=!0;function Wh(e,t,n,r){var i=N.T;N.T=null;var s=B.p;try{B.p=2,Gh(e,t,n,r)}finally{B.p=s,N.T=i}}function Kh(e,t,n,r){var i=N.T;N.T=null;var s=B.p;try{B.p=8,Gh(e,t,n,r)}finally{B.p=s,N.T=i}}function Gh(e,t,n,r){if(Hh){var i=Qh(r);if(null===i)Lc(e,t,r,Yh,n),ad(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return ed=ld(ed,e,t,n,r,i),!0;case"dragenter":return td=ld(td,e,t,n,r,i),!0;case"mouseover":return nd=ld(nd,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return rd.set(s,ld(rd.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,id.set(s,ld(id.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(ad(e,r),4&t&&-1<od.indexOf(e)){for(;null!==i;){var s=Ge(i);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var o=ke(s.pendingLanes);if(0!==o){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-be(o);a.entanglements[1]|=l,o&=~l}gc(s),0===(6&eu)&&(bu=le()+500,yc(0,!1))}}break;case 13:null!==(a=xr(s,2))&&Pu(a,0,2),Uu(),qh(s,2)}if(null===(s=Qh(r))&&Lc(e,t,r,Yh,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Lc(e,t,r,null,n)}}function Qh(e){return Jh(e=Rt(e))}var Yh=null;function Jh(e){if(Yh=null,null!==(e=Ke(e))){var t=F(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=U(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Yh=e,null}function Xh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ue()){case ce:return 2;case he:return 8;case de:case fe:return 32;case pe:return 268435456;default:return 32}default:return 32}}var Zh=!1,ed=null,td=null,nd=null,rd=new Map,id=new Map,sd=[],od="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ad(e,t){switch(e){case"focusin":case"focusout":ed=null;break;case"dragenter":case"dragleave":td=null;break;case"mouseover":case"mouseout":nd=null;break;case"pointerover":case"pointerout":rd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":id.delete(t.pointerId)}}function ld(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=Ge(t))&&$h(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function ud(e){var t=Ke(e.target);if(null!==t){var n=F(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=U(n)))return e.blockedOn=t,void function(e,t){var n=B.p;try{return B.p=e,t()}finally{B.p=n}}(e.priority,(function(){if(13===n.tag){var e=Nu(),t=xr(n,e);null!==t&&Pu(t,0,e),qh(n,e)}}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function cd(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qh(e.nativeEvent);if(null!==n)return null!==(t=Ge(n))&&$h(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Nt=r,n.target.dispatchEvent(r),Nt=null,t.shift()}return!0}function hd(e,t,n){cd(e)&&n.delete(t)}function dd(){Zh=!1,null!==ed&&cd(ed)&&(ed=null),null!==td&&cd(td)&&(td=null),null!==nd&&cd(nd)&&(nd=null),rd.forEach(hd),id.forEach(hd)}function fd(e,t){e.blockedOn===t&&(e.blockedOn=null,Zh||(Zh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,dd)))}var pd=null;function md(e){pd!==e&&(pd=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,(function(){pd===e&&(pd=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===Jh(r||n))continue;break}var s=Ge(n);null!==s&&(e.splice(t,3),t-=3,co(s,{pending:!0,data:i,method:n.method,action:r},r,i))}})))}function gd(e){function t(t){return fd(t,e)}null!==ed&&fd(ed,e),null!==td&&fd(td,e),null!==nd&&fd(nd,e),rd.forEach(t),id.forEach(t);for(var n=0;n<sd.length;n++){var r=sd[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<sd.length&&null===(n=sd[0]).blockedOn;)ud(n),null===n.blockedOn&&sd.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],o=i[Ve]||null;if("function"===typeof s)o||md(n);else if(o){var a=null;if(s&&s.hasAttribute("formAction")){if(i=s,o=s[Ve]||null)a=o.formAction;else if(null!==Jh(i))continue}else a=o.action;"function"===typeof a?n[r+1]=a:(n.splice(r,3),r-=3),md(n)}}}function yd(e){this._internalRoot=e}function vd(e){this._internalRoot=e}vd.prototype.render=yd.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));jh(t.current,Nu(),e,t,null,null)},vd.prototype.unmount=yd.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;0===e.tag&&nc(),jh(e.current,2,null,e,null,null),Uu(),t[ze]=null}},vd.prototype.unstable_scheduleHydration=function(e){if(e){var t=Me();e={blockedOn:null,target:e,priority:t};for(var n=0;n<sd.length&&0!==t&&t<sd[n].priority;n++);sd.splice(n,0,e),0===n&&ud(e)}};var wd=i.version;if("19.0.0"!==wd)throw Error(o(527,wd,"19.0.0"));B.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=F(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return V(i),e;if(s===r)return V(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?z(e):null)?null:e.stateNode};var bd={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:N,findFiberByHostInstance:Ke,reconcilerVersion:"19.0.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var _d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_d.isDisabled&&_d.supportsFiber)try{ye=_d.inject(bd),ve=_d}catch(Sd){}}t.createRoot=function(e,t){if(!a(e))throw Error(o(299));var n=!1,r="",i=Lo,s=Mo,l=Fo;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Vh(e,1,!1,null,0,n,r,i,s,l,0,null),e[ze]=t.current,Dc(8===e.nodeType?e.parentNode:e),new yd(t)}},43:(e,t,n)=>{e.exports=n(288)},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=w.prototype=new v;b.constructor=w,m(b,y.prototype),b.isPureReactComponent=!0;var _=Array.isArray,E={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function T(e,t,r,i,s,o){return r=o.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:o}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(){}function x(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,u,c=!1;if(null===e)c=!0;else switch(a){case"bigint":case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0;break;case d:return x((c=e._init)(e._payload),t,i,s,o)}}if(c)return o=o(e),c=""===s?"."+C(e,0):s,_(o)?(i="",null!=c&&(i=c.replace(I,"$&/")+"/"),x(o,t,i,"",(function(e){return e}))):null!=o&&(k(o)&&(l=o,u=i+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+c,o=T(l.type,u,void 0,0,0,l.props)),t.push(o)),1;c=0;var h,p=""===s?".":s+":";if(_(e))for(var m=0;m<e.length;m++)c+=x(s=e[m],t,i,a=p+C(s,m),o);else if("function"===typeof(m=null===(h=e)||"object"!==typeof h?null:"function"===typeof(h=f&&h[f]||h["@@iterator"])?h:null))for(e=m.call(e),m=0;!(s=e.next()).done;)c+=x(s=s.value,t,i,a=p+C(s,m++),o);else if("object"===a){if("function"===typeof e.then)return x(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(A,A):(e.status="pending",e.then((function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)}),(function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)}))),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,s,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return c}function N(e,t,n){if(null==e)return e;var r=[],i=0;return x(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function D(){}t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=c,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,t.act=function(){throw Error("act(...) is not supported in production builds of React.")},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=m({},e.props),i=e.key;if(null!=t)for(s in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!S.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(r[s]=t[s]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var o=Array(s),a=0;a<s;a++)o[a]=arguments[a+2];r.children=o}return T(e.type,i,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,n){var r,i={},s=null;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)S.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var o=arguments.length-2;if(1===o)i.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];i.children=a}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===i[r]&&(i[r]=o[r]);return T(e,s,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=E.T,n={};E.T=n;try{var r=e(),i=E.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(D,P)}catch(s){P(s)}finally{E.T=t}},t.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},t.use=function(e){return E.H.use(e)},t.useActionState=function(e,t,n){return E.H.useActionState(e,t,n)},t.useCallback=function(e,t){return E.H.useCallback(e,t)},t.useContext=function(e){return E.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return E.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return E.H.useEffect(e,t)},t.useId=function(){return E.H.useId()},t.useImperativeHandle=function(e,t,n){return E.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return E.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return E.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return E.H.useMemo(e,t)},t.useOptimistic=function(e,t){return E.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return E.H.useReducer(e,t,n)},t.useRef=function(e){return E.H.useRef(e)},t.useState=function(e){return E.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return E.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return E.H.useTransition()},t.version="19.0.0"},358:(e,t)=>{const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,r=/^[\u0021-\u003A\u003C-\u007E]*$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,a=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function l(e,t,n){do{const n=e.charCodeAt(t);if(32!==n&&9!==n)return t}while(++t<n);return n}function u(e,t,n){for(;t>n;){const n=e.charCodeAt(--t);if(32!==n&&9!==n)return t+1}return n}function c(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{e.exports=n(799)},672:(e,t,n)=>{var r=n(43);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var o={d:{f:s,r:function(){throw Error(i(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=n,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=u(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:s}):"script"===n&&o.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=u(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=u(n,t.crossOrigin);o.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=u(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.0.0"},799:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var s in r={},t)"key"!==s&&(r[s]=t[s]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},853:(e,t,n)=>{e.exports=n(896)},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],u=a+1,c=e[u];if(0>s(l,n))u<i&&0>s(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[a]=n,r=a);else{if(!(u<i&&0>s(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function _(e){if(g=!1,b(e),!m)if(null!==r(u))m=!0,R();else{var t=r(c);null!==t&&P(_,t.startTime-e)}}var E,S=!1,T=-1,k=5,I=-1;function C(){return!(t.unstable_now()-I<k)}function A(){if(S){var e=t.unstable_now();I=e;var n=!0;try{e:{m=!1,g&&(g=!1,v(T),T=-1),p=!0;var s=f;try{t:{for(b(e),d=r(u);null!==d&&!(d.expirationTime>e&&C());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){d.callback=a,b(e),n=!0;break t}d===r(u)&&i(u),b(e)}else i(u);d=r(u)}if(null!==d)n=!0;else{var l=r(c);null!==l&&P(_,l.startTime-e),n=!1}}break e}finally{d=null,f=s,p=!1}n=void 0}}finally{n?E():S=!1}}}if("function"===typeof w)E=function(){w(A)};else if("undefined"!==typeof MessageChannel){var x=new MessageChannel,N=x.port2;x.port1.onmessage=A,E=function(){N.postMessage(null)}}else E=function(){y(A,0)};function R(){S||(S=!0,E())}function P(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,R())},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(c,e),null===r(u)&&e===r(c)&&(g?(v(T),T=-1):g=!0,P(_,s-o))):(e.sortIndex=a,n(u,e),m||p||(m=!0,R())),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};n.r(r),n.d(r,{FirebaseError:()=>Ct,SDK_VERSION:()=>ar,_DEFAULT_ENTRY_NAME:()=>$n,_addComponent:()=>Qn,_addOrOverwriteComponent:()=>Yn,_apps:()=>Wn,_clearComponents:()=>nr,_components:()=>Gn,_getProvider:()=>Xn,_isFirebaseApp:()=>er,_isFirebaseServerApp:()=>tr,_registerComponent:()=>Jn,_removeServiceInstance:()=>Zn,_serverApps:()=>Kn,deleteApp:()=>dr,getApp:()=>cr,getApps:()=>hr,initializeApp:()=>lr,initializeServerApp:()=>ur,onLog:()=>pr,registerVersion:()=>fr,setLogLevel:()=>mr});var i=n(391),s=n(43),o=(n(358),"popstate");function a(){return p((function(e,t){let{pathname:n="/",search:r="",hash:i=""}=f(e.location.hash.substring(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),h("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:d(t))}),(function(e,t){u("/"===e.pathname.charAt(0),`relative pathnames are not supported in hash history.push(${JSON.stringify(t)})`)}),arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function l(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function c(e,t){return{usr:e.state,key:e.key,idx:t}}function h(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return{pathname:"string"===typeof e?e:e.pathname,search:"",hash:"",..."string"===typeof t?f(t):t,state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)}}function d(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function f(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function p(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,u="POP",f=null,p=m();function m(){return(a.state||{idx:null}).idx}function g(){u="POP";let e=m(),t=null==e?null:e-p;p=e,f&&f({action:u,location:v.location,delta:t})}function y(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:d(e);return n=n.replace(/ $/,"%20"),l(t,`No window.location.(origin|href) available to create URL for href: ${n}`),new URL(n,t)}null==p&&(p=0,a.replaceState({...a.state,idx:p},""));let v={get action(){return u},get location(){return e(i,a)},listen(e){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(o,g),f=e,()=>{i.removeEventListener(o,g),f=null}},createHref:e=>t(i,e),createURL:y,encodeLocation(e){let t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){u="PUSH";let r=h(v.location,e,t);n&&n(r,e),p=m()+1;let o=c(r,p),l=v.createHref(r);try{a.pushState(o,"",l)}catch(d){if(d instanceof DOMException&&"DataCloneError"===d.name)throw d;i.location.assign(l)}s&&f&&f({action:u,location:v.location,delta:1})},replace:function(e,t){u="REPLACE";let r=h(v.location,e,t);n&&n(r,e),p=m();let i=c(r,p),o=v.createHref(r);a.replaceState(i,"",o),s&&f&&f({action:u,location:v.location,delta:0})},go:e=>a.go(e)};return v}new WeakMap;function m(e,t){return g(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function g(e,t,n,r){let i=N(("string"===typeof t?f(t):t).pathname||"/",n);if(null==i)return null;let s=y(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let o=null;for(let a=0;null==o&&a<s.length;++a){let e=x(i);o=C(s[a],e,r)}return o}function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(l(o.relativePath.startsWith(r),`Absolute route path "${o.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),o.relativePath=o.relativePath.slice(r.length));let a=L([r,o.relativePath]),u=n.concat(o);e.children&&e.children.length>0&&(l(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${a}".`),y(e.children,t,u,a)),(null!=e.path||e.index)&&t.push({path:a,score:I(a,e.index),routesMeta:u})};return e.forEach(((e,t)=>{if(""!==e.path&&e.path?.includes("?"))for(let n of v(e.path))i(e,t,n);else i(e,t)})),t}function v(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=v(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}var w=/^:[\w-]+$/,b=3,_=2,E=1,S=10,T=-2,k=e=>"*"===e;function I(e,t){let n=e.split("/"),r=n.length;return n.some(k)&&(r+=T),t&&(r+=_),n.filter((e=>!k(e))).reduce(((e,t)=>e+(w.test(t)?b:""===t?E:S)),r)}function C(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,u="/"===s?t:t.slice(s.length)||"/",c=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},u),h=e.route;if(!c&&l&&n&&!r[r.length-1].route.index&&(c=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},u)),!c)return null;Object.assign(i,c.params),o.push({params:i,pathname:L([s,c.pathname]),pathnameBase:M(L([s,c.pathnameBase])),route:h}),"/"!==c.pathnameBase&&(s=L([s,c.pathnameBase]))}return o}function A(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];u("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function x(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return u(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function N(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function R(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function P(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function D(e){let t=P(e);return t.map(((e,n)=>n===t.length-1?e.pathname:e.pathnameBase))}function O(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=f(e):(r={...e},l(!r.pathname||!r.pathname.includes("?"),R("?","pathname","search",r)),l(!r.pathname||!r.pathname.includes("#"),R("#","pathname","hash",r)),l(!r.search||!r.search.includes("#"),R("#","search","hash",r)));let s,o=""===e||""===r.pathname,a=o?"/":r.pathname;if(null==a)s=n;else{let e=t.length-1;if(!i&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}s=e>=0?t[e]:"/"}let u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:r="",hash:i=""}="string"===typeof e?f(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:F(r),hash:U(i)}}(r,s),c=a&&"/"!==a&&a.endsWith("/"),h=(o||"."===a)&&n.endsWith("/");return u.pathname.endsWith("/")||!c&&!h||(u.pathname+="/"),u}var L=e=>e.join("/").replace(/\/\/+/g,"/"),M=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),F=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",U=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function V(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var z=["POST","PUT","PATCH","DELETE"],j=(new Set(z),["GET",...z]);new Set(j),Symbol("ResetLoaderData");var B=s.createContext(null);B.displayName="DataRouter";var q=s.createContext(null);q.displayName="DataRouterState";var $=s.createContext({isTransitioning:!1});$.displayName="ViewTransition";var H=s.createContext(new Map);H.displayName="Fetchers";var W=s.createContext(null);W.displayName="Await";var K=s.createContext(null);K.displayName="Navigation";var G=s.createContext(null);G.displayName="Location";var Q=s.createContext({outlet:null,matches:[],isDataRoute:!1});Q.displayName="Route";var Y=s.createContext(null);Y.displayName="RouteError";function J(){return null!=s.useContext(G)}function X(){return l(J(),"useLocation() may be used only in the context of a <Router> component."),s.useContext(G).location}var Z="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ee(e){s.useContext(K).static||s.useLayoutEffect(e)}function te(){let{isDataRoute:e}=s.useContext(Q);return e?function(){let{router:e}=ce("useNavigate"),t=de("useNavigate"),n=s.useRef(!1);ee((()=>{n.current=!0}));let r=s.useCallback((async function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u(n.current,Z),n.current&&("number"===typeof r?e.navigate(r):await e.navigate(r,{fromRouteId:t,...i}))}),[e,t]);return r}():function(){l(J(),"useNavigate() may be used only in the context of a <Router> component.");let e=s.useContext(B),{basename:t,navigator:n}=s.useContext(K),{matches:r}=s.useContext(Q),{pathname:i}=X(),o=JSON.stringify(D(r)),a=s.useRef(!1);ee((()=>{a.current=!0}));let c=s.useCallback((function(r){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(u(a.current,Z),!a.current)return;if("number"===typeof r)return void n.go(r);let l=O(r,JSON.parse(o),i,"path"===s.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:L([t,l.pathname])),(s.replace?n.replace:n.push)(l,s.state,s)}),[t,n,o,i,e]);return c}()}s.createContext(null);function ne(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=s.useContext(Q),{pathname:r}=X(),i=JSON.stringify(D(n));return s.useMemo((()=>O(e,JSON.parse(i),r,"path"===t)),[e,i,r,t])}function re(e,t,n,r){l(J(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:o}=s.useContext(K),{matches:a}=s.useContext(Q),c=a[a.length-1],h=c?c.params:{},d=c?c.pathname:"/",p=c?c.pathnameBase:"/",g=c&&c.route;{let e=g&&g.path||"";me(d,!g||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let y,v=X();if(t){let e="string"===typeof t?f(t):t;l("/"===p||e.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${e.pathname}" was given in the \`location\` prop.`),y=e}else y=v;let w=y.pathname||"/",b=w;if("/"!==p){let e=p.replace(/^\//,"").split("/");b="/"+w.replace(/^\//,"").split("/").slice(e.length).join("/")}let _=!o&&n&&n.matches&&n.matches.length>0?n.matches:m(e,{pathname:b});u(g||null!=_,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),u(null==_||void 0!==_[_.length-1].route.element||void 0!==_[_.length-1].route.Component||void 0!==_[_.length-1].route.lazy,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=le(_&&_.map((e=>Object.assign({},e,{params:Object.assign({},h,e.params),pathname:L([p,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?p:L([p,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,n,r);return t&&E?s.createElement(G.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},E):E}function ie(){let e=fe(),t=V(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=s.createElement(s.Fragment,null,s.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),s.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",s.createElement("code",{style:o},"ErrorBoundary")," or"," ",s.createElement("code",{style:o},"errorElement")," prop on your route.")),s.createElement(s.Fragment,null,s.createElement("h2",null,"Unexpected Application Error!"),s.createElement("h3",{style:{fontStyle:"italic"}},t),n?s.createElement("pre",{style:i},n):null,a)}var se=s.createElement(ie,null),oe=class extends s.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?s.createElement(Q.Provider,{value:this.props.routeContext},s.createElement(Y.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ae(e){let{routeContext:t,match:n,children:r}=e,i=s.useContext(B);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),s.createElement(Q.Provider,{value:t},r)}function le(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let r=e,i=n?.errors;if(null!=i){let e=r.findIndex((e=>e.route.id&&void 0!==i?.[e.route.id]));l(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),r=r.slice(0,Math.min(r.length,e+1))}let o=!1,a=-1;if(n)for(let s=0;s<r.length;s++){let e=r[s];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(a=s),e.route.id){let{loaderData:t,errors:i}=n,s=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!i||void 0===i[e.route.id]);if(e.route.lazy||s){o=!0,r=a>=0?r.slice(0,a+1):[r[0]];break}}}return r.reduceRight(((e,l,u)=>{let c,h=!1,d=null,f=null;n&&(c=i&&l.route.id?i[l.route.id]:void 0,d=l.route.errorElement||se,o&&(a<0&&0===u?(me("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,f=null):a===u&&(h=!0,f=l.route.hydrateFallbackElement||null)));let p=t.concat(r.slice(0,u+1)),m=()=>{let t;return t=c?d:h?f:l.route.Component?s.createElement(l.route.Component,null):l.route.element?l.route.element:e,s.createElement(ae,{match:l,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(l.route.ErrorBoundary||l.route.errorElement||0===u)?s.createElement(oe,{location:n.location,revalidation:n.revalidation,component:d,error:c,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()}),null)}function ue(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ce(e){let t=s.useContext(B);return l(t,ue(e)),t}function he(e){let t=s.useContext(q);return l(t,ue(e)),t}function de(e){let t=function(e){let t=s.useContext(Q);return l(t,ue(e)),t}(e),n=t.matches[t.matches.length-1];return l(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function fe(){let e=s.useContext(Y),t=he("useRouteError"),n=de("useRouteError");return void 0!==e?e:t.errors?.[n]}var pe={};function me(e,t,n){t||pe[e]||(pe[e]=!0,u(!1,n))}s.memo((function(e){let{routes:t,future:n,state:r}=e;return re(t,void 0,r,n)}));function ge(e){l(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ye(e){let{basename:t="/",children:n=null,location:r,navigationType:i="POP",navigator:o,static:a=!1}=e;l(!J(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),h=s.useMemo((()=>({basename:c,navigator:o,static:a,future:{}})),[c,o,a]);"string"===typeof r&&(r=f(r));let{pathname:d="/",search:p="",hash:m="",state:g=null,key:y="default"}=r,v=s.useMemo((()=>{let e=N(d,c);return null==e?null:{location:{pathname:e,search:p,hash:m,state:g,key:y},navigationType:i}}),[c,d,p,m,g,y,i]);return u(null!=v,`<Router basename="${c}"> is not able to match the URL "${d}${p}${m}" because it does not start with the basename, so the <Router> won't render anything.`),null==v?null:s.createElement(K.Provider,{value:h},s.createElement(G.Provider,{children:n,value:v}))}function ve(e){let{children:t,location:n}=e;return re(we(t),n)}s.Component;function we(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return s.Children.forEach(e,((e,r)=>{if(!s.isValidElement(e))return;let i=[...t,r];if(e.type===s.Fragment)return void n.push.apply(n,we(e.props.children,i));l(e.type===ge,`[${"string"===typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),l(!e.props.index||!e.props.children,"An index route cannot have child routes.");let o={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=we(e.props.children,i)),n.push(o)})),n}var be="get",_e="application/x-www-form-urlencoded";function Ee(e){return null!=e&&"string"===typeof e.tagName}var Se=null;var Te=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ke(e){return null==e||Te.has(e)?e:(u(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_e}"`),null)}function Ie(e,t){let n,r,i,s,o;if(Ee(a=e)&&"form"===a.tagName.toLowerCase()){let o=e.getAttribute("action");r=o?N(o,t):null,n=e.getAttribute("method")||be,i=ke(e.getAttribute("enctype"))||_e,s=new FormData(e)}else if(function(e){return Ee(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Ee(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let o=e.form;if(null==o)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=e.getAttribute("formaction")||o.getAttribute("action");if(r=a?N(a,t):null,n=e.getAttribute("formmethod")||o.getAttribute("method")||be,i=ke(e.getAttribute("formenctype"))||ke(o.getAttribute("enctype"))||_e,s=new FormData(o,e),!function(){if(null===Se)try{new FormData(document.createElement("form"),0),Se=!1}catch(e){Se=!0}return Se}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?`${t}.`:"";s.append(`${e}x`,"0"),s.append(`${e}y`,"0")}else t&&s.append(t,r)}}else{if(Ee(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=be,r=null,i=_e,o=e}var a;return s&&"text/plain"===i&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}function Ce(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}async function Ae(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise((()=>{}))}}function xe(e){return null!=e&&"string"===typeof e.page}function Ne(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Re(e,t,n,r,i,s){let o=(e,t)=>!n[t]||e.route.id!==n[t].route.id,a=(e,t)=>n[t].pathname!==e.pathname||n[t].route.path?.endsWith("*")&&n[t].params["*"]!==e.params["*"];return"assets"===s?t.filter(((e,t)=>o(e,t)||a(e,t))):"data"===s?t.filter(((t,s)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(o(t,s)||a(t,s))return!0;if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0})):[]}function Pe(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map((e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i})).flat(1),[...new Set(r)];var r}function De(e,t){let n=new Set,r=new Set(t);return e.reduce(((e,i)=>{if(t&&!xe(i)&&"script"===i.as&&i.href&&r.has(i.href))return e;let s=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(i));return n.has(s)||(n.add(s),e.push({key:s,link:i})),e}),[])}function Oe(e){return{__html:e}}Symbol("SingleFetchRedirect");function Le(e,t){let n="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname="_root.data":t&&"/"===N(n.pathname,t)?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}s.Component;function Me(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let r,i=s.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://remix.run/guides/errors for more information."\n        );\n      '}});if(V(t))return s.createElement(Fe,{title:"Unhandled Thrown Response!"},s.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),i);if(t instanceof Error)r=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);r=new Error(e)}return s.createElement(Fe,{title:"Application Error!",isOutsideRemixApp:n},s.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),s.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},r.stack),i)}function Fe(e){let{title:t,renderScripts:n,isOutsideRemixApp:r,children:i}=e,{routeModules:o}=Be();return o.root?.Layout&&!r?i:s.createElement("html",{lang:"en"},s.createElement("head",null,s.createElement("meta",{charSet:"utf-8"}),s.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),s.createElement("title",null,t)),s.createElement("body",null,s.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},i,n?s.createElement(Qe,null):null)))}function Ue(e){return!0===e}function Ve(){let e=s.useContext(B);return Ce(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function ze(){let e=s.useContext(q);return Ce(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var je=s.createContext(void 0);function Be(){let e=s.useContext(je);return Ce(e,"You must render this element inside a <HydratedRouter> element"),e}function qe(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function $e(e,t,n){if(n&&!Ge)return[e[0]];if(t){let n=e.findIndex((e=>void 0!==t[e.route.id]));return e.slice(0,n+1)}return e}function He(e){let{page:t,...n}=e,{router:r}=Ve(),i=s.useMemo((()=>m(r.routes,t,r.basename)),[r.routes,t,r.basename]);return i?s.createElement(Ke,{page:t,matches:i,...n}):null}function We(e){let{manifest:t,routeModules:n}=Be(),[r,i]=s.useState([]);return s.useEffect((()=>{let r=!1;return async function(e,t,n){return De((await Promise.all(e.map((async e=>{let r=t.routes[e.route.id];if(r){let e=await Ae(r,n);return e.links?e.links():[]}return[]})))).flat(1).filter(Ne).filter((e=>"stylesheet"===e.rel||"preload"===e.rel)).map((e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"})))}(e,t,n).then((e=>{r||i(e)})),()=>{r=!0}}),[e,t,n]),r}function Ke(e){let{page:t,matches:n,...r}=e,i=X(),{manifest:o,routeModules:a}=Be(),{basename:l}=Ve(),{loaderData:u,matches:c}=ze(),h=s.useMemo((()=>Re(t,n,c,o,i,"data")),[t,n,c,o,i]),d=s.useMemo((()=>Re(t,n,c,o,i,"assets")),[t,n,c,o,i]),f=s.useMemo((()=>{if(t===i.pathname+i.search+i.hash)return[];let e=new Set,r=!1;if(n.forEach((t=>{let n=o.routes[t.route.id];n&&n.hasLoader&&(!h.some((e=>e.route.id===t.route.id))&&t.route.id in u&&a[t.route.id]?.shouldRevalidate||n.hasClientLoader?r=!0:e.add(t.route.id))})),0===e.size)return[];let s=Le(t,l);return r&&e.size>0&&s.searchParams.set("_routes",n.filter((t=>e.has(t.route.id))).map((e=>e.route.id)).join(",")),[s.pathname+s.search]}),[l,u,i,o,h,n,t,a]),p=s.useMemo((()=>Pe(d,o)),[d,o]),m=We(d);return s.createElement(s.Fragment,null,f.map((e=>s.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...r}))),p.map((e=>s.createElement("link",{key:e,rel:"modulepreload",href:e,...r}))),m.map((e=>{let{key:t,link:n}=e;return s.createElement("link",{key:t,...n})})))}je.displayName="FrameworkContext";var Ge=!1;function Qe(e){let{manifest:t,serverHandoffString:n,isSpaMode:r,ssr:i,renderMeta:o}=Be(),{router:a,static:l,staticContext:u}=Ve(),{matches:c}=ze(),h=Ue(i);o&&(o.didRenderScripts=!0);let d=$e(c,null,r);s.useEffect((()=>{Ge=!0}),[]);let f=s.useMemo((()=>{let r=u?`window.__reactRouterContext = ${n};window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());`:" ",i=l?`${t.hmr?.runtime?`import ${JSON.stringify(t.hmr.runtime)};`:""}${h?"":`import ${JSON.stringify(t.url)}`};\n${d.map(((e,n)=>{let r=`route${n}`,i=t.routes[e.route.id];Ce(i,`Route ${e.route.id} not found in manifest`);let{clientActionModule:s,clientLoaderModule:o,hydrateFallbackModule:a,module:l}=i,u=[...s?[{module:s,varName:`${r}_clientAction`}]:[],...o?[{module:o,varName:`${r}_clientLoader`}]:[],...a?[{module:a,varName:`${r}_HydrateFallback`}]:[],{module:l,varName:`${r}_main`}];return 1===u.length?`import * as ${r} from ${JSON.stringify(l)};`:[u.map((e=>`import * as ${e.varName} from "${e.module}";`)).join("\n"),`const ${r} = {${u.map((e=>`...${e.varName}`)).join(",")}};`].join("\n")})).join("\n")}\n  ${h?`window.__reactRouterManifest = ${JSON.stringify(function(e,t){let n=new Set(t.state.matches.map((e=>e.route.id))),r=t.state.location.pathname.split("/").filter(Boolean),i=["/"];for(r.pop();r.length>0;)i.push(`/${r.join("/")}`),r.pop();i.forEach((e=>{let r=m(t.routes,e,t.basename);r&&r.forEach((e=>n.add(e.route.id)))}));let s=[...n].reduce(((t,n)=>Object.assign(t,{[n]:e.routes[n]})),{});return{...e,routes:s}}(t,a),null,2)};`:""}\n  window.__reactRouterRouteModules = {${d.map(((e,t)=>`${JSON.stringify(e.route.id)}:route${t}`)).join(",")}};\n\nimport(${JSON.stringify(t.entry.module)});`:" ";return s.createElement(s.Fragment,null,s.createElement("script",{...e,suppressHydrationWarning:!0,dangerouslySetInnerHTML:Oe(r),type:void 0}),s.createElement("script",{...e,suppressHydrationWarning:!0,dangerouslySetInnerHTML:Oe(i),type:"module",async:!0}))}),[]),p=Ge?[]:t.entry.imports.concat(Pe(d,t,{includeHydrateFallback:!0}));return Ge?null:s.createElement(s.Fragment,null,h?null:s.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin}),s.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin}),(g=p,[...new Set(g)]).map((t=>s.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin}))),f);var g}function Ye(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach((t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)}))}}var Je="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{Je&&(window.__reactRouterVersion="7.4.0")}catch(fk){}function Xe(e){let{basename:t,children:n,window:r}=e,i=s.useRef();null==i.current&&(i.current=a({window:r,v5Compat:!0}));let o=i.current,[l,u]=s.useState({action:o.action,location:o.location}),c=s.useCallback((e=>{s.startTransition((()=>u(e)))}),[u]);return s.useLayoutEffect((()=>o.listen(c)),[o,c]),s.createElement(ye,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o})}var Ze=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,et=s.forwardRef((function(e,t){let n,{onClick:r,discover:i="render",prefetch:o="none",relative:a,reloadDocument:c,replace:h,state:f,target:p,to:m,preventScrollReset:g,viewTransition:y,...v}=e,{basename:w}=s.useContext(K),b="string"===typeof m&&Ze.test(m),_=!1;if("string"===typeof m&&b&&(n=m,Je))try{let e=new URL(window.location.href),t=m.startsWith("//")?new URL(e.protocol+m):new URL(m),n=N(t.pathname,w);t.origin===e.origin&&null!=n?m=n+t.search+t.hash:_=!0}catch(fk){u(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(J(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=s.useContext(K),{hash:i,pathname:o,search:a}=ne(e,{relative:t}),u=o;return"/"!==n&&(u="/"===o?n:L([n,o])),r.createHref({pathname:u,search:a,hash:i})}(m,{relative:a}),[S,T,k]=function(e,t){let n=s.useContext(je),[r,i]=s.useState(!1),[o,a]=s.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:c,onMouseLeave:h,onTouchStart:d}=t,f=s.useRef(null);s.useEffect((()=>{if("render"===e&&a(!0),"viewport"===e){let e=new IntersectionObserver((e=>{e.forEach((e=>{a(e.isIntersecting)}))}),{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}}),[e]),s.useEffect((()=>{if(r){let e=setTimeout((()=>{a(!0)}),100);return()=>{clearTimeout(e)}}}),[r]);let p=()=>{i(!0)},m=()=>{i(!1),a(!1)};return n?"intent"!==e?[o,f,{}]:[o,f,{onFocus:qe(l,p),onBlur:qe(u,m),onMouseEnter:qe(c,p),onMouseLeave:qe(h,m),onTouchStart:qe(d,p)}]:[!1,f,{}]}(o,v),I=function(e){let{target:t,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=te(),u=X(),c=ne(e,{relative:o});return s.useCallback((s=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(s,t)){s.preventDefault();let t=void 0!==n?n:d(u)===d(c);l(e,{replace:t,state:r,preventScrollReset:i,relative:o,viewTransition:a})}}),[u,l,c,n,r,t,e,i,o,a])}(m,{replace:h,state:f,target:p,preventScrollReset:g,relative:a,viewTransition:y});let C=s.createElement("a",{...v,...k,href:n||E,onClick:_||c?r:function(e){r&&r(e),e.defaultPrevented||I(e)},ref:Ye(t,T),target:p,"data-discover":b||"render"!==i?void 0:"true"});return S&&!b?s.createElement(s.Fragment,null,C,s.createElement(He,{page:E})):C}));et.displayName="Link";var tt=s.forwardRef((function(e,t){let{"aria-current":n="page",caseSensitive:r=!1,className:i="",end:o=!1,style:a,to:u,viewTransition:c,children:h,...d}=e,f=ne(u,{relative:d.relative}),p=X(),m=s.useContext(q),{navigator:g,basename:y}=s.useContext(K),v=null!=m&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s.useContext($);l(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=it("useViewTransitionState"),i=ne(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=N(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=N(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=A(i.pathname,a)||null!=A(i.pathname,o)}(f)&&!0===c,w=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,b=p.pathname,_=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;r||(b=b.toLowerCase(),_=_?_.toLowerCase():null,w=w.toLowerCase()),_&&y&&(_=N(_,y)||_);const E="/"!==w&&w.endsWith("/")?w.length-1:w.length;let S,T=b===w||!o&&b.startsWith(w)&&"/"===b.charAt(E),k=null!=_&&(_===w||!o&&_.startsWith(w)&&"/"===_.charAt(w.length)),I={isActive:T,isPending:k,isTransitioning:v},C=T?n:void 0;S="function"===typeof i?i(I):[i,T?"active":null,k?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let x="function"===typeof a?a(I):a;return s.createElement(et,{...d,"aria-current":C,className:S,ref:t,style:x,to:u,viewTransition:c},"function"===typeof h?h(I):h)}));tt.displayName="NavLink";var nt=s.forwardRef(((e,t)=>{let{discover:n="render",fetcherKey:r,navigate:i,reloadDocument:o,replace:a,state:u,method:c=be,action:h,onSubmit:f,relative:p,preventScrollReset:m,viewTransition:g,...y}=e,v=at(),w=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=s.useContext(K),r=s.useContext(Q);l(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...ne(e||".",{relative:t})},a=X();if(null==e){o.search=a.search;let e=new URLSearchParams(o.search),t=e.getAll("index"),n=t.some((e=>""===e));if(n){e.delete("index"),t.filter((e=>e)).forEach((t=>e.append("index",t)));let n=e.toString();o.search=n?`?${n}`:""}}e&&"."!==e||!i.route.index||(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(o.pathname="/"===o.pathname?n:L([n,o.pathname]));return d(o)}(h,{relative:p}),b="get"===c.toLowerCase()?"get":"post",_="string"===typeof h&&Ze.test(h);return s.createElement("form",{ref:t,method:b,action:w,onSubmit:o?f:e=>{if(f&&f(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=t?.getAttribute("formmethod")||c;v(t||e.currentTarget,{fetcherKey:r,method:n,navigate:i,replace:a,state:u,relative:p,preventScrollReset:m,viewTransition:g})},...y,"data-discover":_||"render"!==n?void 0:"true"})}));function rt(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function it(e){let t=s.useContext(B);return l(t,rt(e)),t}nt.displayName="Form";var st=0,ot=()=>`__${String(++st)}__`;function at(){let{router:e}=it("useSubmit"),{basename:t}=s.useContext(K),n=de("useRouteId");return s.useCallback((async function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:s,method:o,encType:a,formData:l,body:u}=Ie(r,t);if(!1===i.navigate){let t=i.fetcherKey||ot();await e.fetch(t,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})}),[e,t,n])}new TextEncoder;const lt=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ut={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,u=t>>2,c=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(lt(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new ct;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ct extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ht=function(e){return function(e){const t=lt(e);return ut.encodeByteArray(t,!0)}(e).replace(/\./g,"")},dt=function(e){try{return ut.decodeString(e,!0)}catch(fk){console.error("base64Decode failed: ",fk)}return null};function ft(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=ft(e[n],t[n]));return e}function pt(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const mt=()=>{try{return pt().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/nwitter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyA6UJGNu8DQYYWLIWXAkoL53uTdr8cMsgY",REACT_APP_APP_ID:"1:657152044135:web:915c7f8f1f17a93dd9f8c2",REACT_APP_AUTH_DOMAIN:"nwitter-eecee.firebaseapp.com",REACT_APP_MESSAGING_SENDER_ID:"657152044135",REACT_APP_PROJECT_ID:"nwitter-eecee",REACT_APP_STORAGE_BUCKET:"nwitter-eecee.firebasestorage.app"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(fk){return}const t=e&&dt(e[1]);return t&&JSON.parse(t)})()}catch(fk){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${fk}`)}},gt=()=>{var e;return null===(e=mt())||void 0===e?void 0:e.config};class yt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function vt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ht(JSON.stringify({alg:"none",type:"JWT"})),ht(JSON.stringify(s)),""].join(".")}function wt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function bt(){var e;const t=null===(e=mt())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(fk){return!1}}function _t(){return"undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof self&&self instanceof WorkerGlobalScope}function Et(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function St(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Tt(){const e=wt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function kt(){return!bt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function It(){try{return"object"===typeof indexedDB}catch(fk){return!1}}class Ct extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Ct.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,At.prototype.create)}}class At{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(xt,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new Ct(n,s,t)}}const xt=/\{\$([^}]+)}/g;function Nt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Rt(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Pt(n)&&Pt(s)){if(!Rt(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Pt(e){return null!==e&&"object"===typeof e}function Dt(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Ot(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Lt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Mt(e,t){const n=new Ft(e,t);return n.subscribe.bind(n)}class Ft{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Ut),void 0===r.error&&(r.error=Ut),void 0===r.complete&&(r.complete=Ut);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(fk){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(fk){"undefined"!==typeof console&&console.error&&console.error(fk)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Ut(){}function Vt(e){return e&&e._delegate?e._delegate:e}class zt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const jt="[DEFAULT]";class Bt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new yt;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(fk){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(fk){if(r)return null;throw fk}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:jt})}catch(fk){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(fk){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===jt?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt;return this.component?this.component.multipleInstances?e:jt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class qt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Bt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const $t=[];var Ht;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ht||(Ht={}));const Wt={debug:Ht.DEBUG,verbose:Ht.VERBOSE,info:Ht.INFO,warn:Ht.WARN,error:Ht.ERROR,silent:Ht.SILENT},Kt=Ht.INFO,Gt={[Ht.DEBUG]:"log",[Ht.VERBOSE]:"log",[Ht.INFO]:"info",[Ht.WARN]:"warn",[Ht.ERROR]:"error"},Qt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Gt[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r](`[${n}]  ${e.name}:`,...s)};class Yt{constructor(e){this.name=e,this._logLevel=Kt,this._logHandler=Qt,this._userLogHandler=null,$t.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ht))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Wt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ht.DEBUG,...t),this._logHandler(this,Ht.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ht.VERBOSE,...t),this._logHandler(this,Ht.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ht.INFO,...t),this._logHandler(this,Ht.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ht.WARN,...t),this._logHandler(this,Ht.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Ht.ERROR,...t),this._logHandler(this,Ht.ERROR,...t)}}let Jt,Xt;const Zt=new WeakMap,en=new WeakMap,tn=new WeakMap,nn=new WeakMap,rn=new WeakMap;let sn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return en.get(e);if("objectStoreNames"===t)return e.objectStoreNames||tn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ln(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function on(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Xt||(Xt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(un(this),n),ln(Zt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ln(e.apply(un(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(un(this),t,...r);return tn.set(s,t.sort?t.sort():[t]),ln(s)}}function an(e){return"function"===typeof e?on(e):(e instanceof IDBTransaction&&function(e){if(en.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));en.set(e,t)}(e),t=e,(Jt||(Jt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,sn):e);var t}function ln(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(ln(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Zt.set(t,e)})).catch((()=>{})),rn.set(t,e),t}(e);if(nn.has(e))return nn.get(e);const t=an(e);return t!==e&&(nn.set(e,t),rn.set(t,e)),t}const un=e=>rn.get(e);const cn=["get","getKey","getAll","getAllKeys","count"],hn=["put","add","delete","clear"],dn=new Map;function fn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(dn.get(t))return dn.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=hn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!cn.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return dn.set(t,s),s}sn=(e=>({...e,get:(t,n,r)=>fn(t,n)||e.get(t,n,r),has:(t,n)=>!!fn(t,n)||e.has(t,n)}))(sn);class pn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const mn="@firebase/app",gn="0.11.3",yn=new Yt("@firebase/app"),vn="@firebase/app-compat",wn="@firebase/analytics-compat",bn="@firebase/analytics",_n="@firebase/app-check-compat",En="@firebase/app-check",Sn="@firebase/auth",Tn="@firebase/auth-compat",kn="@firebase/database",In="@firebase/data-connect",Cn="@firebase/database-compat",An="@firebase/functions",xn="@firebase/functions-compat",Nn="@firebase/installations",Rn="@firebase/installations-compat",Pn="@firebase/messaging",Dn="@firebase/messaging-compat",On="@firebase/performance",Ln="@firebase/performance-compat",Mn="@firebase/remote-config",Fn="@firebase/remote-config-compat",Un="@firebase/storage",Vn="@firebase/storage-compat",zn="@firebase/firestore",jn="@firebase/vertexai",Bn="@firebase/firestore-compat",qn="firebase",$n="[DEFAULT]",Hn={[mn]:"fire-core",[vn]:"fire-core-compat",[bn]:"fire-analytics",[wn]:"fire-analytics-compat",[En]:"fire-app-check",[_n]:"fire-app-check-compat",[Sn]:"fire-auth",[Tn]:"fire-auth-compat",[kn]:"fire-rtdb",[In]:"fire-data-connect",[Cn]:"fire-rtdb-compat",[An]:"fire-fn",[xn]:"fire-fn-compat",[Nn]:"fire-iid",[Rn]:"fire-iid-compat",[Pn]:"fire-fcm",[Dn]:"fire-fcm-compat",[On]:"fire-perf",[Ln]:"fire-perf-compat",[Mn]:"fire-rc",[Fn]:"fire-rc-compat",[Un]:"fire-gcs",[Vn]:"fire-gcs-compat",[zn]:"fire-fst",[Bn]:"fire-fst-compat",[jn]:"fire-vertex","fire-js":"fire-js",[qn]:"fire-js-all"},Wn=new Map,Kn=new Map,Gn=new Map;function Qn(e,t){try{e.container.addComponent(t)}catch(fk){yn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,fk)}}function Yn(e,t){e.container.addOrOverwriteComponent(t)}function Jn(e){const t=e.name;if(Gn.has(t))return yn.debug(`There were multiple attempts to register component ${t}.`),!1;Gn.set(t,e);for(const n of Wn.values())Qn(n,e);for(const n of Kn.values())Qn(n,e);return!0}function Xn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Zn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$n;Xn(e,t).clearInstance(n)}function er(e){return void 0!==e.options}function tr(e){return null!==e&&void 0!==e&&void 0!==e.settings}function nr(){Gn.clear()}const rr=new At("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class ir{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new zt("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rr.create("app-deleted",{appName:this._name})}}function sr(e,t){const n=dt(e.split(".")[1]);if(null===n)return void console.error(`FirebaseServerApp ${t} is invalid: second part could not be parsed.`);if(void 0===JSON.parse(n).exp)return void console.error(`FirebaseServerApp ${t} is invalid: expiration claim could not be parsed`);1e3*JSON.parse(n).exp-(new Date).getTime()<=0&&console.error(`FirebaseServerApp ${t} is invalid: the token has expired.`)}class or extends ir{constructor(e,t,n,r){const i=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,s={name:n,automaticDataCollectionEnabled:i};if(void 0!==e.apiKey)super(e,s,r);else{super(e.options,s,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._serverConfig.authIdToken&&sr(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&sr(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,"undefined"!==typeof FinalizationRegistry&&(this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()}))),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,fr(mn,gn,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){dr(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw rr.create("server-app-deleted")}}const ar="11.5.0";function lr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:$n,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw rr.create("bad-app-name",{appName:String(i)});if(n||(n=gt()),!n)throw rr.create("no-options");const s=Wn.get(i);if(s){if(Rt(n,s.options)&&Rt(r,s.config))return s;throw rr.create("duplicate-app",{appName:i})}const o=new qt(i);for(const l of Gn.values())o.addComponent(l);const a=new ir(n,r,o);return Wn.set(i,a),a}function ur(e,t){if(("undefined"!==typeof window||_t())&&!_t())throw rr.create("invalid-server-app-environment");let n;void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=er(e)?e.options:e;const r=Object.assign(Object.assign({},t),n);void 0!==r.releaseOnDeref&&delete r.releaseOnDeref;if(void 0!==t.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw rr.create("finalization-registry-not-supported",{});const i=""+(s=JSON.stringify(r),[...s].reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0));var s;const o=Kn.get(i);if(o)return o.incRefCount(t.releaseOnDeref),o;const a=new qt(i);for(const u of Gn.values())a.addComponent(u);const l=new or(n,t,i,a);return Kn.set(i,l),l}function cr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$n;const t=Wn.get(e);if(!t&&e===$n&&gt())return lr();if(!t)throw rr.create("no-app",{appName:e});return t}function hr(){return Array.from(Wn.values())}async function dr(e){let t=!1;const n=e.name;if(Wn.has(n))t=!0,Wn.delete(n);else if(Kn.has(n)){e.decRefCount()<=0&&(Kn.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function fr(e,t,n){var r;let i=null!==(r=Hn[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void yn.warn(e.join(" "))}Jn(new zt(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}function pr(e,t){if(null!==e&&"function"!==typeof e)throw rr.create("invalid-log-argument");!function(e,t){for(const n of $t){let r=null;t&&t.level&&(r=Wt[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:Ht[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function mr(e){var t;t=e,$t.forEach((e=>{e.setLogLevel(t)}))}const gr="firebase-heartbeat-store";let yr=null;function vr(){return yr||(yr=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=ln(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(ln(o.result),e.oldVersion,e.newVersion,ln(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(gr)}catch(fk){console.warn(fk)}}}).catch((e=>{throw rr.create("idb-open",{originalErrorMessage:e.message})}))),yr}async function wr(e,t){try{const n=(await vr()).transaction(gr,"readwrite"),r=n.objectStore(gr);await r.put(t,br(e)),await n.done}catch(fk){if(fk instanceof Ct)yn.warn(fk.message);else{const t=rr.create("idb-set",{originalErrorMessage:null===fk||void 0===fk?void 0:fk.message});yn.warn(t.message)}}}function br(e){return`${e.name}!${e.options.appId}`}class _r{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Sr(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Er();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(fk){yn.warn(fk)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Er(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Tr(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Tr(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=ht(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(fk){return yn.warn(fk),""}}}function Er(){return(new Date).toISOString().substring(0,10)}class Sr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!It()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await vr()).transaction(gr),n=await t.objectStore(gr).get(br(e));return await t.done,n}catch(fk){if(fk instanceof Ct)yn.warn(fk.message);else{const t=rr.create("idb-get",{originalErrorMessage:null===fk||void 0===fk?void 0:fk.message});yn.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return wr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return wr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Tr(e){return ht(JSON.stringify({version:2,heartbeats:e})).length}var kr;kr="",Jn(new zt("platform-logger",(e=>new pn(e)),"PRIVATE")),Jn(new zt("heartbeat",(e=>new _r(e)),"PRIVATE")),fr(mn,gn,kr),fr(mn,gn,"esm2017"),fr("fire-js","");class Ir{constructor(e,t){this._delegate=e,this.firebase=t,Qn(e,new zt("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),dr(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$n;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$n;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Qn(this._delegate,e)}_addOrOverwriteComponent(e){Yn(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Cr=new At("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const Ar=function e(){const t=function(e){const t={},n={__esModule:!0,initializeApp:function(r){const i=lr(r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Nt(t,i.name))return t[i.name];const s=new e(i,n);return t[i.name]=s,s},app:i,registerVersion:fr,setLogLevel:mr,onLog:pr,apps:null,SDK_VERSION:ar,INTERNAL:{registerComponent:function(t){const r=t.name,s=r.replace("-compat","");if(Jn(t)&&"PUBLIC"===t.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw Cr.create("invalid-app-argument",{appName:r});return e[s]()};void 0!==t.serviceProps&&ft(o,t.serviceProps),n[s]=o,e.prototype[s]=function(){const e=this._getService.bind(this,r);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e.apply(this,t.multipleInstances?i:[])}}return"PUBLIC"===t.type?n[s]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:r}};function i(e){if(!Nt(t,e=e||$n))throw Cr.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map((e=>t[e]))}}),i.App=e,n}(Ir);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){ft(t,e)},createSubscribe:Mt,ErrorFactory:At,deepExtend:ft}),t}(),xr=new Yt("@firebase/app-compat");try{const e=pt();if(void 0!==e.firebase){xr.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const t=e.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&xr.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch(pk){}const Nr=Ar;!function(e){fr("@firebase/app-compat","0.2.52",e)}();Nr.registerVersion("firebase","11.5.0","app-compat");function Rr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const Pr="facebook.com",Dr="github.com",Or="google.com",Lr="password",Mr="twitter.com",Fr="EMAIL_SIGNIN",Ur="PASSWORD_RESET",Vr="RECOVER_EMAIL",zr="REVERT_SECOND_FACTOR_ADDITION",jr="VERIFY_AND_CHANGE_EMAIL",Br="VERIFY_EMAIL";function qr(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $r=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}},Hr=qr,Wr=new At("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Kr=new Yt("@firebase/auth");function Gr(e){if(Kr.logLevel<=Ht.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Kr.error(`Auth (${ar}): ${e}`,...n)}}function Qr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw ei(e,...n)}function Yr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ei(e,...n)}function Jr(e,t,n){const r=Object.assign(Object.assign({},Hr()),{[t]:n});return new At("auth","Firebase",r).create(t,{appName:e.name})}function Xr(e){return Jr(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Zr(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Qr(e,"argument-error"),Jr(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ei(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Wr.create(e,...n)}function ti(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw ei(t,...r)}}function ni(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Gr(t),new Error(t)}function ri(e,t){e||ni(t)}function ii(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function si(){return"http:"===oi()||"https:"===oi()}function oi(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class ai{constructor(e,t){this.shortDelay=e,this.longDelay=t,ri(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wt())||St()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(si()||Et()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function li(e,t){ri(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class ui{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void ni("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void ni("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void ni("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ci={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},hi=new ai(3e4,6e4);function di(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function fi(e,t,n,r){return pi(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=Dt(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:a},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),ui.fetch()(gi(e,e.config.apiHost,n,o),l)}))}async function pi(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},ci),t);try{const t=new vi(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw wi(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw wi(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw wi(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw wi(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Jr(e,a,o);Qr(e,a)}}catch(fk){if(fk instanceof Ct)throw fk;Qr(e,"network-request-failed",{message:String(fk)})}}async function mi(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await fi(e,t,n,r,i);return"mfaPendingCredential"in s&&Qr(e,"multi-factor-auth-required",{_serverResponse:s}),s}function gi(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?li(e.config,i):`${e.config.apiScheme}://${i}`}function yi(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class vi{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Yr(this.auth,"network-request-failed"))),hi.get())}))}}function wi(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Yr(e,t,r);return i.customData._tokenResponse=n,i}function bi(e){return void 0!==e&&void 0!==e.getResponse}function _i(e){return void 0!==e&&void 0!==e.enterprise}class Ei{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return yi(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Si(e,t){return fi(e,"GET","/v2/recaptchaConfig",di(e,t))}async function Ti(e,t){return fi(e,"POST","/v1/accounts:lookup",t)}function ki(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(fk){}}function Ii(e){return 1e3*Number(e)}function Ci(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Gr("JWT malformed, contained fewer than 3 sections"),null;try{const e=dt(n);return e?JSON.parse(e):(Gr("Failed to decode base64 JWT payload"),null)}catch(fk){return Gr("Caught error parsing JWT payload as JSON",null===fk||void 0===fk?void 0:fk.toString()),null}}function Ai(e){const t=Ci(e);return ti(t,"internal-error"),ti("undefined"!==typeof t.exp,"internal-error"),ti("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function xi(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(fk){throw fk instanceof Ct&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(fk)&&e.auth.currentUser===e&&await e.auth.signOut(),fk}}class Ni{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(fk){return void("auth/network-request-failed"===(null===fk||void 0===fk?void 0:fk.code)&&this.schedule(!0))}this.schedule()}}class Ri{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ki(this.lastLoginAt),this.creationTime=ki(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Pi(e){var t;const n=e.auth,r=await e.getIdToken(),i=await xi(e,Ti(n,{idToken:r}));ti(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?Di(s.providerUserInfo):[],a=(l=e.providerData,u=o,[...l.filter((e=>!u.some((t=>t.providerId===e.providerId)))),...u]);var l,u;const c=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!c&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ri(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function Di(e){return e.map((e=>{var{providerId:t}=e,n=Rr(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class Oi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ti(e.idToken,"internal-error"),ti("undefined"!==typeof e.idToken,"internal-error"),ti("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Ai(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ti(0!==e.length,"internal-error");const t=Ai(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(ti(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await pi(e,{},(async()=>{const n=Dt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=gi(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",ui.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Oi;return n&&(ti("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(ti("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(ti("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Oi,this.toJSON())}_performRefresh(){return ni("not implemented")}}function Li(e,t){ti("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Mi{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Rr(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ni(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ri(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await xi(this,this.stsTokenManager.getToken(this.auth,e));return ti(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Vt(e),r=await n.getIdToken(t),i=Ci(r);ti(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ki(Ii(i.auth_time)),issuedAtTime:ki(Ii(i.iat)),expirationTime:ki(Ii(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Vt(e);await Pi(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(ti(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Mi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ti(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Pi(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tr(this.auth.app))return Promise.reject(Xr(this.auth));const e=await this.getIdToken();return await xi(this,async function(e,t){return fi(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,u;const c=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:E}=t;ti(v&&E,e,"internal-error");const S=Oi.fromJSON(this.name,E);ti("string"===typeof v,e,"internal-error"),Li(c,e.name),Li(h,e.name),ti("boolean"===typeof w,e,"internal-error"),ti("boolean"===typeof b,e,"internal-error"),Li(d,e.name),Li(f,e.name),Li(p,e.name),Li(m,e.name),Li(g,e.name),Li(y,e.name);const T=new Mi({uid:v,auth:e,email:h,emailVerified:w,displayName:c,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:S,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(T.providerData=_.map((e=>Object.assign({},e)))),m&&(T._redirectEventId=m),T}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Oi;r.updateFromServerResponse(t);const i=new Mi({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Pi(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];ti(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Di(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new Oi;o.updateFromIdToken(n);const a=new Mi({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Ri(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const Fi=new Map;function Ui(e){ri(e instanceof Function,"Expected a class definition");let t=Fi.get(e);return t?(ri(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Fi.set(e,t),t)}class Vi{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Vi.type="NONE";const zi=Vi;function ji(e,t,n){return`firebase:${e}:${t}:${n}`}class Bi{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=ji(this.userKey,r.apiKey,i),this.fullPersistenceKey=ji("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Mi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Bi(Ui(zi),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Ui(zi);const s=ji(n,e.config.apiKey,e.name);let o=null;for(const l of t)try{const t=await l._get(s);if(t){const n=Mi._fromJSON(e,t);l!==i&&(o=n),i=l;break}}catch(pk){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(pk){}}))),new Bi(i,e,n)):new Bi(i,e,n)}}function qi(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ki(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if($i(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Qi(t))return"Blackberry";if(Yi(t))return"Webos";if(Hi(t))return"Safari";if((t.includes("chrome/")||Wi(t))&&!t.includes("edge/"))return"Chrome";if(Gi(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function $i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt();return/firefox\//i.test(e)}function Hi(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Wi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt();return/crios\//i.test(e)}function Ki(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt();return/iemobile/i.test(e)}function Gi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt();return/android/i.test(e)}function Qi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt();return/blackberry/i.test(e)}function Yi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt();return/webos/i.test(e)}function Ji(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Xi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt();return Ji(e)||Gi(e)||Yi(e)||Qi(e)||/windows phone/i.test(e)||Ki(e)}function Zi(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=qi(wt());break;case"Worker":t=`${qi(wt())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${ar}/${r}`}class es{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(fk){r(fk)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(fk){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===fk||void 0===fk?void 0:fk.message})}}}class ts{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class ns{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new is(this),this.idTokenSubscription=new is(this),this.beforeStateQueue=new es(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Wr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ui(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Bi.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(fk){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Ti(this,{idToken:e}),n=await Mi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(tr(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(fk){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(fk)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ti(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(fk){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Pi(e)}catch(fk){if("auth/network-request-failed"!==(null===fk||void 0===fk?void 0:fk.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tr(this.app))return Promise.reject(Xr(this));const t=e?Vt(e):null;return t&&ti(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&ti(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return tr(this.app)?Promise.reject(Xr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tr(this.app)?Promise.reject(Xr(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(Ui(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return fi(e,"GET","/v2/passwordPolicy",di(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new ts(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new At("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return fi(e,"POST","/v2/accounts:revokeToken",di(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ui(e)||this._popupRedirectResolver;ti(t,this,"argument-error"),this.redirectPersistenceManager=await Bi.create(this,[Ui(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(ti(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ti(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Zi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(tr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Kr.logLevel<=Ht.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Kr.warn(`Auth (${ar}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function rs(e){return Vt(e)}class is{constructor(e){this.auth=e,this.observer=null,this.addObserver=Mt((e=>this.observer=e))}get next(){return ti(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ss={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function os(e){return ss.loadJS(e)}function as(e){return`__${e}${Math.floor(1e6*Math.random())}`}const ls=1e12;class us{constructor(e){this.auth=e,this.counter=ls,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new ds(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||ls;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||ls;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||ls;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class cs{constructor(){this.enterprise=new hs}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class hs{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class ds{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;ti(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(fk){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(fk){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const fs="NO_RECAPTCHA";class ps{constructor(e){this.type="recaptcha-enterprise",this.auth=rs(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;_i(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n(fs)}))})):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new cs).execute("siteKey",{action:"verify"})}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Si(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Ei(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&_i(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=ss.recaptchaEnterpriseScript;0!==t.length&&(t+=i),os(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function ms(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new ps(e);let o;if(i)o=fs;else try{o=await s.verify(n)}catch(l){o=await s.verify(n,!0)}const a=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function gs(e,t,n,r,i){var s,o;if("EMAIL_PASSWORD_PROVIDER"===i){if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ms(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await ms(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}if("PHONE_PROVIDER"===i){if(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("PHONE_PROVIDER")){const i=await ms(e,t,n);return r(e,i).catch((async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&("auth/missing-recaptcha-token"===i.code||"auth/invalid-app-credential"===i.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const i=await ms(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)}))}{const i=await ms(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function ys(e){const t=rs(e),n=await Si(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Ei(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new ps(t).verify()}}function vs(e,t,n){const r=rs(e);ti(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=ws(t),{host:o,port:a}=function(e){const t=ws(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:bs(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:bs(t)}}}(t),l={url:`${s}//${o}${null===a?"":`:${a}`}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return ti(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void ti(Rt(l,r.config.emulator)&&Rt(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function ws(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function bs(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class _s{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ni("not implemented")}_getIdTokenResponse(e){return ni("not implemented")}_linkToIdToken(e,t){return ni("not implemented")}_getReauthenticationResolver(e){return ni("not implemented")}}async function Es(e,t){return fi(e,"POST","/v1/accounts:resetPassword",di(e,t))}async function Ss(e,t){return fi(e,"POST","/v1/accounts:signUp",t)}async function Ts(e,t){return mi(e,"POST","/v1/accounts:signInWithPassword",di(e,t))}async function ks(e,t){return fi(e,"POST","/v1/accounts:sendOobCode",di(e,t))}async function Is(e,t){return ks(e,t)}async function Cs(e,t){return ks(e,t)}class As extends _s{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new As(e,t,"password")}static _fromEmailAndCode(e,t){return new As(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return gs(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ts,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return mi(e,"POST","/v1/accounts:signInWithEmailLink",di(e,t))}(e,{email:this._email,oobCode:this._password});default:Qr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return gs(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ss,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return mi(e,"POST","/v1/accounts:signInWithEmailLink",di(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Qr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function xs(e,t){return mi(e,"POST","/v1/accounts:signInWithIdp",di(e,t))}class Ns extends _s{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ns(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Qr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Rr(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Ns(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return xs(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,xs(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xs(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Dt(t)}return e}}async function Rs(e,t){return fi(e,"POST","/v1/accounts:sendVerificationCode",di(e,t))}const Ps={USER_NOT_FOUND:"user-not-found"};class Ds extends _s{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ds({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ds({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return mi(e,"POST","/v1/accounts:signInWithPhoneNumber",di(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await mi(e,"POST","/v1/accounts:signInWithPhoneNumber",di(e,t));if(n.temporaryProof)throw wi(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return mi(e,"POST","/v1/accounts:signInWithPhoneNumber",di(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Ps)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Ds({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Os{constructor(e){var t,n,r,i,s,o;const a=Ot(Lt(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,u=null!==(n=a.oobCode)&&void 0!==n?n:null,c=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);ti(l&&u&&c,"argument-error"),this.apiKey=l,this.operation=c,this.code=u,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=Ot(Lt(e)).link,n=t?Ot(Lt(t)).deep_link_id:null,r=Ot(Lt(e)).deep_link_id;return(r?Ot(Lt(r)).link:null)||r||n||t||e}(e);try{return new Os(t)}catch(pk){return null}}}class Ls{constructor(){this.providerId=Ls.PROVIDER_ID}static credential(e,t){return As._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Os.parseLink(t);return ti(n,"argument-error"),As._fromEmailAndCode(e,n.code,n.tenantId)}}Ls.PROVIDER_ID="password",Ls.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ls.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ms{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Fs extends Ms{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Us extends Fs{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return ti("providerId"in t&&"signInMethod"in t,"argument-error"),Ns._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return ti(e.idToken||e.accessToken,"argument-error"),Ns._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Us.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Us.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new Us(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(fk){return null}}}class Vs extends Fs{constructor(){super("facebook.com")}static credential(e){return Ns._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Vs.credential(t.oauthAccessToken)}catch(pk){return null}}}Vs.FACEBOOK_SIGN_IN_METHOD="facebook.com",Vs.PROVIDER_ID="facebook.com";class zs extends Fs{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ns._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return zs.credential(n,r)}catch(pk){return null}}}zs.GOOGLE_SIGN_IN_METHOD="google.com",zs.PROVIDER_ID="google.com";class js extends Fs{constructor(){super("github.com")}static credential(e){return Ns._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return js.credential(t.oauthAccessToken)}catch(pk){return null}}}js.GITHUB_SIGN_IN_METHOD="github.com",js.PROVIDER_ID="github.com";class Bs extends _s{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return xs(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,xs(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xs(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new Bs(n,i):null}static _create(e,t){return new Bs(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class qs extends Ms{constructor(e){ti(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return qs.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return qs.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Bs.fromJSON(e);return ti(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return Bs._create(r,n)}catch(fk){return null}}}class $s extends Fs{constructor(){super("twitter.com")}static credential(e,t){return Ns._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return $s.credential(n,r)}catch(pk){return null}}}async function Hs(e,t){return mi(e,"POST","/v1/accounts:signUp",di(e,t))}$s.TWITTER_SIGN_IN_METHOD="twitter.com",$s.PROVIDER_ID="twitter.com";class Ws{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Mi._fromIdTokenResponse(e,n,r),s=Ks(n);return new Ws({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Ks(n);return new Ws({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Ks(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Gs extends Ct{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Gs.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Gs(e,t,n,r)}}function Qs(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Gs._fromErrorAndOperation(e,n,t,r);throw n}))}function Ys(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function Js(e,t){const n=Vt(e);await Zs(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return fi(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=Ys(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Xs(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await xi(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ws._forOperation(e,"link",r)}async function Zs(e,t,n){await Pi(t);const r=!1===e?"provider-already-linked":"no-such-provider";ti(Ys(t.providerData).has(n)===e,t.auth,r)}async function eo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(tr(r.app))return Promise.reject(Xr(r));const i="reauthenticate";try{const s=await xi(e,Qs(r,i,t,e),n);ti(s.idToken,r,"internal-error");const o=Ci(s.idToken);ti(o,r,"internal-error");const{sub:a}=o;return ti(e.uid===a,r,"user-mismatch"),Ws._forOperation(e,i,s)}catch(fk){throw"auth/user-not-found"===(null===fk||void 0===fk?void 0:fk.code)&&Qr(r,"user-mismatch"),fk}}async function to(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(tr(e.app))return Promise.reject(Xr(e));const r="signIn",i=await Qs(e,r,t),s=await Ws._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function no(e,t){return to(rs(e),t)}async function ro(e,t){const n=Vt(e);return await Zs(!1,n,t.providerId),Xs(n,t)}async function io(e,t){return eo(Vt(e),t)}async function so(e,t){if(tr(e.app))return Promise.reject(Xr(e));const n=rs(e),r=await async function(e,t){return mi(e,"POST","/v1/accounts:signInWithCustomToken",di(e,t))}(n,{token:t,returnSecureToken:!0}),i=await Ws._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class oo{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?ao._fromServerResponse(e,t):"totpInfo"in t?lo._fromServerResponse(e,t):Qr(e,"internal-error")}}class ao extends oo{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new ao(t)}}class lo extends oo{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new lo(t)}}function uo(e,t,n){var r;ti((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),ti("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),ti("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ti(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(ti(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function co(e){const t=rs(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function ho(e,t){await async function(e,t){return fi(e,"POST","/v1/accounts:update",di(e,t))}(Vt(e),{oobCode:t})}async function fo(e,t){const n=Vt(e),r=await Es(n,{oobCode:t}),i=r.requestType;switch(ti(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ti(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ti(r.mfaInfo,n,"internal-error");default:ti(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=oo._fromServerResponse(rs(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function po(e,t){const n={identifier:t,continueUri:si()?ii():"http://localhost"},{signinMethods:r}=await async function(e,t){return fi(e,"POST","/v1/accounts:createAuthUri",di(e,t))}(Vt(e),n);return r||[]}async function mo(e,t){const n=Vt(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&uo(n.auth,r,t);const{email:i}=await async function(e,t){return ks(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function go(e,t,n){const r=Vt(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&uo(r.auth,i,n);const{email:s}=await async function(e,t){return ks(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function yo(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=Vt(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await xi(i,async function(e,t){return fi(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function vo(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await xi(e,async function(e,t){return fi(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class wo{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class bo extends wo{constructor(e,t,n,r){super(e,t,n),this.username=r}}class _o extends wo{constructor(e,t){super(e,"facebook.com",t)}}class Eo extends bo{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class So extends wo{constructor(e,t){super(e,"google.com",t)}}class To extends bo{constructor(e,t,n){super(e,"twitter.com",t,n)}}function ko(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=Ci(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new wo(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new _o(s,i);case"github.com":return new Eo(s,i);case"google.com":return new So(s,i);case"twitter.com":return new To(s,i,e.screenName||null);case"custom":case"anonymous":return new wo(s,null);default:return new wo(s,r,i)}}(n)}class Io{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new Io("enroll",e,t)}static _fromMfaPendingCredential(e){return new Io("signin",e)}toJSON(){const e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return Io._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return Io._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Co{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=rs(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>oo._fromServerResponse(n,e)));ti(r.mfaPendingCredential,n,"internal-error");const s=Io._fromMfaPendingCredential(r.mfaPendingCredential);return new Co(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await Ws._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return ti(t.user,n,"internal-error"),Ws._forOperation(t.user,t.operationType,o);default:Qr(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function Ao(e,t){return fi(e,"POST","/v2/accounts/mfaEnrollment:start",di(e,t))}class xo{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>oo._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new xo(e)}async getSession(){return Io._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await xi(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await xi(this.user,(r=this.user.auth,i={idToken:n,mfaEnrollmentId:t},fi(r,"POST","/v2/accounts/mfaEnrollment:withdraw",di(r,i))));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(fk){throw fk}var r,i}}const No=new WeakMap;const Ro="__sak";class Po{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ro,"1"),this.storage.removeItem(Ro),Promise.resolve(!0)):Promise.resolve(!1)}catch(pk){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Do extends Po{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Xi(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Tt()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Do.type="LOCAL";const Oo=Do;class Lo extends Po{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Lo.type="SESSION";const Mo=Lo;class Fo{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Fo(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Uo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Fo.receivers=[];class Vo{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=Uo("",20);r.port1.start();const u=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function zo(){return window}function jo(){return"undefined"!==typeof zo().WorkerGlobalScope&&"function"===typeof zo().importScripts}const Bo="firebaseLocalStorageDb",qo="firebaseLocalStorage",$o="fbase_key";class Ho{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Wo(e,t){return e.transaction([qo],t?"readwrite":"readonly").objectStore(qo)}function Ko(){const e=indexedDB.open(Bo,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(qo,{keyPath:$o})}catch(fk){n(fk)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(qo)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Bo);return new Ho(e).toPromise()}(),t(await Ko()))}))}))}async function Go(e,t,n){const r=Wo(e,!0).put({[$o]:t,value:n});return new Ho(r).toPromise()}function Qo(e,t){const n=Wo(e,!0).delete(t);return new Ho(n).toPromise()}class Yo{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Ko()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(fk){if(t++>3)throw fk;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jo()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fo._getInstance(jo()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Vo(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(pk){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ko();return await Go(e,Ro,"1"),await Qo(e,Ro),!0}catch(pk){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Go(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Wo(e,!1).get(t),r=await new Ho(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Qo(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Wo(e,!1).getAll();return new Ho(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Yo.type="LOCAL";const Jo=Yo;function Xo(e,t){return fi(e,"POST","/v2/accounts/mfaSignIn:start",di(e,t))}const Zo=as("rcb"),ea=new ai(3e4,6e4);class ta{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=zo().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return ti(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&bi(zo().grecaptcha)?Promise.resolve(zo().grecaptcha):new Promise(((n,r)=>{const i=zo().setTimeout((()=>{r(Yr(e,"network-request-failed"))}),ea.get());zo()[Zo]=()=>{zo().clearTimeout(i),delete zo()[Zo];const s=zo().grecaptcha;if(!s||!bi(s))return void r(Yr(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};os(`${ss.recaptchaV2Script}?${Dt({onload:Zo,render:"explicit",hl:t})}`).catch((()=>{clearTimeout(i),r(Yr(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=zo().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class na{async load(e){return new us(e)}clearedOneInstance(){}}const ra="recaptcha",ia={theme:"light",type:"image"};class sa{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},ia);this.parameters=n,this.type=ra,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=rs(e),this.isInvisible="invisible"===this.parameters.size,ti("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;ti(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new na:new ta,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(fk){return Promise.reject(fk)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){ti(!this.parameters.sitekey,this.auth,"argument-error"),ti(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ti("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=zo()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){ti(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ti(si()&&!jo(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await fi(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);ti(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ti(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class oa{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Ds._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function aa(e,t,n){var r;if(!e._getRecaptchaConfig())try{await ys(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){ti("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=gs(e,r,"mfaSmsEnrollment",(async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===fs){ti((null===n||void 0===n?void 0:n.type)===ra,e,"argument-error");return Ao(e,await la(e,t,n))}return Ao(e,t)}),"PHONE_PROVIDER");return(await s.catch((e=>Promise.reject(e)))).phoneSessionInfo.sessionInfo}{ti("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;ti(s,e,"missing-multi-factor-info");const o={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=gs(e,o,"mfaSmsSignIn",(async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===fs){ti((null===n||void 0===n?void 0:n.type)===ra,e,"argument-error");return Xo(e,await la(e,t,n))}return Xo(e,t)}),"PHONE_PROVIDER");return(await a.catch((e=>Promise.reject(e)))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=gs(e,t,"sendVerificationCode",(async(e,t)=>{if(t.captchaResponse===fs){ti((null===n||void 0===n?void 0:n.type)===ra,e,"argument-error");return Rs(e,await la(e,t,n))}return Rs(e,t)}),"PHONE_PROVIDER");return(await r.catch((e=>Promise.reject(e)))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function la(e,t,n){ti(n.type===ra,e,"argument-error");const r=await n.verify();ti("string"===typeof r,e,"argument-error");const i=Object.assign({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class ua{constructor(e){this.providerId=ua.PROVIDER_ID,this.auth=rs(e)}verifyPhoneNumber(e,t){return aa(this.auth,e,Vt(t))}static credential(e,t){return Ds._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ua.credentialFromTaggedObject(t)}static credentialFromError(e){return ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Ds._fromTokenResponse(n,r):null}}function ca(e,t){return t?Ui(t):(ti(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ua.PROVIDER_ID="phone",ua.PHONE_SIGN_IN_METHOD="phone";class ha extends _s{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xs(e,this._buildIdpRequest())}_linkToIdToken(e,t){return xs(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return xs(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function da(e){return to(e.auth,new ha(e),e.bypassAuthState)}function fa(e){const{auth:t,user:n}=e;return ti(n,t,"internal-error"),eo(n,new ha(e),e.bypassAuthState)}async function pa(e){const{auth:t,user:n}=e;return ti(n,t,"internal-error"),Xs(n,new ha(e),e.bypassAuthState)}class ma{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(fk){this.reject(fk)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(fk){this.reject(fk)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return da;case"linkViaPopup":case"linkViaRedirect":return pa;case"reauthViaPopup":case"reauthViaRedirect":return fa;default:Qr(this.auth,"internal-error")}}resolve(e){ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ga=new ai(2e3,1e4);class ya extends ma{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,ya.currentPopupAction&&ya.currentPopupAction.cancel(),ya.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ti(e,this.auth,"internal-error"),e}async onExecution(){ri(1===this.filter.length,"Popup operations only handle one event");const e=Uo();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Yr(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Yr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ya.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Yr(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,ga.get())};e()}}ya.currentPopupAction=null;const va=new Map;class wa extends ma{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=va.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Sa(t),r=Ea(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(fk){e=()=>Promise.reject(fk)}va.set(this.auth._key(),e)}return this.bypassAuthState||va.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function ba(e,t){return Ea(e)._set(Sa(t),"true")}function _a(e,t){va.set(e._key(),t)}function Ea(e){return Ui(e._redirectPersistence)}function Sa(e){return ji("pendingRedirect",e.config.apiKey,e.name)}function Ta(e,t,n){return async function(e,t,n){if(tr(e.app))return Promise.reject(Xr(e));const r=rs(e);Zr(e,t,Ms),await r._initializationPromise;const i=ca(r,n);return await ba(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function ka(e,t,n){return async function(e,t,n){const r=Vt(e);if(Zr(r.auth,t,Ms),tr(r.auth.app))return Promise.reject(Xr(r.auth));await r.auth._initializationPromise;const i=ca(r.auth,n);await ba(i,r.auth);const s=await Aa(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function Ia(e,t,n){return async function(e,t,n){const r=Vt(e);Zr(r.auth,t,Ms),await r.auth._initializationPromise;const i=ca(r.auth,n);await Zs(!1,r,t.providerId),await ba(i,r.auth);const s=await Aa(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function Ca(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(tr(e.app))return Promise.reject(Xr(e));const r=rs(e),i=ca(r,t),s=new wa(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function Aa(e){const t=Uo(`${e.uid}:::`);return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class xa{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ra(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Ra(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Yr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Na(e))}saveEventToCache(e){this.cachedEventUids.add(Na(e)),this.lastProcessedEventTime=Date.now()}}function Na(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Ra(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}async function Pa(e){return fi(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const Da=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Oa=/^https?/;function La(e){const t=ii(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Oa.test(n))return!1;if(Da.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Ma=new ai(3e4,6e4);function Fa(){const e=zo().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Ua(e){return new Promise(((t,n)=>{var r,i,s;function o(){Fa(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Fa(),n(Yr(e,"network-request-failed"))},timeout:Ma.get()})}if(null===(i=null===(r=zo().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=zo().gapi)||void 0===s?void 0:s.load)){const t=as("iframefcb");return zo()[t]=()=>{gapi.load?o():n(Yr(e,"network-request-failed"))},os(`${ss.gapiScript}?onload=${t}`).catch((e=>n(e)))}o()}})).catch((e=>{throw Va=null,e}))}let Va=null;const za=new ai(5e3,15e3),ja={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ba=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qa(e){const t=e.config;ti(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?li(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:ar},i=Ba.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Dt(r).slice(1)}`}async function $a(e){const t=await function(e){return Va=Va||Ua(e),Va}(e),n=zo().gapi;return ti(n,e,"internal-error"),t.open({where:document.body,url:qa(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ja,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Yr(e,"network-request-failed"),s=zo().setTimeout((()=>{r(i)}),za.get());function o(){zo().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const Ha={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Wa{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(fk){}}}function Ka(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Ha),{width:r.toString(),height:i.toString(),top:s,left:o}),u=wt().toLowerCase();n&&(a=Wi(u)?"_blank":n),$i(u)&&(t=t||"http://localhost",l.scrollbars="yes");const c=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`}),"");if(function(){var e;return Ji(arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Wa(null);const h=window.open(t||"",a,c);ti(h,e,"popup-blocked");try{h.focus()}catch(fk){}return new Wa(h)}const Ga="__/auth/handler",Qa="emulator/auth/handler",Ya=encodeURIComponent("fac");async function Ja(e,t,n,r,i,s){ti(e.config.authDomain,e,"auth-domain-config-required"),ti(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:ar,eventId:i};if(t instanceof Ms){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Fs){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))void 0===a[c]&&delete a[c];const l=await e._getAppCheckToken(),u=l?`#${Ya}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${Ga}`;return li(t,Qa)}(e)}?${Dt(a).slice(1)}${u}`}const Xa="webStorageSupport";const Za=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Mo,this._completeRedirectFn=Ca,this._overrideRedirectResult=_a}async _openPopup(e,t,n,r){var i;ri(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Ka(e,await Ja(e,t,n,ii(),r),Uo())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){zo().location.href=e}(await Ja(e,t,n,ii(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(ri(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await $a(e),n=new xa(e);return t.register("authEvent",(t=>{ti(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Xa,{type:Xa},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Xa];void 0!==i&&t(!!i),Qr(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Pa(e);for(const n of t)try{if(La(n))return}catch(pk){}Qr(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Xi()||Hi()||Ji()}};class el{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return ni("unexpected MultiFactorSessionType")}}}class tl extends el{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new tl(e)}_finalizeEnroll(e,t,n){return function(e,t){return fi(e,"POST","/v2/accounts/mfaEnrollment:finalize",di(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return fi(e,"POST","/v2/accounts/mfaSignIn:finalize",di(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class nl{constructor(){}static assertion(e){return tl._fromCredential(e)}}nl.FACTOR_ID="phone";var rl="@firebase/auth",il="1.9.1";class sl{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ti(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=mt())||void 0===t||t[`_${e}`]})("authIdTokenMaxAge");var ol;function al(){return window}ss={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Yr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},ol="Browser",Jn(new zt("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ti(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:ol,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zi(ol)},u=new ns(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ui);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(u,n),u}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Jn(new zt("auth-internal",(e=>(e=>new sl(e))(rs(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),fr(rl,il,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(ol)),fr(rl,il,"esm2017");async function ll(e,t,n){var r;const{BuildInfo:i}=al();ri(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(ri(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return Ji()?o.ibi=i.packageName:Gi()?o.apn=i.packageName:Qr(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,Ja(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function ul(e){const{cordova:t}=al();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}class cl extends xa{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInitialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function hl(e){const t=await pl()._get(ml(e));return t&&await pl()._remove(ml(e)),t}function dl(e,t){var n,r;const i=function(e){const t=gl(e),n=t.link?decodeURIComponent(t.link):void 0,r=gl(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return gl(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=gl(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(fk){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?Yr(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function fl(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function pl(){return Ui(Oo)}function ml(e){return ji("authEvent",e.config.apiKey,e.name)}function gl(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return Ot(n.join("?"))}const yl=class{constructor(){this._redirectPersistence=Mo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ca,this._overrideRedirectResult=_a}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new cl(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){Qr(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,l,u,c;const h=al();ti("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ti("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ti("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ti("function"===typeof(null===(l=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ti("function"===typeof(null===(c=null===(u=null===h||void 0===h?void 0:h.cordova)||void 0===u?void 0:u.InAppBrowser)||void 0===c?void 0:c.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),va.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:fl(),postBody:null,tenantId:e.tenantId,error:Yr(e,"no-auth-event")}}(e,n,r);await function(e,t){return pl()._set(ml(e),t)}(e,s);const o=await ll(e,s,t);return async function(e,t,n){const{cordova:r}=al();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function l(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function u(){a||(a=window.setTimeout((()=>{o(Yr(e,"redirect-cancelled-by-user"))}),2e3))}function c(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&u()}t.addPassiveListener(l),document.addEventListener("resume",u,!1),Gi()&&document.addEventListener("visibilitychange",c,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",c,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await ul(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=al(),n={};Ji()?n.iosBundleId=t.packageName:Gi()?n.androidPackageName=t.packageName:Qr(e,"operation-not-supported-in-this-environment"),await Pa(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=al(),s=setTimeout((async()=>{await hl(e),t.onEvent(vl())}),500),o=async n=>{clearTimeout(s);const r=await hl(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=dl(r,n.url)),t.onEvent(i||vl())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,l=`${i.packageName.toLowerCase()}://`;al().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&o({url:e}),"function"===typeof a)try{a(e)}catch(fk){console.error(fk)}}}};function vl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Yr("no-auth-event")}}function wl(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function bl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt();return!("file:"!==wl()&&"ionic:"!==wl()&&"capacitor:"!==wl()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function _l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt();return Tt()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt();return/Edge\/\d+/.test(e)}(e)}function El(){try{const e=self.localStorage,t=Uo();if(e)return e.setItem(t,"1"),e.removeItem(t),!_l()||It()}catch(fk){return Sl()&&It()}return!1}function Sl(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Tl(){return("http:"===wl()||"https:"===wl()||Et()||bl())&&!(St()||bt())&&El()&&!Sl()}function kl(){return bl()&&"undefined"!==typeof document}const Il={LOCAL:"local",NONE:"none",SESSION:"session"},Cl=ti,Al="persistence";async function xl(e){await e._initializationPromise;const t=Nl(),n=ji(Al,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function Nl(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(fk){return null}}const Rl=ti;class Pl{constructor(){this.browserResolver=Ui(Za),this.cordovaResolver=Ui(yl),this.underlyingResolver=null,this._redirectPersistence=Mo,this._completeRedirectFn=Ca,this._overrideRedirectResult=_a}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return kl()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Rl(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!kl()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function Dl(e){return e.unwrap()}function Ol(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new Ul(e,function(e,t){var n;const r=Vt(e),i=t;return ti(t.customData.operationType,r,"argument-error"),ti(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Co._fromError(r,i)}(e,t))}else if(r){const e=Ll(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function Ll(e){const{_tokenResponse:t}=e instanceof Ct?e.customData:e;if(!t)return null;if(!(e instanceof Ct)&&"temporaryProof"in t&&"phoneNumber"in t)return ua.credentialFromResult(e);const n=t.providerId;if(!n||n===Lr)return null;let r;switch(n){case Or:r=zs;break;case Pr:r=Vs;break;case Dr:r=js;break;case Mr:r=$s;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?Bs._create(n,o):Ns._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new Us(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof Ct?r.credentialFromError(e):r.credentialFromResult(e)}function Ml(e,t){return t.catch((t=>{throw t instanceof Ct&&Ol(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,Ll(r)),additionalUserInfo:ko(e),user:Vl.getOrCreate(n)};var r}))}async function Fl(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>Ml(e,n.confirm(t))}}class Ul{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Ml(Dl(this.auth),this.resolver.resolveSignIn(e))}}class Vl{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=Vt(e);return No.has(t)||No.set(t,xo._fromUser(t)),No.get(t)}(e)}static getOrCreate(e){return Vl.USER_MAP.has(e)||Vl.USER_MAP.set(e,new Vl(e)),Vl.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Ml(this.auth,ro(this._delegate,e))}async linkWithPhoneNumber(e,t){return Fl(this.auth,async function(e,t,n){const r=Vt(e);await Zs(!1,r,"phone");const i=await aa(r.auth,t,Vt(n));return new oa(i,(e=>ro(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return Ml(this.auth,async function(e,t,n){const r=Vt(e);Zr(r.auth,t,Ms);const i=ca(r.auth,n);return new ya(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,Pl))}async linkWithRedirect(e){return await xl(rs(this.auth)),Ia(this._delegate,e,Pl)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Ml(this.auth,io(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return Fl(this.auth,async function(e,t,n){const r=Vt(e);if(tr(r.auth.app))return Promise.reject(Xr(r.auth));const i=await aa(r.auth,t,Vt(n));return new oa(i,(e=>io(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return Ml(this.auth,async function(e,t,n){const r=Vt(e);if(tr(r.auth.app))return Promise.reject(Yr(r.auth,"operation-not-supported-in-this-environment"));Zr(r.auth,t,Ms);const i=ca(r.auth,n);return new ya(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,Pl))}async reauthenticateWithRedirect(e){return await xl(rs(this.auth)),ka(this._delegate,e,Pl)}sendEmailVerification(e){return mo(this._delegate,e)}async unlink(e){return await Js(this._delegate,e),this}updateEmail(e){return function(e,t){const n=Vt(e);return tr(n.auth.app)?Promise.reject(Xr(n.auth)):vo(n,t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return vo(Vt(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){const n=Vt(e);if(tr(n.auth.app))return Promise.reject(Xr(n.auth));await Xs(n,t)}(this._delegate,e)}updateProfile(e){return yo(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return go(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Vl.USER_MAP=new WeakMap;const zl=ti;class jl{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;zl(n,"invalid-api-key",{appName:e.name}),zl(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?Pl:void 0;this._delegate=t.initialize({options:{persistence:ql(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap($r),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Vl.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){vs(this._delegate,e,t)}applyActionCode(e){return ho(this._delegate,e)}checkActionCode(e){return fo(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await Es(Vt(e),{oobCode:t,newPassword:n}).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&co(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return Ml(this._delegate,async function(e,t,n){if(tr(e.app))return Promise.reject(Xr(e));const r=rs(e),i=gs(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Hs,"EMAIL_PASSWORD_PROVIDER"),s=await i.catch((t=>{throw"auth/password-does-not-meet-requirements"===t.code&&co(e),t})),o=await Ws._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return po(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=Os.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){zl(Tl(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await rs(e)._initializationPromise,Ca(e,t,!1)}(this._delegate,Pl);return e?Ml(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){rs(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=Bl(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=Bl(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=rs(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){ti(t.handleCodeInApp,r,"argument-error"),t&&uo(r,e,t)}(i,n),await gs(r,i,"getOobCode",Cs,"EMAIL_PASSWORD_PROVIDER")}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=rs(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&uo(r,i,n),await gs(r,i,"getOobCode",Is,"EMAIL_PASSWORD_PROVIDER")}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){Cl(Object.values(Il).includes(t),e,"invalid-persistence-type"),St()?Cl(t!==Il.SESSION,e,"unsupported-persistence-type"):bt()?Cl(t===Il.NONE,e,"unsupported-persistence-type"):Sl()?Cl(t===Il.NONE||t===Il.LOCAL&&It(),e,"unsupported-persistence-type"):Cl(t===Il.NONE||El(),e,"unsupported-persistence-type")}(this._delegate,e),e){case Il.SESSION:t=Mo;break;case Il.LOCAL:t=await Ui(Jo)._isAvailable()?Jo:Oo;break;case Il.NONE:t=zi;break;default:return Qr("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Ml(this._delegate,async function(e){var t;if(tr(e.app))return Promise.reject(Xr(e));const n=rs(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Ws({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Hs(n,{returnSecureToken:!0}),i=await Ws._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return Ml(this._delegate,no(this._delegate,e))}signInWithCustomToken(e){return Ml(this._delegate,so(this._delegate,e))}signInWithEmailAndPassword(e,t){return Ml(this._delegate,function(e,t,n){return tr(e.app)?Promise.reject(Xr(e)):no(Vt(e),Ls.credential(t,n)).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&co(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return Ml(this._delegate,async function(e,t,n){if(tr(e.app))return Promise.reject(Xr(e));const r=Vt(e),i=Ls.credentialWithLink(t,n||ii());return ti(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),no(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Fl(this._delegate,async function(e,t,n){if(tr(e.app))return Promise.reject(Xr(e));const r=rs(e),i=await aa(r,t,Vt(n));return new oa(i,(e=>no(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return zl(Tl(),this._delegate,"operation-not-supported-in-this-environment"),Ml(this._delegate,async function(e,t,n){if(tr(e.app))return Promise.reject(Yr(e,"operation-not-supported-in-this-environment"));const r=rs(e);Zr(e,t,Ms);const i=ca(r,n);return new ya(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,Pl))}async signInWithRedirect(e){return zl(Tl(),this._delegate,"operation-not-supported-in-this-environment"),await xl(this._delegate),Ta(this._delegate,e,Pl)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await fo(Vt(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function Bl(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&Vl.getOrCreate(e)),error:t,complete:n}}function ql(e,t){const n=function(e,t){const n=Nl();if(!n)return[];const r=ji(Al,e,t);switch(n.getItem(r)){case Il.NONE:return[zi];case Il.LOCAL:return[Jo,Mo];case Il.SESSION:return[Mo];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Jo)||n.push(Jo),"undefined"!==typeof window)for(const r of[Oo,Mo])n.includes(r)||n.push(r);return n.includes(zi)||n.push(zi),n}jl.Persistence=Il;class $l{static credential(e,t){return ua.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new ua(Dl(Nr.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}$l.PHONE_SIGN_IN_METHOD=ua.PHONE_SIGN_IN_METHOD,$l.PROVIDER_ID=ua.PROVIDER_ID;const Hl=ti;class Wl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Nr.app();var r;Hl(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new sa(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}var Kl;(Kl=Nr).INTERNAL.registerComponent(new zt("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new jl(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Fr,PASSWORD_RESET:Ur,RECOVER_EMAIL:Vr,REVERT_SECOND_FACTOR_ADDITION:zr,VERIFY_AND_CHANGE_EMAIL:jr,VERIFY_EMAIL:Br}},EmailAuthProvider:Ls,FacebookAuthProvider:Vs,GithubAuthProvider:js,GoogleAuthProvider:zs,OAuthProvider:Us,SAMLAuthProvider:qs,PhoneAuthProvider:$l,PhoneMultiFactorGenerator:nl,RecaptchaVerifier:Wl,TwitterAuthProvider:$s,Auth:jl,AuthCredential:_s,Error:Ct}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Kl.registerVersion("@firebase/auth-compat","0.5.19");var Gl,Ql,Yl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Jl={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),u=s(16777216);function c(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(c(t))throw Error("division by zero");if(c(e))return new m(a,a);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!c(r);){var u=s.add(r);0>=u.l(e)&&(i=i.add(n),s=u),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),u=(s=o(n)).j(t);h(u)||0<u.l(e);)u=(s=o(n-=r)).j(t);c(s)&&(s=l),i=i.add(s),e=f(e,u)}return new m(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(c(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(c(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:c(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(c(this)||c(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(u)&&0>e.l(u))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=f*g,p(n,2*i+2*s),n[2*i+2*s+1]+=l*g,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*m,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*m,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Ql=Jl.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),u=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(u))):i=(i=i.j(r)).add(o(u))}return i},Gl=Jl.Integer=r}).apply("undefined"!==typeof Yl?Yl:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Xl,Zl,eu,tu,nu,ru,iu,su,ou="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},au={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof ou&&ou];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function u(e,t,n){return(u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function w(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function E(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function S(e){i.setTimeout((()=>{throw e}),0)}function T(){var e=x;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var k=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new I),(e=>e.reset()));class I{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,A=!1,x=new class{constructor(){this.h=this.g=null}add(e,t){const n=k.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},N=()=>{const e=i.Promise.resolve(void 0);C=()=>{e.then(R)}};var R=()=>{for(var e;e=T();){try{e.h.call(e.g)}catch(n){S(n)}var t=k;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}A=!1};function P(){this.s=this.s,this.C=this.C}function D(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},D.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function L(e,t){if(D.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:M[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}h(L,D);var M={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),U=0;function V(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++U,this.da=this.fa=!1}function z(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function j(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(z(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function q(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}j.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=q(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new V(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var $="closure_lm_"+(1e6*Math.random()|0),H={};function W(e,t,n,r,i){if(r&&r.once)return G(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);return null}return n=te(n),e&&e[F]?e.K(t,n,o(r)?!!r.capture:!!r,i):K(e,t,n,!1,r,i)}function K(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=Z(e);if(l||(e[$]=l=new j(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=X;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)O||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(J(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function G(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)G(e,t[s],n,r,i);return null}return n=te(n),e&&e[F]?e.L(t,n,o(r)?!!r.capture:!!r,i):K(e,t,n,!0,r,i)}function Q(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[F]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=q(s=e.g[t],n,r,i))&&(z(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,n,r,i)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[F])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(J(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[$]=null)):z(e)}}}function J(e){return e in H?H[e]:H[e]="on"+e}function X(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function Z(e){return(e=e[$])instanceof j?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){P.call(this),this.i=new j(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new D(t,e);else if(t instanceof D)t.target=t.target||e;else{var i=t;_(t=new D(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&B(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=u(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=u(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,oe(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,P),ne.prototype[F]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)z(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends P{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){P.call(this),this.h=e,this.g={}}h(le,P);var ue=[];function ce(e){v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Y(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ce(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=i.JSON.stringify,de=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){D.call(this,"d")}function we(){D.call(this,"c")}h(ve,D),h(we,D);var be={},_e=null;function Ee(){return _e=_e||new ne}function Se(e){D.call(this,be.La,e)}function Te(e){const t=Ee();re(t,new Se(t))}function ke(e,t){D.call(this,be.STAT_EVENT,e),this.stat=t}function Ie(e){const t=Ee();re(t,new ke(t,e))}function Ce(e,t){D.call(this,be.Ma,e),this.size=t}function Ae(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function xe(){this.g=!0}function Ne(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return he(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}be.La="serverreachability",h(Se,D),be.STAT_EVENT="statevent",h(ke,D),be.Ma="timingevent",h(Ce,D),xe.prototype.xa=function(){this.g=!1},xe.prototype.info=function(){};var Re,Pe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},De={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Oe(){}function Le(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Me}function Me(){this.i=null,this.g="",this.h=!1}h(Oe,pe),Oe.prototype.g=function(){return new XMLHttpRequest},Oe.prototype.i=function(){return{}},Re=new Oe;var Fe={},Ue={};function Ve(e,t,n){e.L=1,e.v=ht(ot(t)),e.m=n,e.P=!0,ze(e,null)}function ze(e,t){e.F=Date.now(),qe(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),kt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Me,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(u(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ue[0]=i.toString()),i=ue);for(var s=0;s<i.length;s++){var o=W(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?w(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Te(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+u+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function je(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ue:(n=Number(t.substring(n,r)),isNaN(n)?Fe:(r+=1)+n>t.length?Ue:(t=t.slice(r,r+n),e.C=r+n,t))}function qe(e){e.S=Date.now()+e.I,$e(e,e.I)}function $e(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ae(u(e.ba,e),t)}function He(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function We(e){0==e.j.G||e.J||ln(e.j,e)}function Ke(e){He(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ce(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ge(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Yt(n)}rn(n),Ie(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ae(u(n.Za,n),6e3));if(1>=Xe(n.h)&&n.ca){try{n.ca()}catch(c){}n.ca=void 0}}else cn(n,11)}else if((e.K||n.g==e)&&an(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.T=u[0],u=u[1],2==n.G)if("c"==u[0]){n.K=u[1],n.ia=u[2];const t=u[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=u[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const c=u[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ct(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(He(a),qe(a)),r.g=o}else nn(r);0<n.i.length&&Xt(n)}else"stop"!=u[0]&&"close"!=u[0]||cn(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?cn(n,7):Qt(n):"noop"!=u[0]&&n.l&&n.l.ta(u),n.v=0)}Te()}catch(c){}}Le.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Ht(e)?t.j():this.Y(e)},Le.prototype.Y=function(e){try{if(e==this.g)e:{const d=Ht(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Wt(this.g)))){this.J||4!=d||7==t||Te(),He(this);var n=this.g.Z();this.X=n;t:if(je(this)){var r=Wt(this.g);e="";var s=r.length,o=4==Ht(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ke(this),We(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,u=this.g;if((l=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var c=l;break t}}c=null}if(!(n=c)){this.o=!1,this.s=3,Ie(12),Ke(this),We(this);break e}Ne(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ge(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Be(this,a),e==Ue){4==d&&(this.s=4,Ie(14),n=!1),Ne(this.i,this.l,null,"[Incomplete Response]");break}if(e==Fe){this.s=4,Ie(15),Ne(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Ne(this.i,this.l,e,null),Ge(this,e)}if(je(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,Ie(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),sn(h),h.M=!0,Ie(11))}}else Ne(this.i,this.l,a,"[Invalid Chunked Response]"),Ke(this),We(this)}else Ne(this.i,this.l,a,null),Ge(this,a);4==d&&Ke(this),this.o&&!this.J&&(4==d?ln(this.j,this):(this.o=!1,qe(this)))}else(function(e){const t={};e=(e.g&&2<=Ht(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=E(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Ie(12)):(this.s=0,Ie(13)),Ke(this),We(this)}}}catch(d){}},Le.prototype.cancel=function(){this.J=!0,Ke(this)},Le.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Te(),Ie(17)),Ke(this),this.s=2,We(this)):$e(this,this.S-e)};var Qe=class{constructor(e,t){this.g=e,this.map=t}};function Ye(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Je(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Xe(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Ye.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new _t;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ut(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),lt(this,t[4]),this.l=dt(t[5]||"",!0),ut(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new _t(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ut(e,t,n){t instanceof _t?(e.i=t,function(e,t){t&&!e.j&&(Et(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(St(this,t),kt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,wt)),e.i=new _t(t,e.h))}function ct(e,t,n){e.i.set(t,n)}function ht(e){return ct(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?vt:yt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,bt)),e.join("")};var mt,gt=/[#\/\?@]/g,yt=/[#\?:]/g,vt=/[#\?]/g,wt=/[#\?@]/g,bt=/#/g;function _t(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Et(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function St(e,t){Et(e),t=It(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Tt(e,t){return Et(e),t=It(e,t),e.g.has(t)}function kt(e,t,n){St(e,t),0<n.length&&(e.i=null,e.g.set(It(e,t),d(n)),e.h+=n.length)}function It(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ct(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function At(){this.g=new fe}function xt(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;o(e)&&(i=he(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(fk){throw t.push(r+"type="+encodeURIComponent("_badmap")),fk}}function Nt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Rt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Pt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Dt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Ot(e)}function Ot(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Lt(e){let t="";return v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Mt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Lt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ct(e,t,n))}function Ft(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=_t.prototype).add=function(e,t){Et(this),this.i=null,e=It(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Et(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){Et(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){Et(this);let t=[];if("string"===typeof e)Tt(this,e)&&(t=t.concat(this.g.get(It(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Et(this),this.i=null,Tt(this,e=It(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},h(Nt,pe),Nt.prototype.g=function(){return new Rt(this.l,this.j)},Nt.prototype.i=(mt={},function(){return mt}),h(Rt,ne),(e=Rt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Ot(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Dt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ot(this)),this.g&&(this.readyState=3,Ot(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Dt(this):Ot(this),3==this.readyState&&Pt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Dt(this))},e.Qa=function(e){this.g&&(this.response=e,Dt(this))},e.ga=function(){this.g&&Dt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Rt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Ft,ne);var Ut=/^https?$/i,Vt=["POST","PUT"];function zt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,jt(e),qt(e)}function jt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Bt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Ht(e)||2!=e.Z()))if(e.u&&4==Ht(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==Ht(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Ut.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Ht(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",jt(e)}}finally{qt(e)}}}function qt(e,t){if(e.g){$t(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(fk){}}}function $t(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Ht(e){return e.g?e.g.readyState:0}function Wt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(uu){return null}}function Kt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Gt(e){this.Aa=0,this.i=[],this.j=new xe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kt("baseRetryDelayMs",5e3,e),this.cb=Kt("retryDelaySeedMs",1e4,e),this.Wa=Kt("forwardChannelMaxRetries",2,e),this.wa=Kt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ye(e&&e.concurrentRequestLimit),this.Da=new At,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Qt(e){if(Jt(e),3==e.G){var t=e.U++,n=ot(e.I);if(ct(n,"SID",e.K),ct(n,"RID",t),ct(n,"TYPE","terminate"),en(e,n),(t=new Le(e,e.j,t)).L=2,t.v=ht(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),qe(t)}hn(e)}function Yt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Jt(e){Yt(e),e.u&&(i.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Xt(e){if(!Je(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||N(),A||(C(),A=!0),x.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);ct(r,"SID",e.K),ct(r,"RID",n),ct(r,"AID",e.T),en(e,r),e.m&&e.o&&Mt(r,e.m,e.o),n=new Le(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ve(n,r,t)}function en(e,t){e.H&&v(e.H,(function(e,n){ct(t,n,e)})),e.l&&rt({},(function(e,n){ct(t,n,e)}))}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?u(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{xt(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||N(),A||(C(),A=!0),x.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ae(u(e.Fa,e),un(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function on(e){e.g=new Le(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ct(t,"RID","rpc"),ct(t,"SID",e.K),ct(t,"AID",e.T),ct(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ct(t,"TO",e.ja),ct(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Mt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(ot(t)),n.m=null,n.P=!0,ze(n,e)}function an(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){an(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Ee(),new Ce(r,n)),Xt(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Xe(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ae(u(e.Ga,e,t),un(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:cn(e,5);break;case 4:cn(e,10);break;case 3:cn(e,6);break;default:cn(e,2)}}function un(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function cn(e,t){if(e.j.info("Error code "+t),2==t){var n=u(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),ht(r),t?function(e,t){const n=new xe;if(i.Image){const r=new Image;r.onload=c(Ct,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(Ct,n,"TestLoadImage: error",!1,t,r),r.onabort=c(Ct,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(Ct,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new xe;const n=new AbortController,r=setTimeout((()=>{n.abort(),Ct(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Ct(0,0,!0,t):Ct(0,0,!1,t)})).catch((()=>{clearTimeout(r),Ct(0,0,!1,t)}))}(r.toString(),n)}else Ie(2);e.G=0,e.l&&e.l.sa(t),hn(e),Jt(e)}function hn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof st?ot(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);r&&at(o,r),t&&(o.g=t),s&&lt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ct(r,n,t),ct(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Ft(new Nt({eb:n})):new Ft(e.pa)).Ha(e.J),t}function pn(){}function mn(){}function gn(e,t){ne.call(this),this.g=new Gt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new wn(this)}function yn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){we.call(this),this.status=1}function wn(e){this.g=e}(e=Ft.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Re.g(),this.v=this.o?me(this.o):me(Re),this.g.onreadystatechange=u(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void zt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Vt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$t(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){zt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),qt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qt(this,!0)),Ft.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bt(this):this.bb())},e.bb=function(){Bt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Ht(this)?this.g.status:-1}catch(mt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(mt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Gt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ie(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),Xt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Le(this,this.j,e);let s=this.o;if(this.S&&(s?(s=w(s),_(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ct(n=ot(this.I),"RID",e),ct(n,"CVER",22),this.D&&ct(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Lt(s)))+"&"+t:this.m&&Mt(n,this.m,s)),et(this.h,i),this.Ua&&ct(n,"TYPE","init"),this.P?(ct(n,"$req",t),ct(n,"SID","null"),i.T=!0,Ve(i,n,null)):Ve(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Je(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ae(u(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ie(10),Yt(this),on(this))},e.Za=function(){null!=this.C&&(this.C=null,Yt(this),rn(this),Ie(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ie(2)):(this.j.info("Failed to ping google.com"),Ie(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},mn.prototype.g=function(e,t){return new gn(e,t)},h(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Qt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Qe(t.Ya++,e)),3==t.G&&Xt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Qt(this.g),delete this.g,gn.aa.N.call(this)},h(yn,ve),h(vn,we),h(wn,pn),wn.prototype.ua=function(){re(this.g,"a")},wn.prototype.ta=function(e){re(this.g,new yn(e))},wn.prototype.sa=function(e){re(this.g,new vn)},wn.prototype.ra=function(){re(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,su=au.createWebChannelTransport=function(){return new mn},iu=au.getStatEventTarget=function(){return Ee()},ru=au.Event=be,nu=au.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pe.NO_ERROR=0,Pe.TIMEOUT=8,Pe.HTTP_ERROR=6,tu=au.ErrorCode=Pe,De.COMPLETE="complete",eu=au.EventType=De,ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Zl=au.WebChannel=ge,au.FetchXmlHttpFactory=Nt,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,Xl=au.XhrIo=Ft}).apply("undefined"!==typeof ou?ou:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const lu="@firebase/firestore",uu="4.7.10";class cu{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cu.UNAUTHENTICATED=new cu(null),cu.GOOGLE_CREDENTIALS=new cu("google-credentials-uid"),cu.FIRST_PARTY=new cu("first-party-uid"),cu.MOCK_USER=new cu("mock-user");let hu="11.5.0";const du=new Yt("@firebase/firestore");function fu(){return du.logLevel}function pu(e){if(du.logLevel<=Ht.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(yu);du.debug(`Firestore (${hu}): ${e}`,...i)}}function mu(e){if(du.logLevel<=Ht.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(yu);du.error(`Firestore (${hu}): ${e}`,...i)}}function gu(e){if(du.logLevel<=Ht.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(yu);du.warn(`Firestore (${hu}): ${e}`,...i)}}function yu(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function vu(){const e=`FIRESTORE (${hu}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw mu(e),new Error(e)}function wu(e,t){e||vu()}function bu(e,t){return e}const _u={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Eu extends Ct{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Su{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Tu{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ku{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(cu.UNAUTHENTICATED)))}shutdown(){}}class Iu{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Cu{constructor(e){this.t=e,this.currentUser=cu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){wu(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Su;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Su,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{pu("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(pu("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Su)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(pu("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(wu("string"==typeof t.accessToken),new Tu(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return wu(null===e||"string"==typeof e),new cu(e)}}class Au{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=cu.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class xu{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Au(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(cu.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Nu{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ru{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,tr(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){wu(void 0===this.o);const n=e=>{null!=e.error&&pu("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,pu("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{pu("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):pu("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.V)return Promise.resolve(new Nu(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(wu("string"==typeof e.token),this.R=e.token,new Nu(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Pu(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function Du(){return new TextEncoder}class Ou{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Pu(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Lu(e,t){return e<t?-1:e>t?1:0}function Mu(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return Lu(r,i);{const s=Du(),o=Uu(s.encode(Fu(e,n)),s.encode(Fu(t,n)));return 0!==o?o:Lu(r,i)}}n+=r>65535?2:1}return Lu(e.length,t.length)}function Fu(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function Uu(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Lu(e[n],t[n]);return Lu(e.length,t.length)}function Vu(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function zu(e){return e+"\0"}const ju=-62135596800,Bu=1e6;class qu{static now(){return qu.fromMillis(Date.now())}static fromDate(e){return qu.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Bu);return new qu(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Eu(_u.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Eu(_u.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ju)throw new Eu(_u.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Eu(_u.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Bu}_compareTo(e){return this.seconds===e.seconds?Lu(this.nanoseconds,e.nanoseconds):Lu(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-ju;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class $u{static fromTimestamp(e){return new $u(e)}static min(){return new $u(new qu(0,0))}static max(){return new $u(new qu(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Hu="__name__";class Wu{constructor(e,t,n){void 0===t?t=0:t>e.length&&vu(),void 0===n?n=e.length-t:n>e.length-t&&vu(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Wu.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Wu?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Wu.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Lu(e.length,t.length)}static compareSegments(e,t){const n=Wu.isNumericId(e),r=Wu.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Wu.extractNumericId(e).compare(Wu.extractNumericId(t)):Mu(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Gl.fromString(e.substring(4,e.length-2))}}class Ku extends Wu{construct(e,t,n){return new Ku(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Eu(_u.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((e=>e.length>0)))}return new Ku(e)}static emptyPath(){return new Ku([])}}const Gu=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qu extends Wu{construct(e,t,n){return new Qu(e,t,n)}static isValidIdentifier(e){return Gu.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qu.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Hu}static keyField(){return new Qu([Hu])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Eu(_u.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Eu(_u.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Eu(_u.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Eu(_u.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qu(t)}static emptyPath(){return new Qu([])}}class Yu{constructor(e){this.path=e}static fromPath(e){return new Yu(Ku.fromString(e))}static fromName(e){return new Yu(Ku.fromString(e).popFirst(5))}static empty(){return new Yu(Ku.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ku.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ku.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Yu(new Ku(e.slice()))}}const Ju=-1;class Xu{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Zu(e){return e.fields.find((e=>2===e.kind))}function ec(e){return e.fields.filter((e=>2!==e.kind))}Xu.UNKNOWN_ID=-1;class tc{constructor(e,t){this.fieldPath=e,this.kind=t}}class nc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new nc(0,sc.min())}}function rc(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=$u.fromTimestamp(1e9===r?new qu(n+1,0):new qu(n,r));return new sc(i,Yu.empty(),t)}function ic(e){return new sc(e.readTime,e.key,Ju)}class sc{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new sc($u.min(),Yu.empty(),Ju)}static max(){return new sc($u.max(),Yu.empty(),Ju)}}function oc(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Yu.comparator(e.documentKey,t.documentKey),0!==n?n:Lu(e.largestBatchId,t.largestBatchId))}const ac="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function uc(e){if(e.code!==_u.FAILED_PRECONDITION||e.message!==ac)throw e;pu("LocalStore","Unexpectedly lost primary lease")}class cc{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&vu(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new cc(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof cc?t:cc.resolve(t)}catch(e){return cc.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):cc.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):cc.reject(t)}static resolve(e){return new cc(((t,n)=>{t(e)}))}static reject(e){return new cc(((t,n)=>{n(e)}))}static waitFor(e){return new cc(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=cc.resolve(!1);for(const n of e)t=t.next((e=>e?cc.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new cc(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new cc(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}const hc="SimpleDb";class dc{static open(e,t,n,r){try{return new dc(t,e.transaction(r,n))}catch(e){throw new gc(t,e)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.m=new Su,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{t.error?this.m.reject(new gc(e,t.error)):this.m.resolve()},this.transaction.onerror=t=>{const n=_c(t.target.error);this.m.reject(new gc(e,n))}}get p(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(pu(hc,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new vc(t)}}class fc{static delete(e){return pu(hc,"Removing database:",e),wc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!It())return!1;if(fc.v())return!0;const e=wt(),t=fc.C(e),n=0<t&&t<10,r=pc(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static v(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static C(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.O=n,12.2===fc.C(wt())&&mu("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(e){return this.db||(pu(hc,"Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new gc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Eu(_u.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Eu(_u.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new gc(e,r))},r.onupgradeneeded=e=>{pu(hc,'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.O.B(t,r.transaction,e.oldVersion,this.version).next((()=>{pu(hc,"Database upgrade to version "+this.version+" complete")}))}}))),this.L&&(this.db.onversionchange=e=>this.L(e)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.N(e);const t=dc.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.S(),e))).catch((e=>(t.abort(e),cc.reject(e)))).toPromise();return s.catch((()=>{})),await t.p,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(pu(hc,"Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function pc(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class mc{constructor(e){this.q=e,this.$=!1,this.U=null}get isDone(){return this.$}get K(){return this.U}set cursor(e){this.q=e}done(){this.$=!0}W(e){this.U=e}delete(){return wc(this.q.delete())}}class gc extends Eu{constructor(e,t){super(_u.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function yc(e){return"IndexedDbTransactionError"===e.name}class vc{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(pu(hc,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(pu(hc,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),wc(n)}add(e){return pu(hc,"ADD",this.store.name,e,e),wc(this.store.add(e))}get(e){return wc(this.store.get(e)).next((t=>(void 0===t&&(t=null),pu(hc,"GET",this.store.name,e,t),t)))}delete(e){return pu(hc,"DELETE",this.store.name,e),wc(this.store.delete(e))}count(){return pu(hc,"COUNT",this.store.name),wc(this.store.count())}G(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new cc(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.j(e,((e,n)=>{t.push(n)})).next((()=>t))}}H(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new cc(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}J(e,t){pu(hc,"DELETE ALL",this.store.name);const n=this.options(e,t);n.Y=!1;const r=this.cursor(n);return this.j(r,((e,t,n)=>n.delete()))}Z(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.j(r,t)}X(e){const t=this.cursor({});return new cc(((n,r)=>{t.onerror=e=>{const t=_c(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}j(e,t){const n=[];return new cc(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new mc(i),o=t(i.primaryKey,i.value,s);if(o instanceof cc){const e=o.catch((e=>(s.done(),cc.reject(e))));n.push(e)}s.isDone?r():null===s.K?i.continue():i.continue(s.K)}})).next((()=>cc.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function wc(e){return new cc(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=_c(e.target.error);n(t)}}))}let bc=!1;function _c(e){const t=fc.C(wt());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Eu("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return bc||(bc=!0,setTimeout((()=>{throw e}),0)),e}}return e}const Ec="IndexBackfiller";class Sc{constructor(e,t){this.asyncQueue=e,this.ee=t,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}te(e){pu(Ec,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const e=await this.ee.ne();pu(Ec,`Documents written: ${e}`)}catch(e){yc(e)?pu(Ec,"Ignoring IndexedDB error during index backfill: ",e):await uc(e)}await this.te(6e4)}))}}class Tc{constructor(e,t){this.localStore=e,this.persistence=t}async ne(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.re(t,e)))}re(e,t){const n=new Set;let r=t,i=!0;return cc.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return pu(Ec,`Processing collection: ${t}`),this.ie(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}ie(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.se(r,n))).next((n=>(pu(Ec,`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}se(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=ic(t);oc(r,n)>0&&(n=r)})),new sc(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class kc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.oe(e),this._e=e=>t.writeSequenceNumber(e))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}kc.ae=-1;const Ic=-1;function Cc(e){return null==e}function Ac(e){return 0===e&&1/e==-1/0}function xc(e){return"number"==typeof e&&Number.isInteger(e)&&!Ac(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Nc="\x01";function Rc(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Dc(t)),t=Pc(e.get(n),t);return Dc(t)}function Pc(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case Nc:n+="\x01\x11";break;default:n+=t}}return n}function Dc(e){return e+Nc+"\x01"}function Oc(e){const t=e.length;if(wu(t>=2),2===t)return wu(e.charAt(0)===Nc&&"\x01"===e.charAt(1)),Ku.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf(Nc,s);switch((t<0||t>n)&&vu(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:vu()}s=t+2}return new Ku(r)}const Lc="remoteDocuments",Mc="owner",Fc="owner",Uc="mutationQueues",Vc="mutations",zc="batchId",jc="userMutationsIndex",Bc=["userId","batchId"];function qc(e,t){return[e,Rc(t)]}function $c(e,t,n){return[e,Rc(t),n]}const Hc={},Wc="documentMutations",Kc="remoteDocumentsV14",Gc=["prefixPath","collectionGroup","readTime","documentId"],Qc="documentKeyIndex",Yc=["prefixPath","collectionGroup","documentId"],Jc="collectionGroupIndex",Xc=["collectionGroup","readTime","prefixPath","documentId"],Zc="remoteDocumentGlobal",eh="remoteDocumentGlobalKey",th="targets",nh="queryTargetsIndex",rh=["canonicalId","targetId"],ih="targetDocuments",sh=["targetId","path"],oh="documentTargetsIndex",ah=["path","targetId"],lh="targetGlobalKey",uh="targetGlobal",ch="collectionParents",hh=["collectionId","parent"],dh="clientMetadata",fh="bundles",ph="namedQueries",mh="indexConfiguration",gh="collectionGroupIndex",yh="indexState",vh=["indexId","uid"],wh="sequenceNumberIndex",bh=["uid","sequenceNumber"],_h="indexEntries",Eh=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Sh="documentKeyIndex",Th=["indexId","uid","orderedDocumentKey"],kh="documentOverlays",Ih=["userId","collectionPath","documentId"],Ch="collectionPathOverlayIndex",Ah=["userId","collectionPath","largestBatchId"],xh="collectionGroupOverlayIndex",Nh=["userId","collectionGroup","largestBatchId"],Rh="globals",Ph=[Uc,Vc,Wc,Lc,th,Mc,uh,ih,dh,Zc,ch,fh,ph],Dh=[...Ph,kh],Oh=[Uc,Vc,Wc,Kc,th,Mc,uh,ih,dh,Zc,ch,fh,ph,kh],Lh=Oh,Mh=[...Lh,mh,yh,_h],Fh=Mh,Uh=[...Mh,Rh];class Vh extends lc{constructor(e,t){super(),this.ue=e,this.currentSequenceNumber=t}}function zh(e,t){const n=bu(e);return fc.M(n.ue,t)}function jh(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Bh(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function qh(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class $h{constructor(e,t){this.comparator=e,this.root=t||Wh.EMPTY}insert(e,t){return new $h(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wh.BLACK,null,null))}remove(e){return new $h(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wh.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hh(this.root,e,this.comparator,!0)}}class Hh{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wh{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Wh.RED,this.left=null!=r?r:Wh.EMPTY,this.right=null!=i?i:Wh.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Wh(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Wh.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Wh.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wh.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wh.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw vu();if(this.right.isRed())throw vu();const e=this.left.check();if(e!==this.right.check())throw vu();return e+(this.isRed()?0:1)}}Wh.EMPTY=null,Wh.RED=!0,Wh.BLACK=!1,Wh.EMPTY=new class{constructor(){this.size=0}get key(){throw vu()}get value(){throw vu()}get color(){throw vu()}get left(){throw vu()}get right(){throw vu()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Wh(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Kh{constructor(e){this.comparator=e,this.data=new $h(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Gh(this.data.getIterator())}getIteratorFrom(e){return new Gh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Kh))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Kh(this.comparator);return t.data=e,t}}class Gh{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Qh(e){return e.hasNext()?e.getNext():void 0}class Yh{constructor(e){this.fields=e,e.sort(Qu.comparator)}static empty(){return new Yh([])}unionWith(e){let t=new Kh(Qu.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Yh(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vu(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Jh extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Xh{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Jh("Invalid base64 string: "+e):e}}(e);return new Xh(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Xh(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Lu(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xh.EMPTY_BYTE_STRING=new Xh("");const Zh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ed(e){if(wu(!!e),"string"==typeof e){let t=0;const n=Zh.exec(e);if(wu(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:td(e.seconds),nanos:td(e.nanos)}}function td(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function nd(e){return"string"==typeof e?Xh.fromBase64String(e):Xh.fromUint8Array(e)}const rd="server_timestamp",id="__type__",sd="__previous_value__",od="__local_write_time__";function ad(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[id])||void 0===n?void 0:n.stringValue)===rd}function ld(e){const t=e.mapValue.fields[sd];return ad(t)?ld(t):t}function ud(e){const t=ed(e.mapValue.fields[od].timestampValue);return new qu(t.seconds,t.nanos)}class cd{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}const hd="(default)";class dd{constructor(e,t){this.projectId=e,this.database=t||hd}static empty(){return new dd("","")}get isDefaultDatabase(){return this.database===hd}isEqual(e){return e instanceof dd&&e.projectId===this.projectId&&e.database===this.database}}const fd="__type__",pd="__max__",md={mapValue:{fields:{__type__:{stringValue:pd}}}},gd="__vector__",yd="value",vd={nullValue:"NULL_VALUE"};function wd(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ad(e)?4:Md(e)?9007199254740991:Od(e)?10:11:vu()}function bd(e,t){if(e===t)return!0;const n=wd(e);if(n!==wd(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ud(e).isEqual(ud(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=ed(e.timestampValue),r=ed(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return nd(e.bytesValue).isEqual(nd(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return td(e.geoPointValue.latitude)===td(t.geoPointValue.latitude)&&td(e.geoPointValue.longitude)===td(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return td(e.integerValue)===td(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=td(e.doubleValue),r=td(t.doubleValue);return n===r?Ac(n)===Ac(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Vu(e.arrayValue.values||[],t.arrayValue.values||[],bd);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(jh(n)!==jh(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!bd(n[i],r[i])))return!1;return!0}(e,t);default:return vu()}}function _d(e,t){return void 0!==(e.values||[]).find((e=>bd(e,t)))}function Ed(e,t){if(e===t)return 0;const n=wd(e),r=wd(t);if(n!==r)return Lu(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Lu(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=td(e.integerValue||e.doubleValue),r=td(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Sd(e.timestampValue,t.timestampValue);case 4:return Sd(ud(e),ud(t));case 5:return Mu(e.stringValue,t.stringValue);case 6:return function(e,t){const n=nd(e),r=nd(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Lu(n[i],r[i]);if(0!==e)return e}return Lu(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Lu(td(e.latitude),td(t.latitude));return 0!==n?n:Lu(td(e.longitude),td(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Td(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const o=e.fields||{},a=t.fields||{},l=null===(n=o[yd])||void 0===n?void 0:n.arrayValue,u=null===(r=a[yd])||void 0===r?void 0:r.arrayValue,c=Lu((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==u?void 0:u.values)||void 0===s?void 0:s.length)||0);return 0!==c?c:Td(l,u)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===md.mapValue&&t===md.mapValue)return 0;if(e===md.mapValue)return 1;if(t===md.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Mu(r[o],s[o]);if(0!==e)return e;const t=Ed(n[r[o]],i[s[o]]);if(0!==t)return t}return Lu(r.length,s.length)}(e.mapValue,t.mapValue);default:throw vu()}}function Sd(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Lu(e,t);const n=ed(e),r=ed(t),i=Lu(n.seconds,r.seconds);return 0!==i?i:Lu(n.nanos,r.nanos)}function Td(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Ed(n[i],r[i]);if(e)return e}return Lu(n.length,r.length)}function kd(e){return Id(e)}function Id(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=ed(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return nd(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Yu.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Id(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Id(e.fields[i])}`;return n+"}"}(e.mapValue):vu()}function Cd(e){switch(wd(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ld(e);return t?16+Cd(t):16;case 5:return 2*e.stringValue.length;case 6:return nd(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+Cd(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Bh(e.fields,((e,n)=>{t+=e.length+Cd(n)})),t}(e.mapValue);default:throw vu()}}function Ad(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function xd(e){return!!e&&"integerValue"in e}function Nd(e){return!!e&&"arrayValue"in e}function Rd(e){return!!e&&"nullValue"in e}function Pd(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Dd(e){return!!e&&"mapValue"in e}function Od(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[fd])||void 0===n?void 0:n.stringValue)===gd}function Ld(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Bh(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Ld(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ld(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Md(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===pd}const Fd={mapValue:{fields:{[fd]:{stringValue:gd},[yd]:{arrayValue:{}}}}};function Ud(e){return"nullValue"in e?vd:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Ad(dd.empty(),Yu.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?Od(e)?Fd:{mapValue:{}}:vu()}function Vd(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Ad(dd.empty(),Yu.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?Fd:"mapValue"in e?Od(e)?{mapValue:{}}:md:vu()}function zd(e,t){const n=Ed(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function jd(e,t){const n=Ed(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Bd{constructor(e){this.value=e}static empty(){return new Bd({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Dd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ld(t)}setAll(e){let t=Qu.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Ld(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Dd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return bd(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Dd(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Bh(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Bd(Ld(this.value))}}function qd(e){const t=[];return Bh(e.fields,((e,n)=>{const r=new Qu([e]);if(Dd(n)){const e=qd(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Yh(t)}class $d{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new $d(e,0,$u.min(),$u.min(),$u.min(),Bd.empty(),0)}static newFoundDocument(e,t,n,r){return new $d(e,1,t,$u.min(),n,r,0)}static newNoDocument(e,t){return new $d(e,2,t,$u.min(),$u.min(),Bd.empty(),0)}static newUnknownDocument(e,t){return new $d(e,3,t,$u.min(),$u.min(),Bd.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual($u.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bd.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bd.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$u.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof $d&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $d(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Hd{constructor(e,t){this.position=e,this.inclusive=t}}function Wd(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Yu.comparator(Yu.fromName(o.referenceValue),n.key):Ed(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Kd(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!bd(e.position[n],t.position[n]))return!1;return!0}class Gd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Qd(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Yd{}class Jd extends Yd{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new lf(e,t,n):"array-contains"===t?new df(e,n):"in"===t?new ff(e,n):"not-in"===t?new pf(e,n):"array-contains-any"===t?new mf(e,n):new Jd(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new uf(e,n):new cf(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ed(t,this.value)):null!==t&&wd(this.value)===wd(t)&&this.matchesComparison(Ed(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return vu()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xd extends Yd{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Xd(e,t)}matches(e){return Zd(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ce||(this.ce=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Zd(e){return"and"===e.op}function ef(e){return"or"===e.op}function tf(e){return nf(e)&&Zd(e)}function nf(e){for(const t of e.filters)if(t instanceof Xd)return!1;return!0}function rf(e){if(e instanceof Jd)return e.field.canonicalString()+e.op.toString()+kd(e.value);if(tf(e))return e.filters.map((e=>rf(e))).join(",");{const t=e.filters.map((e=>rf(e))).join(",");return`${e.op}(${t})`}}function sf(e,t){return e instanceof Jd?function(e,t){return t instanceof Jd&&e.op===t.op&&e.field.isEqual(t.field)&&bd(e.value,t.value)}(e,t):e instanceof Xd?function(e,t){return t instanceof Xd&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&sf(n,t.filters[r])),!0)}(e,t):void vu()}function of(e,t){const n=e.filters.concat(t);return Xd.create(n,e.op)}function af(e){return e instanceof Jd?function(e){return`${e.field.canonicalString()} ${e.op} ${kd(e.value)}`}(e):e instanceof Xd?function(e){return e.op.toString()+" {"+e.getFilters().map(af).join(" ,")+"}"}(e):"Filter"}class lf extends Jd{constructor(e,t,n){super(e,t,n),this.key=Yu.fromName(n.referenceValue)}matches(e){const t=Yu.comparator(e.key,this.key);return this.matchesComparison(t)}}class uf extends Jd{constructor(e,t){super(e,"in",t),this.keys=hf("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class cf extends Jd{constructor(e,t){super(e,"not-in",t),this.keys=hf("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function hf(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Yu.fromName(e.referenceValue)))}class df extends Jd{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Nd(t)&&_d(t.arrayValue,this.value)}}class ff extends Jd{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&_d(this.value.arrayValue,t)}}class pf extends Jd{constructor(e,t){super(e,"not-in",t)}matches(e){if(_d(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!_d(this.value.arrayValue,t)}}class mf extends Jd{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Nd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>_d(this.value.arrayValue,e)))}}class gf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.le=null}}function yf(e){return new gf(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function vf(e){const t=bu(e);if(null===t.le){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>rf(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Cc(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>kd(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>kd(e))).join(",")),t.le=e}return t.le}function wf(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Qd(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!sf(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Kd(e.startAt,t.startAt)&&Kd(e.endAt,t.endAt)}function bf(e){return Yu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function _f(e,t){return e.filters.filter((e=>e instanceof Jd&&e.field.isEqual(t)))}function Ef(e,t,n){let r=vd,i=!0;for(const s of _f(e,t)){let e=vd,t=!0;switch(s.op){case"<":case"<=":e=Ud(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=vd}zd({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];zd({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Sf(e,t,n){let r=md,i=!0;for(const s of _f(e,t)){let e=md,t=!0;switch(s.op){case">=":case">":e=Vd(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=md}jd({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];jd({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Tf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function kf(e,t,n,r,i,s,o,a){return new Tf(e,t,n,r,i,s,o,a)}function If(e){return new Tf(e)}function Cf(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Af(e){return null!==e.collectionGroup}function xf(e){const t=bu(e);if(null===t.he){t.he=[];const e=new Set;for(const i of t.explicitOrderBy)t.he.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Kh(Qu.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.he.push(new Gd(r,n))})),e.has(Qu.keyField().canonicalString())||t.he.push(new Gd(Qu.keyField(),n))}return t.he}function Nf(e){const t=bu(e);return t.Pe||(t.Pe=Rf(t,xf(e))),t.Pe}function Rf(e,t){if("F"===e.limitType)return yf(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Gd(e.field,t)}));const n=e.endAt?new Hd(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Hd(e.startAt.position,e.startAt.inclusive):null;return yf(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Pf(e,t){const n=e.filters.concat([t]);return new Tf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Df(e,t,n){return new Tf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Of(e,t){return wf(Nf(e),Nf(t))&&e.limitType===t.limitType}function Lf(e){return`${vf(Nf(e))}|lt:${e.limitType}`}function Mf(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>af(e))).join(", ")}]`),Cc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>kd(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>kd(e))).join(",")),`Target(${t})`}(Nf(e))}; limitType=${e.limitType})`}function Ff(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Yu.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of xf(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Wd(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,xf(e),t))&&!(e.endAt&&!function(e,t,n){const r=Wd(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,xf(e),t))}(e,t)}function Uf(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Vf(e){return(t,n)=>{let r=!1;for(const i of xf(e)){const e=zf(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function zf(e,t,n){const r=e.field.isKeyField()?Yu.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Ed(r,i):vu()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return vu()}}class jf{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Bh(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return qh(this.inner)}size(){return this.innerSize}}const Bf=new $h(Yu.comparator);function qf(){return Bf}const $f=new $h(Yu.comparator);function Hf(){let e=$f;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Wf(e){let t=$f;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Kf(){return Qf()}function Gf(){return Qf()}function Qf(){return new jf((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Yf=new $h(Yu.comparator),Jf=new Kh(Yu.comparator);function Xf(){let e=Jf;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Zf=new Kh(Lu);function ep(){return Zf}function tp(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ac(t)?"-0":t}}function np(e){return{integerValue:""+e}}function rp(e,t){return xc(t)?np(t):tp(e,t)}class ip{constructor(){this._=void 0}}function sp(e,t,n){return e instanceof lp?function(e,t){const n={fields:{[id]:{stringValue:rd},[od]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ad(t)&&(t=ld(t)),t&&(n.fields[sd]=t),{mapValue:n}}(n,t):e instanceof up?cp(e,t):e instanceof hp?dp(e,t):function(e,t){const n=ap(e,t),r=pp(n)+pp(e.Ie);return xd(n)&&xd(e.Ie)?np(r):tp(e.serializer,r)}(e,t)}function op(e,t,n){return e instanceof up?cp(e,t):e instanceof hp?dp(e,t):n}function ap(e,t){return e instanceof fp?function(e){return xd(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class lp extends ip{}class up extends ip{constructor(e){super(),this.elements=e}}function cp(e,t){const n=mp(t);for(const r of e.elements)n.some((e=>bd(e,r)))||n.push(r);return{arrayValue:{values:n}}}class hp extends ip{constructor(e){super(),this.elements=e}}function dp(e,t){let n=mp(t);for(const r of e.elements)n=n.filter((e=>!bd(e,r)));return{arrayValue:{values:n}}}class fp extends ip{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function pp(e){return td(e.integerValue||e.doubleValue)}function mp(e){return Nd(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class gp{constructor(e,t){this.field=e,this.transform=t}}class yp{constructor(e,t){this.version=e,this.transformResults=t}}class vp{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new vp}static exists(e){return new vp(void 0,e)}static updateTime(e){return new vp(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wp(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class bp{}function _p(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Rp(e.key,vp.none()):new Ip(e.key,e.data,vp.none());{const n=e.data,r=Bd.empty();let i=new Kh(Qu.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Cp(e.key,r,new Yh(i.toArray()),vp.none())}}function Ep(e,t,n){e instanceof Ip?function(e,t,n){const r=e.value.clone(),i=xp(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Cp?function(e,t,n){if(!wp(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=xp(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ap(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Sp(e,t,n,r){return e instanceof Ip?function(e,t,n,r){if(!wp(e.precondition,t))return n;const i=e.value.clone(),s=Np(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Cp?function(e,t,n,r){if(!wp(e.precondition,t))return n;const i=Np(e.fieldTransforms,r,t),s=t.data;return s.setAll(Ap(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return wp(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Tp(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=ap(r.transform,e||null);null!=i&&(null===n&&(n=Bd.empty()),n.set(r.field,i))}return n||null}function kp(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Vu(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof up&&t instanceof up||e instanceof hp&&t instanceof hp?Vu(e.elements,t.elements,bd):e instanceof fp&&t instanceof fp?bd(e.Ie,t.Ie):e instanceof lp&&t instanceof lp}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ip extends bp{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Cp extends bp{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ap(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function xp(e,t,n){const r=new Map;wu(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,op(o,a,n[i]))}return r}function Np(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,sp(e,s,t))}return r}class Rp extends bp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Pp extends bp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Dp{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Ep(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Sp(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Sp(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Gf();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=_p(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument($u.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Xf())}isEqual(e){return this.batchId===e.batchId&&Vu(this.mutations,e.mutations,((e,t)=>kp(e,t)))&&Vu(this.baseMutations,e.baseMutations,((e,t)=>kp(e,t)))}}class Op{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){wu(e.mutations.length===n.length);let r=Yf;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Op(e,t,n,r)}}class Lp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Mp{constructor(e,t){this.count=e,this.unchangedNames=t}}var Fp,Up;function Vp(e){switch(e){case _u.OK:return vu();case _u.CANCELLED:case _u.UNKNOWN:case _u.DEADLINE_EXCEEDED:case _u.RESOURCE_EXHAUSTED:case _u.INTERNAL:case _u.UNAVAILABLE:case _u.UNAUTHENTICATED:return!1;case _u.INVALID_ARGUMENT:case _u.NOT_FOUND:case _u.ALREADY_EXISTS:case _u.PERMISSION_DENIED:case _u.FAILED_PRECONDITION:case _u.ABORTED:case _u.OUT_OF_RANGE:case _u.UNIMPLEMENTED:case _u.DATA_LOSS:return!0;default:return vu()}}function zp(e){if(void 0===e)return mu("GRPC error has no .code"),_u.UNKNOWN;switch(e){case Fp.OK:return _u.OK;case Fp.CANCELLED:return _u.CANCELLED;case Fp.UNKNOWN:return _u.UNKNOWN;case Fp.DEADLINE_EXCEEDED:return _u.DEADLINE_EXCEEDED;case Fp.RESOURCE_EXHAUSTED:return _u.RESOURCE_EXHAUSTED;case Fp.INTERNAL:return _u.INTERNAL;case Fp.UNAVAILABLE:return _u.UNAVAILABLE;case Fp.UNAUTHENTICATED:return _u.UNAUTHENTICATED;case Fp.INVALID_ARGUMENT:return _u.INVALID_ARGUMENT;case Fp.NOT_FOUND:return _u.NOT_FOUND;case Fp.ALREADY_EXISTS:return _u.ALREADY_EXISTS;case Fp.PERMISSION_DENIED:return _u.PERMISSION_DENIED;case Fp.FAILED_PRECONDITION:return _u.FAILED_PRECONDITION;case Fp.ABORTED:return _u.ABORTED;case Fp.OUT_OF_RANGE:return _u.OUT_OF_RANGE;case Fp.UNIMPLEMENTED:return _u.UNIMPLEMENTED;case Fp.DATA_LOSS:return _u.DATA_LOSS;default:return vu()}}(Up=Fp||(Fp={}))[Up.OK=0]="OK",Up[Up.CANCELLED=1]="CANCELLED",Up[Up.UNKNOWN=2]="UNKNOWN",Up[Up.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Up[Up.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Up[Up.NOT_FOUND=5]="NOT_FOUND",Up[Up.ALREADY_EXISTS=6]="ALREADY_EXISTS",Up[Up.PERMISSION_DENIED=7]="PERMISSION_DENIED",Up[Up.UNAUTHENTICATED=16]="UNAUTHENTICATED",Up[Up.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Up[Up.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Up[Up.ABORTED=10]="ABORTED",Up[Up.OUT_OF_RANGE=11]="OUT_OF_RANGE",Up[Up.UNIMPLEMENTED=12]="UNIMPLEMENTED",Up[Up.INTERNAL=13]="INTERNAL",Up[Up.UNAVAILABLE=14]="UNAVAILABLE",Up[Up.DATA_LOSS=15]="DATA_LOSS";let jp=null;const Bp=new Gl([4294967295,4294967295],0);function qp(e){const t=Du().encode(e),n=new Ql;return n.update(t),new Uint8Array(n.digest())}function $p(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Gl([n,r],0),new Gl([i,s],0)]}class Hp{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Wp(`Invalid padding: ${t}`);if(n<0)throw new Wp(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Wp(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Wp(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Gl.fromNumber(this.Ee)}Ae(e,t,n){let r=e.add(t.multiply(Gl.fromNumber(n)));return 1===r.compare(Bp)&&(r=new Gl([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ee)return!1;const t=qp(e),[n,r]=$p(t);for(let i=0;i<this.hashCount;i++){const e=this.Ae(n,r,i);if(!this.Re(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Hp(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ee)return;const t=qp(e),[n,r]=$p(t);for(let i=0;i<this.hashCount;i++){const e=this.Ae(n,r,i);this.Ve(e)}}Ve(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Wp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Kp{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Gp.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Kp($u.min(),r,new $h(Lu),qf(),Xf())}}class Gp{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Gp(n,t,Xf(),Xf(),Xf())}}class Qp{constructor(e,t,n,r){this.me=e,this.removedTargetIds=t,this.key=n,this.fe=r}}class Yp{constructor(e,t){this.targetId=e,this.ge=t}}class Jp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xh.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Xp{constructor(){this.pe=0,this.ye=tm(),this.we=Xh.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return 0!==this.pe}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Xf(),t=Xf(),n=Xf();return this.ye.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:vu()}})),new Gp(this.we,this.Se,e,t,n)}Me(){this.be=!1,this.ye=tm()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,wu(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class Zp{constructor(e){this.ke=e,this.qe=new Map,this.Qe=qf(),this.$e=em(),this.Ue=em(),this.Ke=new $h(Lu)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,(t=>{const n=this.He(t);switch(e.state){case 0:this.Je(t)&&n.Ce(e.resumeToken);break;case 1:n.Be(),n.De||n.Me(),n.Ce(e.resumeToken);break;case 2:n.Be(),n.De||this.removeTarget(t);break;case 3:this.Je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),n.Ce(e.resumeToken));break;default:vu()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach(((e,n)=>{this.Je(n)&&t(n)}))}Ze(e){const t=e.targetId,n=e.ge.count,r=this.Xe(t);if(r){const i=r.target;if(bf(i))if(0===n){const e=new Yu(i.path);this.ze(t,e,$d.newNoDocument(e,$u.min()))}else wu(1===n);else{const r=this.et(t);if(r!==n){const n=this.tt(e),i=n?this.nt(n,e,r):1;if(0!==i){this.Ye(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==jp||jp.rt(function(e,t,n,r,i){var s,o,a,l,u,c;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(c=null===(u=null==d?void 0:d.bits)||void 0===u?void 0:u.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.ge,this.ke.it(),n,i))}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=nd(n).toUint8Array()}catch(e){if(e instanceof Jh)return gu("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Hp(s,r,i)}catch(e){return gu(e instanceof Wp?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ee?null:o}nt(e,t,n){return t.ge.count===n-this.st(e,t.targetId)?0:2}st(e,t){const n=this.ke.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.ke.it(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.ze(t,n,null),r++)})),r}ot(e){const t=new Map;this.qe.forEach(((n,r)=>{const i=this.Xe(r);if(i){if(n.current&&bf(i.target)){const t=new Yu(i.target.path);this._t(t).has(r)||this.ut(r,t)||this.ze(r,t,$d.newNoDocument(t,e))}n.ve&&(t.set(r,n.Fe()),n.Me())}}));let n=Xf();this.Ue.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Xe(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.Qe.forEach(((t,n)=>n.setReadTime(e)));const r=new Kp(e,t,this.Ke,this.Qe,n);return this.Qe=qf(),this.$e=em(),this.Ue=em(),this.Ke=new $h(Lu),r}Ge(e,t){if(!this.Je(e))return;const n=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,n),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,n){if(!this.Je(e))return;const r=this.He(e);this.ut(e,t)?r.xe(t,1):r.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),n&&(this.Qe=this.Qe.insert(t,n))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new Xp,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new Kh(Lu),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Kh(Lu),this.$e=this.$e.insert(e,t)),t}Je(e){const t=null!==this.Xe(e);return t||pu("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Xp),this.ke.getRemoteKeysForTarget(e).forEach((t=>{this.ze(e,t,null)}))}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function em(){return new $h(Yu.comparator)}function tm(){return new $h(Yu.comparator)}const nm={asc:"ASCENDING",desc:"DESCENDING"},rm={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},im={and:"AND",or:"OR"};class sm{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function om(e,t){return e.useProto3Json||Cc(t)?t:{value:t}}function am(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function lm(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function um(e,t){return am(e,t.toTimestamp())}function cm(e){return wu(!!e),$u.fromTimestamp(function(e){const t=ed(e);return new qu(t.seconds,t.nanos)}(e))}function hm(e,t){return dm(e,t).canonicalString()}function dm(e,t){const n=function(e){return new Ku(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function fm(e){const t=Ku.fromString(e);return wu(Lm(t)),t}function pm(e,t){return hm(e.databaseId,t.path)}function mm(e,t){const n=fm(t);if(n.get(1)!==e.databaseId.projectId)throw new Eu(_u.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Eu(_u.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Yu(wm(n))}function gm(e,t){return hm(e.databaseId,t)}function ym(e){const t=fm(e);return 4===t.length?Ku.emptyPath():wm(t)}function vm(e){return new Ku(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function wm(e){return wu(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function bm(e,t,n){return{name:pm(e,t),fields:n.value.mapValue.fields}}function _m(e,t,n){const r=mm(e,t.name),i=cm(t.updateTime),s=t.createTime?cm(t.createTime):$u.min(),o=new Bd({mapValue:{fields:t.fields}}),a=$d.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Em(e,t){let n;if(t instanceof Ip)n={update:bm(e,t.key,t.value)};else if(t instanceof Rp)n={delete:pm(e,t.key)};else if(t instanceof Cp)n={update:bm(e,t.key,t.data),updateMask:Om(t.fieldMask)};else{if(!(t instanceof Pp))return vu();n={verify:pm(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof lp)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof up)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof hp)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof fp)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw vu()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:um(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:vu()}(e,t.precondition)),n}function Sm(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?vp.updateTime(cm(e.updateTime)):void 0!==e.exists?vp.exists(e.exists):vp.none()}(t.currentDocument):vp.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)wu("REQUEST_TIME"===t.setToServerValue),n=new lp;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new up(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new hp(e)}else"increment"in t?n=new fp(e,t.increment):vu();const r=Qu.fromServerFormat(t.fieldPath);return new gp(r,n)}(e,t))):[];if(t.update){t.update.name;const i=mm(e,t.update.name),s=new Bd({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Yh(t.map((e=>Qu.fromServerFormat(e))))}(t.updateMask);return new Cp(i,s,e,n,r)}return new Ip(i,s,n,r)}if(t.delete){const r=mm(e,t.delete);return new Rp(r,n)}if(t.verify){const r=mm(e,t.verify);return new Pp(r,n)}return vu()}function Tm(e,t){return{documents:[gm(e,t.path)]}}function km(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=gm(e,i);const s=function(e){if(0!==e.length)return Dm(Xd.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Rm(e.field),direction:Am(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=om(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ht:n,parent:i}}function Im(e){let t=ym(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){wu(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Cm(e);return t instanceof Xd&&tf(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Gd(Pm(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Cc(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Hd(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new Hd(n,t)}(n.endAt)),kf(t,i,o,s,a,"F",l,u)}function Cm(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Pm(e.unaryFilter.field);return Jd.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Pm(e.unaryFilter.field);return Jd.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Pm(e.unaryFilter.field);return Jd.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Pm(e.unaryFilter.field);return Jd.create(i,"!=",{nullValue:"NULL_VALUE"});default:return vu()}}(e):void 0!==e.fieldFilter?function(e){return Jd.create(Pm(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return vu()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Xd.create(e.compositeFilter.filters.map((e=>Cm(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return vu()}}(e.compositeFilter.op))}(e):vu()}function Am(e){return nm[e]}function xm(e){return rm[e]}function Nm(e){return im[e]}function Rm(e){return{fieldPath:e.canonicalString()}}function Pm(e){return Qu.fromServerFormat(e.fieldPath)}function Dm(e){return e instanceof Jd?function(e){if("=="===e.op){if(Pd(e.value))return{unaryFilter:{field:Rm(e.field),op:"IS_NAN"}};if(Rd(e.value))return{unaryFilter:{field:Rm(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Pd(e.value))return{unaryFilter:{field:Rm(e.field),op:"IS_NOT_NAN"}};if(Rd(e.value))return{unaryFilter:{field:Rm(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rm(e.field),op:xm(e.op),value:e.value}}}(e):e instanceof Xd?function(e){const t=e.getFilters().map((e=>Dm(e)));return 1===t.length?t[0]:{compositeFilter:{op:Nm(e.op),filters:t}}}(e):vu()}function Om(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Lm(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Mm{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:$u.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:$u.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Xh.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Mm(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Mm(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Mm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Mm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Fm{constructor(e){this.Tt=e}}function Um(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Vm(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:pm(e,t.key),fields:t.data.value.mapValue.fields,updateTime:am(e,t.version.toTimestamp()),createTime:am(e,t.createTime.toTimestamp())}}(e.Tt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:zm(t.version)};else{if(!t.isUnknownDocument())return vu();r.unknownDocument={path:n.path.toArray(),version:zm(t.version)}}return r}function Vm(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function zm(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function jm(e){const t=new qu(e.seconds,e.nanoseconds);return $u.fromTimestamp(t)}function Bm(e,t){const n=(t.baseMutations||[]).map((t=>Sm(e.Tt,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>Sm(e.Tt,t))),i=qu.fromMillis(t.localWriteTimeMs);return new Dp(t.batchId,i,n,r)}function qm(e){const t=jm(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?jm(e.lastLimboFreeSnapshotVersion):$u.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return wu(1===e.documents.length),Nf(If(ym(e.documents[0])))}(e.query):function(e){return Nf(Im(e))}(e.query),new Mm(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Xh.fromBase64String(e.resumeToken))}function $m(e,t){const n=zm(t.snapshotVersion),r=zm(t.lastLimboFreeSnapshotVersion);let i;i=bf(t.target)?Tm(e.Tt,t.target):km(e.Tt,t.target).ht;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:vf(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Hm(e){const t=Im({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Df(t,t.limit,"L"):t}function Wm(e,t){return new Lp(t.largestBatchId,Sm(e.Tt,t.overlayMutation))}function Km(e,t){const n=t.path.lastSegment();return[e,Rc(t.path.popLast()),n]}function Gm(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:zm(r.readTime),documentKey:Rc(r.documentKey.path),largestBatchId:r.largestBatchId}}class Qm{getBundleMetadata(e,t){return Ym(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:jm(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return Ym(e).put(function(e){return{bundleId:e.id,createTime:zm(cm(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return Jm(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:Hm(e.bundledQuery),readTime:jm(e.readTime)}}(e)}))}saveNamedQuery(e,t){return Jm(e).put(function(e){return{name:e.name,readTime:zm(cm(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Ym(e){return zh(e,fh)}function Jm(e){return zh(e,ph)}class Xm{constructor(e,t){this.serializer=e,this.userId=t}static It(e,t){const n=t.uid||"";return new Xm(e,n)}getOverlay(e,t){return Zm(e).get(Km(this.userId,t)).next((e=>e?Wm(this.serializer,e):null))}getOverlays(e,t){const n=Kf();return cc.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new Lp(t,i);r.push(this.Et(e,s))})),cc.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Rc(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(Zm(e).J(Ch,r))})),cc.waitFor(i)}getOverlaysForCollection(e,t,n){const r=Kf(),i=Rc(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Zm(e).G(Ch,s).next((e=>{for(const t of e){const e=Wm(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=Kf();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Zm(e).Z({index:xh,range:o},((e,t,n)=>{const o=Wm(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}Et(e,t){return Zm(e).put(function(e,t,n){const[r,i,s]=Km(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Em(e.Tt,n.mutation)}}(this.serializer,this.userId,t))}}function Zm(e){return zh(e,kh)}class eg{dt(e){return zh(e,Rh)}getSessionToken(e){return this.dt(e).get("sessionToken").next((e=>{const t=null==e?void 0:e.value;return t?Xh.fromUint8Array(t):Xh.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class tg{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(td(e.integerValue));else if("doubleValue"in e){const n=td(e.doubleValue);isNaN(n)?this.ft(t,13):(this.ft(t,15),Ac(n)?t.gt(0):t.gt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.ft(t,20),"string"==typeof n&&(n=ed(n)),t.yt(`${n.seconds||""}`),t.gt(n.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.St(t);else if("bytesValue"in e)this.ft(t,30),t.bt(nd(e.bytesValue)),this.St(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ft(t,45),t.gt(n.latitude||0),t.gt(n.longitude||0)}else"mapValue"in e?Md(e)?this.ft(t,Number.MAX_SAFE_INTEGER):Od(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.St(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.St(t)):vu()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const n=e.fields||{};this.ft(t,55);for(const r of Object.keys(n))this.wt(r,t),this.Rt(n[r],t)}vt(e,t){var n,r;const i=e.fields||{};this.ft(t,53);const s=yd,o=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.ft(t,15),t.gt(td(o)),this.wt(s,t),this.Rt(i[s],t)}Ft(e,t){const n=e.values||[];this.ft(t,50);for(const r of n)this.Rt(r,t)}Dt(e,t){this.ft(t,37),Yu.fromName(e).path.forEach((e=>{this.ft(t,60),this.Mt(e,t)}))}ft(e,t){e.gt(t)}St(e){e.gt(2)}}tg.xt=new tg;const ng=255;function rg(e){if(0===e)return 8;let t=0;return e>>4||(t+=4,e<<=4),e>>6||(t+=2,e<<=2),e>>7||(t+=1),t}function ig(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=rg(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}class sg{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Nt(n.value),n=t.next();this.Bt()}Lt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.kt(n.value),n=t.next();this.qt()}Qt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Nt(e);else if(e<2048)this.Nt(960|e>>>6),this.Nt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Nt(480|e>>>12),this.Nt(128|63&e>>>6),this.Nt(128|63&e);else{const e=t.codePointAt(0);this.Nt(240|e>>>18),this.Nt(128|63&e>>>12),this.Nt(128|63&e>>>6),this.Nt(128|63&e)}}this.Bt()}$t(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.kt(e);else if(e<2048)this.kt(960|e>>>6),this.kt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.kt(480|e>>>12),this.kt(128|63&e>>>6),this.kt(128|63&e);else{const e=t.codePointAt(0);this.kt(240|e>>>18),this.kt(128|63&e>>>12),this.kt(128|63&e>>>6),this.kt(128|63&e)}}this.qt()}Ut(e){const t=this.Kt(e),n=ig(t);this.Wt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Gt(e){const t=this.Kt(e),n=ig(t);this.Wt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}zt(){this.jt(ng),this.jt(255)}Ht(){this.Jt(ng),this.Jt(255)}reset(){this.position=0}seed(e){this.Wt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Yt(){return this.buffer.slice(0,this.position)}Kt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Nt(e){const t=255&e;0===t?(this.jt(0),this.jt(255)):t===ng?(this.jt(ng),this.jt(0)):this.jt(t)}kt(e){const t=255&e;0===t?(this.Jt(0),this.Jt(255)):t===ng?(this.Jt(ng),this.Jt(0)):this.Jt(e)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(e){this.Wt(1),this.buffer[this.position++]=e}Jt(e){this.Wt(1),this.buffer[this.position++]=~e}Wt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class og{constructor(e){this.Zt=e}bt(e){this.Zt.Ot(e)}yt(e){this.Zt.Qt(e)}gt(e){this.Zt.Ut(e)}Vt(){this.Zt.zt()}}class ag{constructor(e){this.Zt=e}bt(e){this.Zt.Lt(e)}yt(e){this.Zt.$t(e)}gt(e){this.Zt.Gt(e)}Vt(){this.Zt.Ht()}}class lg{constructor(){this.Zt=new sg,this.Xt=new og(this.Zt),this.en=new ag(this.Zt)}seed(e){this.Zt.seed(e)}tn(e){return 0===e?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}class ug{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}nn(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new ug(this.indexId,this.documentKey,this.arrayValue,n)}}function cg(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=hg(e.arrayValue,t.arrayValue),0!==n?n:(n=hg(e.directionalValue,t.directionalValue),0!==n?n:Yu.comparator(e.documentKey,t.documentKey)))}function hg(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class dg{constructor(e){this.rn=new Kh(((e,t)=>Qu.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.sn=e.orderBy,this._n=[];for(const t of e.filters){const e=t;e.isInequality()?this.rn=this.rn.add(e):this._n.push(e)}}get an(){return this.rn.size>1}un(e){if(wu(e.collectionGroup===this.collectionId),this.an)return!1;const t=Zu(e);if(void 0!==t&&!this.cn(t))return!1;const n=ec(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.cn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.rn.size>0){const e=this.rn.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.ln(e,t)||!this.hn(this.sn[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.sn.length||!this.hn(this.sn[s++],e))return!1}return!0}Pn(){if(this.an)return null;let e=new Kh(Qu.comparator);const t=[];for(const n of this._n)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new tc(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new tc(n.field,0))}for(const n of this.sn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new tc(n.field,"asc"===n.dir?0:1)));return new Xu(Xu.UNKNOWN_ID,this.collectionId,t,nc.empty())}cn(e){for(const t of this._n)if(this.ln(t,e))return!0;return!1}ln(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}hn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function fg(e){var t,n;if(wu(e instanceof Jd||e instanceof Xd),e instanceof Jd){if(e instanceof ff){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>Jd.create(e.field,"==",t))))||[];return Xd.create(r,"or")}return e}const r=e.filters.map((e=>fg(e)));return Xd.create(r,e.op)}function pg(e){if(0===e.getFilters().length)return[];const t=vg(fg(e));return wu(yg(t)),mg(t)||gg(t)?[t]:t.getFilters()}function mg(e){return e instanceof Jd}function gg(e){return e instanceof Xd&&tf(e)}function yg(e){return mg(e)||gg(e)||function(e){if(e instanceof Xd&&ef(e)){for(const t of e.getFilters())if(!mg(t)&&!gg(t))return!1;return!0}return!1}(e)}function vg(e){if(wu(e instanceof Jd||e instanceof Xd),e instanceof Jd)return e;if(1===e.filters.length)return vg(e.filters[0]);const t=e.filters.map((e=>vg(e)));let n=Xd.create(t,e.op);return n=_g(n),yg(n)?n:(wu(n instanceof Xd),wu(Zd(n)),wu(n.filters.length>1),n.filters.reduce(((e,t)=>wg(e,t))))}function wg(e,t){let n;return wu(e instanceof Jd||e instanceof Xd),wu(t instanceof Jd||t instanceof Xd),n=e instanceof Jd?t instanceof Jd?function(e,t){return Xd.create([e,t],"and")}(e,t):bg(e,t):t instanceof Jd?bg(t,e):function(e,t){if(wu(e.filters.length>0&&t.filters.length>0),Zd(e)&&Zd(t))return of(e,t.getFilters());const n=ef(e)?e:t,r=ef(e)?t:e,i=n.filters.map((e=>wg(e,r)));return Xd.create(i,"or")}(e,t),_g(n)}function bg(e,t){if(Zd(t))return of(t,e.getFilters());{const n=t.filters.map((t=>wg(e,t)));return Xd.create(n,"or")}}function _g(e){if(wu(e instanceof Jd||e instanceof Xd),e instanceof Jd)return e;const t=e.getFilters();if(1===t.length)return _g(t[0]);if(nf(e))return e;const n=t.map((e=>_g(e))),r=[];return n.forEach((t=>{t instanceof Jd?r.push(t):t instanceof Xd&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:Xd.create(r,e.op)}class Eg{constructor(){this.Tn=new Sg}addToCollectionParentIndex(e,t){return this.Tn.add(t),cc.resolve()}getCollectionParents(e,t){return cc.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return cc.resolve()}deleteFieldIndex(e,t){return cc.resolve()}deleteAllFieldIndexes(e){return cc.resolve()}createTargetIndexes(e,t){return cc.resolve()}getDocumentsMatchingTarget(e,t){return cc.resolve(null)}getIndexType(e,t){return cc.resolve(0)}getFieldIndexes(e,t){return cc.resolve([])}getNextCollectionGroupToUpdate(e){return cc.resolve(null)}getMinOffset(e,t){return cc.resolve(sc.min())}getMinOffsetFromCollectionGroup(e,t){return cc.resolve(sc.min())}updateCollectionGroup(e,t,n){return cc.resolve()}updateIndexEntries(e,t){return cc.resolve()}}class Sg{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Kh(Ku.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Kh(Ku.comparator)).toArray()}}const Tg="IndexedDbIndexManager",kg=new Uint8Array(0);class Ig{constructor(e,t){this.databaseId=t,this.In=new Sg,this.En=new jf((e=>vf(e)),((e,t)=>wf(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.In.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.In.add(t)}));const i={collectionId:n,parent:Rc(r)};return Cg(e).put(i)}return cc.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[zu(t),""],!1,!0);return Cg(e).G(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Oc(r.parent))}return n}))}addFieldIndex(e,t){const n=xg(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Ng(e);return i.next((e=>{n.put(Gm(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=xg(e),r=Ng(e),i=Ag(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=xg(e),n=Ag(e),r=Ng(e);return t.J().next((()=>n.J())).next((()=>r.J()))}createTargetIndexes(e,t){return cc.forEach(this.dn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new dg(t).Pn();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=Ag(e);let r=!0;const i=new Map;return cc.forEach(this.dn(t),(t=>this.An(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=Xf();const r=[];return cc.forEach(i,((i,s)=>{pu(Tg,`Using index ${function(e){return`id=${e.indexId}|cg=${e.collectionGroup}|f=${e.fields.map((e=>`${e.fieldPath}:${e.kind}`)).join(",")}`}(i)} to execute ${vf(t)}`);const o=function(e,t){const n=Zu(t);if(void 0===n)return null;for(const r of _f(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of ec(t))for(const t of _f(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of ec(t)){const t=0===i.kind?Ef(e,i.fieldPath,e.startAt):Sf(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Hd(n,r)}(s,i),u=function(e,t){const n=[];let r=!0;for(const i of ec(t)){const t=0===i.kind?Sf(e,i.fieldPath,e.endAt):Ef(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Hd(n,r)}(s,i),c=this.Rn(i,s,l),h=this.Rn(i,s,u),d=this.Vn(i,s,a),f=this.mn(i.indexId,o,c,l.inclusive,h,u.inclusive,d);return cc.forEach(f,(i=>n.H(i,t.limit).next((t=>{t.forEach((t=>{const n=Yu.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return cc.resolve(null)}))}dn(e){let t=this.En.get(e);return t||(t=0===e.filters.length?[e]:pg(Xd.create(e.filters,"and")).map((t=>yf(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.En.set(e,t),t)}mn(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),u=[];for(let c=0;c<a;++c){const a=t?this.fn(t[c/l]):kg,h=this.gn(e,a,n[c%l],r),d=this.pn(e,a,i[c%l],s),f=o.map((t=>this.gn(e,a,t,!0)));u.push(...this.createRange(h,d,f))}return u}gn(e,t,n,r){const i=new ug(e,Yu.empty(),t,n);return r?i:i.nn()}pn(e,t,n,r){const i=new ug(e,Yu.empty(),t,n);return r?i.nn():i}An(e,t){const n=new dg(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.un(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.dn(t);return cc.forEach(r,(t=>this.An(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new Kh(Qu.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}yn(e,t){const n=new lg;for(const r of ec(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.tn(r.kind);tg.xt.At(e,i)}return n.Yt()}fn(e){const t=new lg;return tg.xt.At(e,t.tn(0)),t.Yt()}wn(e,t){const n=new lg;return tg.xt.At(Ad(this.databaseId,t),n.tn(function(e){const t=ec(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Yt()}Vn(e,t,n){if(null===n)return[];let r=[];r.push(new lg);let i=0;for(const s of ec(e)){const e=n[i++];for(const n of r)if(this.Sn(t,s.fieldPath)&&Nd(e))r=this.bn(r,s,e);else{const t=n.tn(s.kind);tg.xt.At(e,t)}}return this.Dn(r)}Rn(e,t,n){return this.Vn(e,t,n.position)}Dn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Yt();return t}bn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new lg;n.seed(e.Yt()),tg.xt.At(s,n.tn(t.kind)),i.push(n)}return i}Sn(e,t){return!!e.filters.find((e=>e instanceof Jd&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=xg(e),r=Ng(e);return(t?n.G(gh,IDBKeyRange.bound(t,t)):n.G()).next((e=>{const t=[];return cc.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new nc(t.sequenceNumber,new sc(jm(t.readTime),new Yu(Oc(t.documentKey)),t.largestBatchId)):nc.empty(),r=e.fields.map((e=>{let[t,n]=e;return new tc(Qu.fromServerFormat(t),n)}));return new Xu(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Lu(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=xg(e),i=Ng(e);return this.vn(e).next((e=>r.G(gh,IDBKeyRange.bound(t,t)).next((t=>cc.forEach(t,(t=>i.put(Gm(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return cc.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?cc.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),cc.forEach(i,(n=>this.Cn(e,t,n).next((t=>{const i=this.Fn(r,n);return t.isEqual(i)?cc.resolve():this.Mn(e,r,n,t,i)})))))))}))}xn(e,t,n,r){return Ag(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.wn(n,t.key),documentKey:t.key.path.toArray()})}On(e,t,n,r){return Ag(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.wn(n,t.key),t.key.path.toArray()])}Cn(e,t,n){const r=Ag(e);let i=new Kh(cg);return r.Z({index:Sh,range:IDBKeyRange.only([n.indexId,this.uid,this.wn(n,t)])},((e,r)=>{i=i.add(new ug(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}Fn(e,t){let n=new Kh(cg);const r=this.yn(t,e);if(null==r)return n;const i=Zu(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Nd(s))for(const i of s.arrayValue.values||[])n=n.add(new ug(t.indexId,e.key,this.fn(i),r))}else n=n.add(new ug(t.indexId,e.key,kg,r));return n}Mn(e,t,n,r,i){pu(Tg,"Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=Qh(s),l=Qh(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=Qh(o)):t?(i(a),a=Qh(s)):(a=Qh(s),l=Qh(o))}}(r,i,cg,(r=>{s.push(this.xn(e,t,n,r))}),(r=>{s.push(this.On(e,t,n,r))})),cc.waitFor(s)}vn(e){let t=1;return Ng(e).Z({index:wh,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>cg(e,t))).filter(((e,t,n)=>!t||0!==cg(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=cg(s,e),i=cg(s,t);if(0===n)r[0]=e.nn();else if(n>0&&i<0)r.push(s),r.push(s.nn());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.Nn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,kg,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,kg,[]];i.push(IDBKeyRange.bound(e,t))}return i}Nn(e,t){return cg(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Rg)}getMinOffset(e,t){return cc.mapArray(this.dn(t),(t=>this.An(e,t).next((e=>e||vu())))).next(Rg)}}function Cg(e){return zh(e,ch)}function Ag(e){return zh(e,_h)}function xg(e){return zh(e,mh)}function Ng(e){return zh(e,yh)}function Rg(e){wu(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;oc(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new sc(t.readTime,t.documentKey,n)}const Pg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Dg=41943040;class Og{static withCacheSize(e){return new Og(e,Og.DEFAULT_COLLECTION_PERCENTILE,Og.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}function Lg(e,t,n){const r=e.store(Vc),i=e.store(Wc),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Z({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{wu(1===a)})));const u=[];for(const c of n.mutations){const e=$c(t,c.key.path,n.batchId);s.push(i.delete(e)),u.push(c.key)}return cc.waitFor(s).next((()=>u))}function Mg(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw vu();t=e.noDocument}return JSON.stringify(t).length}Og.DEFAULT_COLLECTION_PERCENTILE=10,Og.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Og.DEFAULT=new Og(Dg,Og.DEFAULT_COLLECTION_PERCENTILE,Og.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Og.DISABLED=new Og(-1,0,0);class Fg{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Bn={}}static It(e,t,n,r){wu(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Fg(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vg(e).Z({index:jc,range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=zg(e),s=Vg(e);return s.add({}).next((o=>{wu("number"==typeof o);const a=new Dp(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>Em(e.Tt,t))),i=n.mutations.map((t=>Em(e.Tt,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),u=[];let c=new Kh(((e,t)=>Lu(e.canonicalString(),t.canonicalString())));for(const e of r){const t=$c(this.userId,e.key.path,o);c=c.add(e.key.path.popLast()),u.push(s.put(l)),u.push(i.put(t,Hc))}return c.forEach((t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Bn[o]=a.keys()})),cc.waitFor(u).next((()=>a))}))}lookupMutationBatch(e,t){return Vg(e).get(t).next((e=>e?(wu(e.userId===this.userId),Bm(this.serializer,e)):null))}Ln(e,t){return this.Bn[t]?cc.resolve(this.Bn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Bn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Vg(e).Z({index:jc,range:r},((e,t,r)=>{t.userId===this.userId&&(wu(t.batchId>=n),i=Bm(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=Ic;return Vg(e).Z({index:jc,range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Ic],[this.userId,Number.POSITIVE_INFINITY]);return Vg(e).G(jc,t).next((e=>e.map((e=>Bm(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=qc(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return zg(e).Z({range:r},((n,r,s)=>{const[o,a,l]=n,u=Oc(a);if(o===this.userId&&t.path.isEqual(u))return Vg(e).get(l).next((e=>{if(!e)throw vu();wu(e.userId===this.userId),i.push(Bm(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Kh(Lu);const r=[];return t.forEach((t=>{const i=qc(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=zg(e).Z({range:s},((e,r,i)=>{const[s,o,a]=e,l=Oc(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),cc.waitFor(r).next((()=>this.kn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=qc(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new Kh(Lu);return zg(e).Z({range:s},((e,t,i)=>{const[s,a,l]=e,u=Oc(a);s===this.userId&&n.isPrefixOf(u)?u.length===r&&(o=o.add(l)):i.done()})).next((()=>this.kn(e,o)))}kn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Vg(e).get(t).next((e=>{if(null===e)throw vu();wu(e.userId===this.userId),n.push(Bm(this.serializer,e))})))})),cc.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return Lg(e.ue,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.qn(t.batchId)})),cc.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}qn(e){delete this.Bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return cc.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return zg(e).Z({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Oc(e[1]);r.push(t)}else n.done()})).next((()=>{wu(0===r.length)}))}))}containsKey(e,t){return Ug(e,this.userId,t)}Qn(e){return jg(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:Ic,lastStreamToken:""}))}}function Ug(e,t,n){const r=qc(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return zg(e).Z({range:s,Y:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function Vg(e){return zh(e,Vc)}function zg(e){return zh(e,Wc)}function jg(e){return zh(e,Uc)}class Bg{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Bg(0)}static Kn(){return new Bg(-1)}}class qg{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Wn(e).next((t=>{const n=new Bg(t.highestTargetId);return t.highestTargetId=n.next(),this.Gn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Wn(e).next((e=>$u.fromTimestamp(new qu(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Wn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Wn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Gn(e,r))))}addTargetData(e,t){return this.zn(e,t).next((()=>this.Wn(e).next((n=>(n.targetCount+=1,this.jn(t,n),this.Gn(e,n))))))}updateTargetData(e,t){return this.zn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>$g(e).delete(t.targetId))).next((()=>this.Wn(e))).next((t=>(wu(t.targetCount>0),t.targetCount-=1,this.Gn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return $g(e).Z(((s,o)=>{const a=qm(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>cc.waitFor(i))).next((()=>r))}forEachTarget(e,t){return $g(e).Z(((e,n)=>{const r=qm(n);t(r)}))}Wn(e){return Hg(e).get(lh).next((e=>(wu(null!==e),e)))}Gn(e,t){return Hg(e).put(lh,t)}zn(e,t){return $g(e).put($m(this.serializer,t))}jn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Wn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=vf(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return $g(e).Z({range:r,index:nh},((e,n,r)=>{const s=qm(n);wf(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Wg(e);return t.forEach((t=>{const s=Rc(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),cc.waitFor(r)}removeMatchingKeys(e,t,n){const r=Wg(e);return cc.forEach(t,(t=>{const i=Rc(t.path);return cc.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Wg(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Wg(e);let i=Xf();return r.Z({range:n,Y:!0},((e,t,n)=>{const r=Oc(e[1]),s=new Yu(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=Rc(t.path),r=IDBKeyRange.bound([n],[zu(n)],!1,!0);let i=0;return Wg(e).Z({index:oh,Y:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}lt(e,t){return $g(e).get(t).next((e=>e?qm(e):null))}}function $g(e){return zh(e,th)}function Hg(e){return zh(e,uh)}function Wg(e){return zh(e,ih)}const Kg="LruGarbageCollector",Gg=1048576;function Qg(e,t){let[n,r]=e,[i,s]=t;const o=Lu(n,i);return 0===o?Lu(r,s):o}class Yg{constructor(e){this.Hn=e,this.buffer=new Kh(Qg),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Qg(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Jg{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Xn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return null!==this.Xn}er(e){pu(Kg,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){yc(e)?pu(Kg,"Ignoring IndexedDB error during garbage collection: ",e):await uc(e)}await this.er(3e5)}))}}class Xg{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return cc.resolve(kc.ae);const n=new Yg(t);return this.tr.forEachTarget(e,(e=>n.Zn(e.sequenceNumber))).next((()=>this.tr.rr(e,(e=>n.Zn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.tr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(pu("LruGarbageCollector","Garbage collection skipped; disabled"),cc.resolve(Pg)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(pu("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Pg):this.ir(e,t)))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let n,r,i,s,o,a,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(pu("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),fu()<=Ht.DEBUG&&pu("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-u}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${e} documents in `+(l-a)+"ms\n"+`Total Duration: ${l-u}ms`),cc.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function Zg(e,t){return new Xg(e,t)}class ey{constructor(e,t){this.db=e,this.garbageCollector=Zg(this,t)}nr(e){const t=this.sr(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}sr(e){let t=0;return this.rr(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}rr(e,t){return this._r(e,((e,n)=>t(n)))}addReference(e,t,n){return ty(e,n)}removeReference(e,t,n){return ty(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return ty(e,t)}ar(e,t){return function(e,t){let n=!1;return jg(e).X((r=>Ug(e,r,t).next((e=>(e&&(n=!0),cc.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this._r(e,((s,o)=>{if(o<=t){const t=this.ar(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,$u.min()),Wg(e).delete(function(e){return[0,Rc(e.path)]}(s)))))}));r.push(t)}})).next((()=>cc.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return ty(e,t)}_r(e,t){const n=Wg(e);let r,i=kc.ae;return n.Z({index:oh},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:l}=n;0===s?(i!==kc.ae&&t(new Yu(Oc(r)),i),i=l,r=a):i=kc.ae})).next((()=>{i!==kc.ae&&t(new Yu(Oc(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ty(e,t){return Wg(e).put(function(e,t){return{targetId:0,path:Rc(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class ny{constructor(){this.changes=new jf((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$d.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?cc.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ry{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return ay(e).put(n)}removeEntry(e,t,n){return ay(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Vm(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.ur(e,n))))}getEntry(e,t){let n=$d.newInvalidDocument(t);return ay(e).Z({index:Qc,range:IDBKeyRange.only(ly(t))},((e,r)=>{n=this.cr(t,r)})).next((()=>n))}lr(e,t){let n={size:0,document:$d.newInvalidDocument(t)};return ay(e).Z({index:Qc,range:IDBKeyRange.only(ly(t))},((e,r)=>{n={document:this.cr(t,r),size:Mg(r)}})).next((()=>n))}getEntries(e,t){let n=qf();return this.hr(e,t,((e,t)=>{const r=this.cr(e,t);n=n.insert(e,r)})).next((()=>n))}Pr(e,t){let n=qf(),r=new $h(Yu.comparator);return this.hr(e,t,((e,t)=>{const i=this.cr(e,t);n=n.insert(e,i),r=r.insert(e,Mg(t))})).next((()=>({documents:n,Tr:r})))}hr(e,t,n){if(t.isEmpty())return cc.resolve();let r=new Kh(cy);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(ly(r.first()),ly(r.last())),s=r.getIterator();let o=s.getNext();return ay(e).Z({index:Qc,range:i},((e,t,r)=>{const i=Yu.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&cy(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.W(ly(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),Vm(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ay(e).G(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=qf();for(const i of e){const e=this.cr(Yu.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Ff(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=qf();const s=uy(t,n),o=uy(t,sc.max());return ay(e).Z({index:Jc,range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.cr(Yu.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new sy(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return oy(e).get(eh).next((e=>(wu(!!e),e)))}ur(e,t){return oy(e).put(eh,t)}cr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=_m(e.Tt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Yu.fromSegments(t.noDocument.path),r=jm(t.noDocument.readTime);n=$d.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return vu();{const e=Yu.fromSegments(t.unknownDocument.path),r=jm(t.unknownDocument.version);n=$d.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new qu(e[0],e[1]);return $u.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual($u.min()))return e}return $d.newInvalidDocument(e)}}function iy(e){return new ry(e)}class sy extends ny{constructor(e,t){super(),this.Ir=e,this.trackRemovals=t,this.Er=new jf((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new Kh(((e,t)=>Lu(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.Er.get(i);if(t.push(this.Ir.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=Um(this.Ir.serializer,s);r=r.add(i.path.popLast());const l=Mg(a);n+=l-o.size,t.push(this.Ir.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=Um(this.Ir.serializer,s.convertToNoDocument($u.min()));t.push(this.Ir.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.Ir.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.Ir.updateMetadata(e,n)),cc.waitFor(t)}getFromCache(e,t){return this.Ir.lr(e,t).next((e=>(this.Er.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.Ir.Pr(e,t).next((e=>{let{documents:t,Tr:n}=e;return n.forEach(((e,n)=>{this.Er.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function oy(e){return zh(e,Zc)}function ay(e){return zh(e,Kc)}function ly(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function uy(e,t){const n=t.documentKey.path.toArray();return[e,Vm(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function cy(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Lu(n[s],r[s]),i)return i;return i=Lu(n.length,r.length),i||(i=Lu(n[n.length-2],r[r.length-2]),i||Lu(n[n.length-1],r[r.length-1]))}class hy{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class dy{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Sp(n.mutation,e,Yh.empty(),qu.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Xf()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xf();const r=Kf();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Hf();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Kf();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Xf())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=qf();const s=Qf(),o=Qf();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Cp)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Sp(o.mutation,t,o.mutation.getFieldMask(),qu.now())):s.set(t.key,Yh.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new hy(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Qf();let r=new $h(((e,t)=>e-t)),i=Xf();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Yh.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Xf()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,u=Gf();l.forEach((e=>{if(!i.has(e)){const r=_p(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return cc.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Yu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Af(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):cc.resolve(Kf());let o=Ju,a=i;return s.next((t=>cc.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?cc.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Xf()))).next((e=>({batchId:o,changes:Wf(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Yu(t)).next((e=>{let t=Hf();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Hf();return this.indexManager.getCollectionParents(e,i).next((o=>cc.forEach(o,(o=>{const a=function(e,t){return new Tf(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,$d.newInvalidDocument(r)))}));let n=Hf();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Sp(s.mutation,r,Yh.empty(),qu.now()),Ff(t,r)&&(n=n.insert(e,r))})),n}))}}class fy{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return cc.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:cm(e.createTime)}}(t)),cc.resolve()}getNamedQuery(e,t){return cc.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(e){return{name:e.name,query:Hm(e.bundledQuery),readTime:cm(e.readTime)}}(t)),cc.resolve()}}class py{constructor(){this.overlays=new $h(Yu.comparator),this.Rr=new Map}getOverlay(e,t){return cc.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Kf();return cc.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.Et(e,t,r)})),cc.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Rr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Rr.delete(n)),cc.resolve()}getOverlaysForCollection(e,t,n){const r=Kf(),i=t.length+1,s=new Yu(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return cc.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new $h(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Kf(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Kf(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return cc.resolve(o)}Et(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Rr.get(r.largestBatchId).delete(n.key);this.Rr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Lp(t,n));let i=this.Rr.get(t);void 0===i&&(i=Xf(),this.Rr.set(t,i)),this.Rr.set(t,i.add(n.key))}}class my{constructor(){this.sessionToken=Xh.EMPTY_BYTE_STRING}getSessionToken(e){return cc.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,cc.resolve()}}class gy{constructor(){this.Vr=new Kh(yy.mr),this.gr=new Kh(yy.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const n=new yy(e,t);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}yr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.wr(new yy(e,t))}Sr(e,t){e.forEach((e=>this.removeReference(e,t)))}br(e){const t=new Yu(new Ku([])),n=new yy(t,e),r=new yy(t,e+1),i=[];return this.gr.forEachInRange([n,r],(e=>{this.wr(e),i.push(e.key)})),i}Dr(){this.Vr.forEach((e=>this.wr(e)))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new Yu(new Ku([])),n=new yy(t,e),r=new yy(t,e+1);let i=Xf();return this.gr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new yy(e,0),n=this.Vr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class yy{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Yu.comparator(e.key,t.key)||Lu(e.Cr,t.Cr)}static pr(e,t){return Lu(e.Cr,t.Cr)||Yu.comparator(e.key,t.key)}}class vy{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Kh(yy.mr)}checkEmpty(e){return cc.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Dp(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Mr=this.Mr.add(new yy(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return cc.resolve(s)}lookupMutationBatch(e,t){return cc.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Nr(n),i=r<0?0:r;return cc.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return cc.resolve(0===this.mutationQueue.length?Ic:this.Fr-1)}getAllMutationBatches(e){return cc.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new yy(t,0),r=new yy(t,Number.POSITIVE_INFINITY),i=[];return this.Mr.forEachInRange([n,r],(e=>{const t=this.Or(e.Cr);i.push(t)})),cc.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Kh(Lu);return t.forEach((e=>{const t=new yy(e,0),r=new yy(e,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([t,r],(e=>{n=n.add(e.Cr)}))})),cc.resolve(this.Br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Yu.isDocumentKey(i)||(i=i.child(""));const s=new yy(new Yu(i),0);let o=new Kh(Lu);return this.Mr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Cr)),!0)}),s),cc.resolve(this.Br(o))}Br(e){const t=[];return e.forEach((e=>{const n=this.Or(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){wu(0===this.Lr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Mr;return cc.forEach(t.mutations,(r=>{const i=new yy(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Mr=n}))}qn(e){}containsKey(e,t){const n=new yy(t,0),r=this.Mr.firstAfterOrEqual(n);return cc.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,cc.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class wy{constructor(e){this.kr=e,this.docs=new $h(Yu.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.kr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return cc.resolve(n?n.document.mutableCopy():$d.newInvalidDocument(t))}getEntries(e,t){let n=qf();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():$d.newInvalidDocument(e))})),cc.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=qf();const s=t.path,o=new Yu(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||oc(ic(o),n)<=0||(r.has(o.key)||Ff(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return cc.resolve(i)}getAllFromCollectionGroup(e,t,n,r){vu()}qr(e,t){return cc.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new by(this)}getSize(e){return cc.resolve(this.size)}}class by extends ny{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Ir.addEntry(e,r)):this.Ir.removeEntry(n)})),cc.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}class _y{constructor(e){this.persistence=e,this.Qr=new jf((e=>vf(e)),wf),this.lastRemoteSnapshotVersion=$u.min(),this.highestTargetId=0,this.$r=0,this.Ur=new gy,this.targetCount=0,this.Kr=Bg.Un()}forEachTarget(e,t){return this.Qr.forEach(((e,n)=>t(n))),cc.resolve()}getLastRemoteSnapshotVersion(e){return cc.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return cc.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),cc.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$r&&(this.$r=t),cc.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new Bg(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,cc.resolve()}updateTargetData(e,t){return this.zn(t),cc.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,cc.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Qr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Qr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),cc.waitFor(i).next((()=>r))}getTargetCount(e){return cc.resolve(this.targetCount)}getTargetData(e,t){const n=this.Qr.get(t)||null;return cc.resolve(n)}addMatchingKeys(e,t,n){return this.Ur.yr(t,n),cc.resolve()}removeMatchingKeys(e,t,n){this.Ur.Sr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),cc.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),cc.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Ur.vr(t);return cc.resolve(n)}containsKey(e,t){return cc.resolve(this.Ur.containsKey(t))}}class Ey{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new kc(0),this.zr=!1,this.zr=!0,this.jr=new my,this.referenceDelegate=e(this),this.Hr=new _y(this),this.indexManager=new Eg,this.remoteDocumentCache=function(e){return new wy(e)}((e=>this.referenceDelegate.Jr(e))),this.serializer=new Fm(t),this.Yr=new fy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new py,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Wr[e.toKey()];return n||(n=new vy(t,this.referenceDelegate),this.Wr[e.toKey()]=n),n}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,n){pu("MemoryPersistence","Starting transaction:",e);const r=new Sy(this.Gr.next());return this.referenceDelegate.Zr(),n(r).next((e=>this.referenceDelegate.Xr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}ei(e,t){return cc.or(Object.values(this.Wr).map((n=>()=>n.containsKey(e,t))))}}class Sy extends lc{constructor(e){super(),this.currentSequenceNumber=e}}class Ty{constructor(e){this.persistence=e,this.ti=new gy,this.ni=null}static ri(e){return new Ty(e)}get ii(){if(this.ni)return this.ni;throw vu()}addReference(e,t,n){return this.ti.addReference(n,t),this.ii.delete(n.toString()),cc.resolve()}removeReference(e,t,n){return this.ti.removeReference(n,t),this.ii.add(n.toString()),cc.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),cc.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach((e=>this.ii.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.ii.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return cc.forEach(this.ii,(n=>{const r=Yu.fromPath(n);return this.si(e,r).next((e=>{e||t.removeEntry(r,$u.min())}))})).next((()=>(this.ni=null,t.apply(e))))}updateLimboDocument(e,t){return this.si(e,t).next((e=>{e?this.ii.delete(t.toString()):this.ii.add(t.toString())}))}Jr(e){return 0}si(e,t){return cc.or([()=>cc.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class ky{constructor(e,t){this.persistence=e,this.oi=new jf((e=>Rc(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=Zg(this,t)}static ri(e,t){return new ky(e,t)}Zr(){}Xr(e){return cc.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}sr(e){let t=0;return this.rr(e,(e=>{t++})).next((()=>t))}rr(e,t){return cc.forEach(this.oi,((n,r)=>this.ar(e,n,r).next((e=>e?cc.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.qr(e,(r=>this.ar(e,r,t).next((e=>{e||(n++,i.removeEntry(r,$u.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),cc.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),cc.resolve()}removeReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),cc.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),cc.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Cd(e.data.value)),t}ar(e,t,n){return cc.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.oi.get(t);return cc.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Iy{constructor(e){this.serializer=e}B(e,t,n,r){const i=new dc("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(Mc)}(e),function(e){e.createObjectStore(Uc,{keyPath:"userId"});e.createObjectStore(Vc,{keyPath:zc,autoIncrement:!0}).createIndex(jc,Bc,{unique:!0}),e.createObjectStore(Wc)}(e),Cy(e),function(e){e.createObjectStore(Lc)}(e));let s=cc.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(ih),e.deleteObjectStore(th),e.deleteObjectStore(uh)}(e),Cy(e)),s=s.next((()=>function(e){const t=e.store(uh),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:$u.min().toTimestamp(),targetCount:0};return t.put(lh,n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store(Vc).G().next((n=>{e.deleteObjectStore(Vc),e.createObjectStore(Vc,{keyPath:zc,autoIncrement:!0}).createIndex(jc,Bc,{unique:!0});const r=t.store(Vc),i=n.map((e=>r.put(e)));return cc.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore(dh,{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this._i(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore(Zc)}(e),this.ai(i))))),n<7&&r>=7&&(s=s.next((()=>this.ui(i)))),n<8&&r>=8&&(s=s.next((()=>this.ci(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.li(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore(fh,{keyPath:"bundleId"})}(e),function(e){e.createObjectStore(ph,{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore(kh,{keyPath:Ih});t.createIndex(Ch,Ah,{unique:!1}),t.createIndex(xh,Nh,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore(Kc,{keyPath:Gc});t.createIndex(Qc,Yc),t.createIndex(Jc,Xc)}(e))).next((()=>this.hi(e,i))).next((()=>e.deleteObjectStore(Lc)))),n<14&&r>=14&&(s=s.next((()=>this.Pi(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore(mh,{keyPath:"indexId",autoIncrement:!0}).createIndex(gh,"collectionGroup",{unique:!1});e.createObjectStore(yh,{keyPath:vh}).createIndex(wh,bh,{unique:!1});e.createObjectStore(_h,{keyPath:Eh}).createIndex(Sh,Th,{unique:!1})}(e)))),n<16&&r>=16&&(s=s.next((()=>{t.objectStore(yh).clear()})).next((()=>{t.objectStore(_h).clear()}))),n<17&&r>=17&&(s=s.next((()=>{!function(e){e.createObjectStore(Rh,{keyPath:"name"})}(e)}))),s}ai(e){let t=0;return e.store(Lc).Z(((e,n)=>{t+=Mg(n)})).next((()=>{const n={byteSize:t};return e.store(Zc).put(eh,n)}))}_i(e){const t=e.store(Uc),n=e.store(Vc);return t.G().next((t=>cc.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,Ic],[t.userId,t.lastAcknowledgedBatchId]);return n.G(jc,r).next((n=>cc.forEach(n,(n=>{wu(n.userId===t.userId);const r=Bm(this.serializer,n);return Lg(e,t.userId,r).next((()=>{}))}))))}))))}ui(e){const t=e.store(ih),n=e.store(Lc);return e.store(uh).get(lh).next((e=>{const r=[];return n.Z(((n,i)=>{const s=new Ku(n),o=function(e){return[0,Rc(e)]}(s);r.push(t.get(o).next((n=>n?cc.resolve():(n=>t.put({targetId:0,path:Rc(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>cc.waitFor(r)))}))}ci(e,t){e.createObjectStore(ch,{keyPath:hh});const n=t.store(ch),r=new Sg,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Rc(r)})}};return t.store(Lc).Z({Y:!0},((e,t)=>{const n=new Ku(e);return i(n.popLast())})).next((()=>t.store(Wc).Z({Y:!0},((e,t)=>{let[n,r,s]=e;const o=Oc(r);return i(o.popLast())}))))}li(e){const t=e.store(th);return t.Z(((e,n)=>{const r=qm(n),i=$m(this.serializer,r);return t.put(i)}))}hi(e,t){const n=t.store(Lc),r=[];return n.Z(((e,n)=>{const i=t.store(Kc),s=function(e){return e.document?new Yu(Ku.fromString(e.document.name).popFirst(5)):e.noDocument?Yu.fromSegments(e.noDocument.path):e.unknownDocument?Yu.fromSegments(e.unknownDocument.path):vu()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>cc.waitFor(r)))}Pi(e,t){const n=t.store(Vc),r=iy(this.serializer),i=new Ey(Ty.ri,this.serializer.Tt);return n.G().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Xf();Bm(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),cc.forEach(n,((e,n)=>{const s=new cu(n),o=Xm.It(this.serializer,s),a=i.getIndexManager(s),l=Fg.It(s,this.serializer,a,i.referenceDelegate);return new dy(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new Vh(t,kc.ae),e).next()}))}))}}function Cy(e){e.createObjectStore(ih,{keyPath:sh}).createIndex(oh,ah,{unique:!0}),e.createObjectStore(th,{keyPath:"targetId"}).createIndex(nh,rh,{unique:!0}),e.createObjectStore(uh)}const Ay="IndexedDbPersistence",xy=18e5,Ny=5e3,Ry="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Py="main";class Dy{constructor(e,t,n,r,i,s,o,a,l,u){let c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:17;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Ti=i,this.window=s,this.document=o,this.Ii=l,this.Ei=u,this.di=c,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=e=>Promise.resolve(),!Dy.D())throw new Eu(_u.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ey(this,r),this.gi=t+Py,this.serializer=new Fm(a),this.pi=new fc(this.gi,this.di,new Iy(this.serializer)),this.jr=new eg,this.Hr=new qg(this.referenceDelegate,this.serializer),this.remoteDocumentCache=iy(this.serializer),this.Yr=new Qm,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,!1===u&&mu(Ay,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Eu(_u.FAILED_PRECONDITION,Ry);return this.Si(),this.bi(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Hr.getHighestSequenceNumber(e)))})).then((e=>{this.Gr=new kc(e,this.Ii)})).then((()=>{this.zr=!0})).catch((e=>(this.pi&&this.pi.close(),Promise.reject(e))))}Ci(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.pi.k((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ti.enqueueAndForget((async()=>{this.started&&await this.wi()})))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Ly(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Fi(e).next((e=>{e||(this.isPrimary=!1,this.Ti.enqueueRetryable((()=>this.fi(!1))))}))})).next((()=>this.Mi(e))).next((t=>this.isPrimary&&!t?this.xi(e).next((()=>!1)):!!t&&this.Oi(e).next((()=>!0)))))).catch((e=>{if(yc(e))return pu(Ay,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return pu(Ay,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ti.enqueueRetryable((()=>this.fi(e))),this.isPrimary=e}))}Fi(e){return Oy(e).get(Fc).next((e=>cc.resolve(this.Ni(e))))}Bi(e){return Ly(e).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,xy)){this.mi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=zh(e,dh);return t.G().next((e=>{const n=this.qi(e,xy),r=e.filter((e=>-1===n.indexOf(e)));return cc.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.yi)for(const t of e)this.yi.removeItem(this.Qi(t.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.wi().then((()=>this.Li())).then((()=>this.Di()))))}Ni(e){return!!e&&e.ownerId===this.clientId}Mi(e){return this.Ei?cc.resolve(!0):Oy(e).get(Fc).next((t=>{if(null!==t&&this.ki(t.leaseTimestampMs,Ny)&&!this.$i(t.ownerId)){if(this.Ni(t)&&this.networkEnabled)return!0;if(!this.Ni(t)){if(!t.allowTabSynchronization)throw new Eu(_u.FAILED_PRECONDITION,Ry);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ly(e).G().next((e=>void 0===this.qi(e,Ny).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&pu(Ay,`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.zr=!1,this.Ui(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ki(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[Mc,dh],(e=>{const t=new Vh(e,kc.ae);return this.xi(t).next((()=>this.Bi(t)))})),this.pi.close(),this.Gi()}qi(e,t){return e.filter((e=>this.ki(e.updateTimeMs,t)&&!this.$i(e.clientId)))}zi(){return this.runTransaction("getActiveClients","readonly",(e=>Ly(e).G().next((e=>this.qi(e,xy).map((e=>e.clientId))))))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(e,t){return Fg.It(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Ig(e,this.serializer.Tt.databaseId)}getDocumentOverlayCache(e){return Xm.It(this.serializer,e)}getBundleCache(){return this.Yr}runTransaction(e,t,n){pu(Ay,"Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 17===e?Uh:16===e?Fh:15===e?Mh:14===e?Lh:13===e?Oh:12===e?Dh:11===e?Ph:void vu()}(this.di);let s;return this.pi.runTransaction(e,r,i,(r=>(s=new Vh(r,this.Gr?this.Gr.next():kc.ae),"readwrite-primary"===t?this.Fi(s).next((e=>!!e||this.Mi(s))).next((t=>{if(!t)throw mu(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable((()=>this.fi(!1))),new Eu(_u.FAILED_PRECONDITION,ac);return n(s)})).next((e=>this.Oi(s).next((()=>e)))):this.ji(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}ji(e){return Oy(e).get(Fc).next((e=>{if(null!==e&&this.ki(e.leaseTimestampMs,Ny)&&!this.$i(e.ownerId)&&!this.Ni(e)&&!(this.Ei||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Eu(_u.FAILED_PRECONDITION,Ry)}))}Oi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Oy(e).put(Fc,t)}static D(){return fc.D()}xi(e){const t=Oy(e);return t.get(Fc).next((e=>this.Ni(e)?(pu(Ay,"Releasing primary lease."),t.delete(Fc)):cc.resolve()))}ki(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(mu(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Si(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ri=()=>{this.Ti.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.wi())))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground="visible"===this.document.visibilityState)}Ki(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}bi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ai=()=>{this.Ui();const e=/(?:Version|Mobile)\/1[456]/;kt()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(e){var t;try{const n=null!==(null===(t=this.yi)||void 0===t?void 0:t.getItem(this.Qi(e)));return pu(Ay,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return mu(Ay,"Failed to get zombied client id.",e),!1}}Ui(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(fk){mu("Failed to set zombie client id.",fk)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch(fk){}}Qi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Oy(e){return zh(e,Mc)}function Ly(e){return zh(e,dh)}function My(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Fy{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Hi=n,this.Ji=r}static Yi(e,t){let n=Xf(),r=Xf();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Fy(e,t.fromCache,n,r)}}class Uy{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Vy{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=kt()?8:pc(wt())>0?6:4}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.rs(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ss(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Uy;return this._s(e,t,n).next((r=>{if(i.result=r,this.Xi)return this.us(e,t,n,r.size)}))})).next((()=>i.result))}us(e,t,n,r){return n.documentReadCount<this.es?(fu()<=Ht.DEBUG&&pu("QueryEngine","SDK will not create cache indexes for query:",Mf(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),cc.resolve()):(fu()<=Ht.DEBUG&&pu("QueryEngine","Query:",Mf(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ts*r?(fu()<=Ht.DEBUG&&pu("QueryEngine","The SDK decides to create cache indexes for query:",Mf(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nf(t))):cc.resolve())}rs(e,t){if(Cf(t))return cc.resolve(null);let n=Nf(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Df(t,null,"F"),n=Nf(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Xf(...r);return this.ns.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.cs(t,r);return this.ls(t,s,i,n.readTime)?this.rs(e,Df(t,null,"F")):this.hs(e,s,t,n)}))))})))))}ss(e,t,n,r){return Cf(t)||r.isEqual($u.min())?cc.resolve(null):this.ns.getDocuments(e,n).next((i=>{const s=this.cs(t,i);return this.ls(t,s,n,r)?cc.resolve(null):(fu()<=Ht.DEBUG&&pu("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Mf(t)),this.hs(e,s,t,rc(r,Ju)).next((e=>e)))}))}cs(e,t){let n=new Kh(Vf(e));return t.forEach(((t,r)=>{Ff(e,r)&&(n=n.add(r))})),n}ls(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}_s(e,t,n){return fu()<=Ht.DEBUG&&pu("QueryEngine","Using full collection scan to execute query:",Mf(t)),this.ns.getDocumentsMatchingQuery(e,t,sc.min(),n)}hs(e,t,n,r){return this.ns.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}const zy="LocalStore";class jy{constructor(e,t,n,r){this.persistence=e,this.Ps=t,this.serializer=r,this.Ts=new $h(Lu),this.Is=new jf((e=>vf(e)),wf),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(n)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dy(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ts)))}}function By(e,t,n,r){return new jy(e,t,n,r)}async function qy(e,t){const n=bu(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.As(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Xf();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({Rs:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function $y(e){const t=bu(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Hr.getLastRemoteSnapshotVersion(e)))}function Hy(e,t,n){let r=Xf(),i=Xf();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=qf();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual($u.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):pu(zy,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{Vs:r,fs:i}}))}function Wy(e,t){const n=bu(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=Ic),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Ky(e,t){const n=bu(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Hr.getTargetData(e,t).next((i=>i?(r=i,cc.resolve(r)):n.Hr.allocateTargetId(e).next((i=>(r=new Mm(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Hr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(e.targetId,e),n.Is.set(t,e.targetId)),e}))}async function Gy(e,t,n){const r=bu(e),i=r.Ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!yc(e))throw e;pu(zy,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ts=r.Ts.remove(t),r.Is.delete(i.target)}function Qy(e,t,n){const r=bu(e);let i=$u.min(),s=Xf();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=bu(e),i=r.Is.get(n);return void 0!==i?cc.resolve(r.Ts.get(i)):r.Hr.getTargetData(t,n)}(r,e,Nf(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.Ps.getDocumentsMatchingQuery(e,t,n?i:$u.min(),n?s:Xf()))).next((e=>(Xy(r,Uf(t),e),{documents:e,gs:s})))))}function Yy(e,t){const n=bu(e),r=bu(n.Hr),i=n.Ts.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.lt(e,t).next((e=>e?e.target:null))))}function Jy(e,t){const n=bu(e),r=n.Es.get(t)||$u.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.ds.getAllFromCollectionGroup(e,t,rc(r,Ju),Number.MAX_SAFE_INTEGER))).then((e=>(Xy(n,t,e),e)))}function Xy(e,t,n){let r=e.Es.get(t)||$u.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Es.set(t,r)}async function Zy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xf();const r=await Ky(e,Nf(Hm(t.bundledQuery))),i=bu(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=cm(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Yr.saveNamedQuery(e,t);const o=r.withResumeToken(Xh.EMPTY_BYTE_STRING,s);return i.Ts=i.Ts.insert(o.targetId,o),i.Hr.updateTargetData(e,o).next((()=>i.Hr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Hr.addMatchingKeys(e,n,r.targetId))).next((()=>i.Yr.saveNamedQuery(e,t)))}))}const ev="firestore_clients";function tv(e,t){return`${ev}_${e}_${t}`}const nv="firestore_mutations";function rv(e,t,n){let r=`${nv}_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}const iv="firestore_targets";function sv(e,t){return`${iv}_${e}_${t}`}const ov="SharedClientState";class av{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Ss(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Eu(r.error.code,r.error.message))),s?new av(e,t,r.state,i):(mu(ov,`Failed to parse mutation state for ID '${t}': ${n}`),null)}bs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class lv{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ss(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Eu(n.error.code,n.error.message))),i?new lv(e,n.state,r):(mu(ov,`Failed to parse target state for ID '${e}': ${t}`),null)}bs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class uv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ss(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=ep();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=xc(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new uv(e,i):(mu(ov,`Failed to parse client data for instance '${e}': ${t}`),null)}}class cv{constructor(e,t){this.clientId=e,this.onlineState=t}static Ss(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new cv(t.clientId,t.onlineState):(mu(ov,`Failed to parse online state: ${e}`),null)}}class hv{constructor(){this.activeTargetIds=ep()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dv{constructor(e,t,n,r,i){this.window=e,this.Ti=t,this.persistenceKey=n,this.Cs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Fs=this.Ms.bind(this),this.xs=new $h(Lu),this.started=!1,this.Os=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ns=tv(this.persistenceKey,this.Cs),this.Bs=function(e){return`firestore_sequence_number_${e}`}(this.persistenceKey),this.xs=this.xs.insert(this.Cs,new hv),this.Ls=new RegExp(`^${ev}_${s}_([^_]*)$`),this.ks=new RegExp(`^${nv}_${s}_(\\d+)(?:_(.*))?$`),this.qs=new RegExp(`^${iv}_${s}_(\\d+)$`),this.Qs=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.$s=function(e){return`firestore_bundle_loaded_v2_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.Fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.zi();for(const n of e){if(n===this.Cs)continue;const e=this.getItem(tv(this.persistenceKey,n));if(e){const t=uv.Ss(n,e);t&&(this.xs=this.xs.insert(t.clientId,t))}}this.Us();const t=this.storage.getItem(this.Qs);if(t){const e=this.Ks(t);e&&this.Ws(e)}for(const n of this.Os)this.Ms(n);this.Os=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Bs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Gs(this.xs)}isActiveQueryTarget(e){let t=!1;return this.xs.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.zs(e,"pending")}updateMutationState(e,t,n){this.zs(e,t,n),this.js(e)}addLocalQueryTarget(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="not-current";if(this.isActiveQueryTarget(e)){const t=this.storage.getItem(sv(this.persistenceKey,e));if(t){const r=lv.Ss(e,t);r&&(n=r.state)}}return t&&this.Hs.Ds(e),this.Us(),n}removeLocalQueryTarget(e){this.Hs.vs(e),this.Us()}isLocalQueryTarget(e){return this.Hs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(sv(this.persistenceKey,e))}updateQueryState(e,t,n){this.Js(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.js(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Ys(e)}notifyBundleLoaded(e){this.Zs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Fs),this.removeItem(this.Ns),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return pu(ov,"READ",e,t),t}setItem(e,t){pu(ov,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){pu(ov,"REMOVE",e),this.storage.removeItem(e)}Ms(e){const t=e;if(t.storageArea===this.storage){if(pu(ov,"EVENT",t.key,t.newValue),t.key===this.Ns)return void mu("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ti.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Ls.test(t.key)){if(null==t.newValue){const e=this.Xs(t.key);return this.eo(e,null)}{const e=this.no(t.key,t.newValue);if(e)return this.eo(e.clientId,e)}}else if(this.ks.test(t.key)){if(null!==t.newValue){const e=this.ro(t.key,t.newValue);if(e)return this.io(e)}}else if(this.qs.test(t.key)){if(null!==t.newValue){const e=this.so(t.key,t.newValue);if(e)return this.oo(e)}}else if(t.key===this.Qs){if(null!==t.newValue){const e=this.Ks(t.newValue);if(e)return this.Ws(e)}}else if(t.key===this.Bs){const e=function(e){let t=kc.ae;if(null!=e)try{const n=JSON.parse(e);wu("number"==typeof n),t=n}catch(e){mu(ov,"Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==kc.ae&&this.sequenceNumberHandler(e)}else if(t.key===this.$s){const e=this._o(t.newValue);await Promise.all(e.map((e=>this.syncEngine.ao(e))))}}else this.Os.push(t)}))}}get Hs(){return this.xs.get(this.Cs)}Us(){this.setItem(this.Ns,this.Hs.bs())}zs(e,t,n){const r=new av(this.currentUser,e,t,n),i=rv(this.persistenceKey,this.currentUser,e);this.setItem(i,r.bs())}js(e){const t=rv(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ys(e){const t={clientId:this.Cs,onlineState:e};this.storage.setItem(this.Qs,JSON.stringify(t))}Js(e,t,n){const r=sv(this.persistenceKey,e),i=new lv(e,t,n);this.setItem(r,i.bs())}Zs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.$s,t)}Xs(e){const t=this.Ls.exec(e);return t?t[1]:null}no(e,t){const n=this.Xs(e);return uv.Ss(n,t)}ro(e,t){const n=this.ks.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return av.Ss(new cu(i),r,t)}so(e,t){const n=this.qs.exec(e),r=Number(n[1]);return lv.Ss(r,t)}Ks(e){return cv.Ss(e)}_o(e){return JSON.parse(e)}async io(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.uo(e.batchId,e.state,e.error);pu(ov,`Ignoring mutation for non-active user ${e.user.uid}`)}oo(e){return this.syncEngine.co(e.targetId,e.state,e.error)}eo(e,t){const n=t?this.xs.insert(e,t):this.xs.remove(e),r=this.Gs(this.xs),i=this.Gs(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.lo(s,o).then((()=>{this.xs=n}))}Ws(e){this.xs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Gs(e){let t=ep();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class fv{constructor(){this.ho=new hv,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,n){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new hv,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class pv{To(e){}shutdown(){}}const mv="ConnectivityMonitor";class gv{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){pu(mv,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){pu(mv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let yv=null;function vv(){return null===yv?yv=268435456+Math.round(2147483648*Math.random()):yv++,"0x"+yv.toString(16)}const wv="RestConnection",bv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _v{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${n}/databases/${r}`,this.wo=this.databaseId.database===hd?`project_id=${n}`:`project_id=${n}&database_id=${r}`}So(e,t,n,r,i){const s=vv(),o=this.bo(e,t.toUriEncodedString());pu(wv,`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(a,r,i),this.vo(e,o,a,n).then((t=>(pu(wv,`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw gu(wv,`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t}))}Co(e,t,n,r,i,s){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+hu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=bv[e];return`${this.po}/v1/${t}:${n}`}terminate(){}}class Ev{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}const Sv="WebChannelConnection";class Tv extends _v{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,n,r){const i=vv();return new Promise(((s,o)=>{const a=new Xl;a.setWithCredentials(!0),a.listenOnce(eu.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case tu.NO_ERROR:const t=a.getResponseJson();pu(Sv,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case tu.TIMEOUT:pu(Sv,`RPC '${e}' ${i} timed out`),o(new Eu(_u.DEADLINE_EXCEEDED,"Request time out"));break;case tu.HTTP_ERROR:const n=a.getStatus();if(pu(Sv,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(_u).indexOf(t)>=0?t:_u.UNKNOWN}(t.status);o(new Eu(e,t.message))}else o(new Eu(_u.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Eu(_u.UNAVAILABLE,"Connection failed."));break;default:vu()}}finally{pu(Sv,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);pu(Sv,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",l,n,15)}))}Wo(e,t,n){const r=vv(),i=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=su(),o=iu(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=i.join("");pu(Sv,`Creating RPC '${e}' stream ${r}: ${u}`,a);const c=s.createWebChannel(u,a);let h=!1,d=!1;const f=new Ev({Fo:t=>{d?pu(Sv,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(pu(Sv,`Opening RPC '${e}' stream ${r} transport.`),c.open(),h=!0),pu(Sv,`RPC '${e}' stream ${r} sending:`,t),c.send(t))},Mo:()=>c.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(c,Zl.EventType.OPEN,(()=>{d||(pu(Sv,`RPC '${e}' stream ${r} transport opened.`),f.Qo())})),p(c,Zl.EventType.CLOSE,(()=>{d||(d=!0,pu(Sv,`RPC '${e}' stream ${r} transport closed`),f.Uo())})),p(c,Zl.EventType.ERROR,(t=>{d||(d=!0,gu(Sv,`RPC '${e}' stream ${r} transport errored:`,t),f.Uo(new Eu(_u.UNAVAILABLE,"The operation could not be completed")))})),p(c,Zl.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];wu(!!i);const s=i,o=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){pu(Sv,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=Fp[e];if(void 0!==t)return zp(t)}(t),i=o.message;void 0===n&&(n=_u.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Uo(new Eu(n,i)),c.close()}else pu(Sv,`RPC '${e}' stream ${r} received:`,i),f.Ko(i)}})),p(o,ru.STAT_EVENT,(t=>{t.stat===nu.PROXY?pu(Sv,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===nu.NOPROXY&&pu(Sv,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.$o()}),0),f}}function kv(){return"undefined"!=typeof window?window:null}function Iv(){return"undefined"!=typeof document?document:null}function Cv(e){return new sm(e,!0)}class Av{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Ti=e,this.timerId=t,this.Go=n,this.zo=r,this.jo=i,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),n=Math.max(0,Date.now()-this.Yo),r=Math.max(0,t-n);r>0&&pu("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,(()=>(this.Yo=Date.now(),e()))),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){null!==this.Jo&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){null!==this.Jo&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}const xv="PersistentStream";class Nv{constructor(e,t,n,r,i,s,o,a){this.Ti=e,this.n_=n,this.r_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Av(e,t)}u_(){return 1===this.state||5===this.state||this.c_()}c_(){return 2===this.state||3===this.state}start(){this.__=0,4!==this.state?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&null===this.s_&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,(()=>this.T_())))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,4!==e?this.a_.reset():t&&t.code===_u.RESOURCE_EXHAUSTED?(mu(t.toString()),mu("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===_u.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.i_===t&&this.V_(n,r)}),(t=>{e((()=>{const e=new Eu(_u.UNKNOWN,"Fetching auth token failed: "+t.message);return this.m_(e)}))}))}V_(e,t){const n=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo((()=>{n((()=>this.listener.xo()))})),this.stream.No((()=>{n((()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,(()=>(this.c_()&&(this.state=3),Promise.resolve()))),this.listener.No())))})),this.stream.Lo((e=>{n((()=>this.m_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.__?this.g_(e):this.onNext(e)))}))}l_(){this.state=5,this.a_.Xo((async()=>{this.state=0,this.start()}))}m_(e){return pu(xv,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget((()=>this.i_===e?t():(pu(xv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Rv extends Nv{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:vu()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(wu(void 0===t||"string"==typeof t),Xh.fromBase64String(t||"")):(wu(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Xh.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?_u.UNKNOWN:zp(e.code);return new Eu(t,e.message||"")}(o);n=new Jp(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=mm(e,r.document.name),s=cm(r.document.updateTime),o=r.document.createTime?cm(r.document.createTime):$u.min(),a=new Bd({mapValue:{fields:r.document.fields}}),l=$d.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new Qp(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=mm(e,r.document),s=r.readTime?cm(r.readTime):$u.min(),o=$d.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Qp([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=mm(e,r.document),s=r.removedTargetIds||[];n=new Qp([],s,i,null)}else{if(!("filter"in t))return vu();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Mp(r,i),o=e.targetId;n=new Yp(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return $u.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?$u.min():t.readTime?cm(t.readTime):$u.min()}(e);return this.listener.p_(t,n)}y_(e){const t={};t.database=vm(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=bf(r)?{documents:Tm(e,r)}:{query:km(e,r).ht},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=lm(e,t.resumeToken);const r=om(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo($u.min())>0){n.readTime=am(e,t.snapshotVersion.toTimestamp());const r=om(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vu()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.I_(t)}w_(e){const t={};t.database=vm(this.serializer),t.removeTarget=e,this.I_(t)}}class Pv extends Nv{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return wu(!!e.streamToken),this.lastStreamToken=e.streamToken,wu(!e.writeResults||0===e.writeResults.length),this.listener.D_()}onNext(e){wu(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=function(e,t){return e&&e.length>0?(wu(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?cm(e.updateTime):cm(t);return n.isEqual($u.min())&&(n=cm(t)),new yp(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=cm(e.commitTime);return this.listener.v_(n,t)}C_(){const e={};e.database=vm(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Em(this.serializer,e)))};this.I_(t)}}class Dv{}class Ov extends Dv{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new Eu(_u.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.So(e,dm(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===_u.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Eu(_u.UNKNOWN,e.toString())}))}Co(e,t,n,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.Co(e,dm(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===_u.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Eu(_u.UNKNOWN,e.toString())}))}terminate(){this.F_=!0,this.connection.terminate()}}class Lv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){0===this.x_&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve()))))}q_(e){"Online"===this.state?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,"Online"===e&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(mu(t),this.N_=!1):pu("OnlineStateTracker",t)}Q_(){null!==this.O_&&(this.O_.cancel(),this.O_=null)}}const Mv="RemoteStore";class Fv{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=i,this.z_.To((e=>{n.enqueueAndForget((async()=>{Wv(this)&&(pu(Mv,"Restarting streams for network reachability change."),await async function(e){const t=bu(e);t.W_.add(4),await Vv(t),t.j_.set("Unknown"),t.W_.delete(4),await Uv(t)}(this))}))})),this.j_=new Lv(n,r)}}async function Uv(e){if(Wv(e))for(const t of e.G_)await t(!0)}async function Vv(e){for(const t of e.G_)await t(!1)}function zv(e,t){const n=bu(e);n.K_.has(t.targetId)||(n.K_.set(t.targetId,t),Hv(n)?$v(n):hw(n).c_()&&Bv(n,t))}function jv(e,t){const n=bu(e),r=hw(n);n.K_.delete(t),r.c_()&&qv(n,t),0===n.K_.size&&(r.c_()?r.P_():Wv(n)&&n.j_.set("Unknown"))}function Bv(e,t){if(e.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo($u.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}hw(e).y_(t)}function qv(e,t){e.H_.Ne(t),hw(e).w_(t)}function $v(e){e.H_=new Zp({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>e.K_.get(t)||null,it:()=>e.datastore.serializer.databaseId}),hw(e).start(),e.j_.B_()}function Hv(e){return Wv(e)&&!hw(e).u_()&&e.K_.size>0}function Wv(e){return 0===bu(e).W_.size}function Kv(e){e.H_=void 0}async function Gv(e){e.j_.set("Online")}async function Qv(e){e.K_.forEach(((t,n)=>{Bv(e,t)}))}async function Yv(e,t){Kv(e),Hv(e)?(e.j_.q_(t),$v(e)):e.j_.set("Unknown")}async function Jv(e,t,n){if(e.j_.set("Online"),t instanceof Jp&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.K_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.K_.delete(r),e.H_.removeTarget(r))}(e,t)}catch(n){pu(Mv,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Xv(e,n)}else if(t instanceof Qp?e.H_.We(t):t instanceof Yp?e.H_.Ze(t):e.H_.je(t),!n.isEqual($u.min()))try{const t=await $y(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.H_.ot(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.K_.get(r);i&&e.K_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.K_.get(t);if(!r)return;e.K_.set(t,r.withResumeToken(Xh.EMPTY_BYTE_STRING,r.snapshotVersion)),qv(e,t);const i=new Mm(r.target,t,n,r.sequenceNumber);Bv(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){pu(Mv,"Failed to raise snapshot:",t),await Xv(e,t)}}async function Xv(e,t,n){if(!yc(t))throw t;e.W_.add(1),await Vv(e),e.j_.set("Offline"),n||(n=()=>$y(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{pu(Mv,"Retrying IndexedDB access"),await n(),e.W_.delete(1),await Uv(e)}))}function Zv(e,t){return t().catch((n=>Xv(e,n,t)))}async function ew(e){const t=bu(e),n=dw(t);let r=t.U_.length>0?t.U_[t.U_.length-1].batchId:Ic;for(;tw(t);)try{const e=await Wy(t.localStore,r);if(null===e){0===t.U_.length&&n.P_();break}r=e.batchId,nw(t,e)}catch(e){await Xv(t,e)}rw(t)&&iw(t)}function tw(e){return Wv(e)&&e.U_.length<10}function nw(e,t){e.U_.push(t);const n=dw(e);n.c_()&&n.S_&&n.b_(t.mutations)}function rw(e){return Wv(e)&&!dw(e).u_()&&e.U_.length>0}function iw(e){dw(e).start()}async function sw(e){dw(e).C_()}async function ow(e){const t=dw(e);for(const n of e.U_)t.b_(n.mutations)}async function aw(e,t,n){const r=e.U_.shift(),i=Op.from(r,t,n);await Zv(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await ew(e)}async function lw(e,t){t&&dw(e).S_&&await async function(e,t){if(function(e){return Vp(e)&&e!==_u.ABORTED}(t.code)){const n=e.U_.shift();dw(e).h_(),await Zv(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await ew(e)}}(e,t),rw(e)&&iw(e)}async function uw(e,t){const n=bu(e);n.asyncQueue.verifyOperationInProgress(),pu(Mv,"RemoteStore received new credentials");const r=Wv(n);n.W_.add(3),await Vv(n),r&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.W_.delete(3),await Uv(n)}async function cw(e,t){const n=bu(e);t?(n.W_.delete(2),await Uv(n)):t||(n.W_.add(2),await Vv(n),n.j_.set("Unknown"))}function hw(e){return e.J_||(e.J_=function(e,t,n){const r=bu(e);return r.M_(),new Rv(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{xo:Gv.bind(null,e),No:Qv.bind(null,e),Lo:Yv.bind(null,e),p_:Jv.bind(null,e)}),e.G_.push((async t=>{t?(e.J_.h_(),Hv(e)?$v(e):e.j_.set("Unknown")):(await e.J_.stop(),Kv(e))}))),e.J_}function dw(e){return e.Y_||(e.Y_=function(e,t,n){const r=bu(e);return r.M_(),new Pv(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{xo:()=>Promise.resolve(),No:sw.bind(null,e),Lo:lw.bind(null,e),D_:ow.bind(null,e),v_:aw.bind(null,e)}),e.G_.push((async t=>{t?(e.Y_.h_(),await ew(e)):(await e.Y_.stop(),e.U_.length>0&&(pu(Mv,`Stopping write stream with ${e.U_.length} pending writes`),e.U_=[]))}))),e.Y_}class fw{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Su,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new fw(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Eu(_u.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pw(e,t){if(mu("AsyncQueue",`${t}: ${e}`),yc(e))return new Eu(_u.UNAVAILABLE,`${t}: ${e}`);throw e}class mw{static emptySet(e){return new mw(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Yu.comparator(t.key,n.key):(e,t)=>Yu.comparator(e.key,t.key),this.keyedMap=Hf(),this.sortedSet=new $h(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof mw))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new mw;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class gw{constructor(){this.Z_=new $h(Yu.comparator)}track(e){const t=e.doc.key,n=this.Z_.get(t);n?0!==e.type&&3===n.type?this.Z_=this.Z_.insert(t,e):3===e.type&&1!==n.type?this.Z_=this.Z_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Z_=this.Z_.remove(t):1===e.type&&2===n.type?this.Z_=this.Z_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):vu():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class yw{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new yw(e,t,mw.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Of(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class vw{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some((e=>e.ra()))}}class ww{constructor(){this.queries=bw(),this.onlineState="Unknown",this.ia=new Set}terminate(){!function(e,t){const n=bu(e),r=n.queries;n.queries=bw(),r.forEach(((e,n)=>{for(const r of n.ta)r.onError(t)}))}(this,new Eu(_u.ABORTED,"Firestore shutting down"))}}function bw(){return new jf((e=>Lf(e)),Of)}async function _w(e,t){const n=bu(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.na()&&t.ra()&&(r=2):(s=new vw,r=t.ra()?0:1);try{switch(r){case 0:s.ea=await n.onListen(i,!0);break;case 1:s.ea=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=pw(e,`Initialization of query '${Mf(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.ta.push(t),t.sa(n.onlineState),s.ea&&t.oa(s.ea)&&kw(n)}async function Ew(e,t){const n=bu(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.ta.indexOf(t);e>=0&&(s.ta.splice(e,1),0===s.ta.length?i=t.ra()?0:1:!s.na()&&t.ra()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Sw(e,t){const n=bu(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.ta)e.oa(i)&&(r=!0);t.ea=i}}r&&kw(n)}function Tw(e,t,n){const r=bu(e),i=r.queries.get(t);if(i)for(const s of i.ta)s.onError(n);r.queries.delete(t)}function kw(e){e.ia.forEach((e=>{e.next()}))}var Iw,Cw;(Cw=Iw||(Iw={}))._a="default",Cw.Cache="cache";class Aw{constructor(e,t,n){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=n||{}}oa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new yw(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache)return!0;if(!this.ra())return!0;const n="Offline"!==t;return(!this.options.Ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Pa(e){e=yw.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Iw.Cache}}class xw{constructor(e,t){this.Ia=e,this.byteLength=t}Ea(){return"metadata"in this.Ia}}class Nw{constructor(e){this.serializer=e}ps(e){return mm(this.serializer,e)}ys(e){return e.metadata.exists?_m(this.serializer,e.document,!1):$d.newNoDocument(this.ps(e.metadata.name),this.ws(e.metadata.readTime))}ws(e){return cm(e)}}class Rw{constructor(e,t,n){this.da=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Pw(e)}Aa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ia.namedQuery)this.queries.push(e.Ia.namedQuery);else if(e.Ia.documentMetadata){this.documents.push({metadata:e.Ia.documentMetadata}),e.Ia.documentMetadata.exists||++t;const n=Ku.fromString(e.Ia.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Ia.document&&(this.documents[this.documents.length-1].document=e.Ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ra(e){const t=new Map,n=new Nw(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Xf()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=bu(e);let s=Xf(),o=qf();for(const u of n){const e=t.ps(u.metadata.name);u.document&&(s=s.add(e));const n=t.ys(u);n.setReadTime(t.ws(u.metadata.readTime)),o=o.insert(e,n)}const a=i.ds.newChangeBuffer({trackRemovals:!0}),l=await Ky(i,function(e){return Nf(If(Ku.fromString(`__bundle__/docs/${e}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>Hy(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Hr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.Hr.addMatchingKeys(e,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.Vs,t.fs))).next((()=>t.Vs))))))}(this.localStore,new Nw(this.serializer),this.documents,this.da.id),t=this.Ra(this.documents);for(const n of this.queries)await Zy(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Va:this.collectionGroups,ma:e}}}function Pw(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Dw{constructor(e){this.key=e}}class Ow{constructor(e){this.key=e}}class Lw{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Xf(),this.mutatedKeys=Xf(),this.ya=Vf(e),this.wa=new mw(this.ya)}get Sa(){return this.fa}ba(e,t){const n=t?t.Da:new gw,r=t?t.wa:this.wa;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),c=Ff(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.va(u,c)||(n.track({type:2,doc:c}),f=!0,(a&&this.ya(c,a)>0||l&&this.ya(c,l)<0)&&(o=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(a||l)&&(o=!0)),f&&(c?(s=s.add(c),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{wa:s,Da:n,ls:o,mutatedKeys:i}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const s=e.Da.X_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vu()}};return n(e)-n(t)}(e.type,t.type)||this.ya(e.doc,t.doc))),this.Ca(n),r=null!=r&&r;const o=t&&!r?this.Fa():[],a=0===this.pa.size&&this.current&&!r?1:0,l=a!==this.ga;return this.ga=a,0!==s.length||l?{snapshot:new yw(this.query,e.wa,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ma:o}:{Ma:o}}sa(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({wa:this.wa,Da:new gw,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach((e=>this.fa=this.fa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.fa=this.fa.delete(e))),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Xf(),this.wa.forEach((e=>{this.xa(e.key)&&(this.pa=this.pa.add(e.key))}));const t=[];return e.forEach((e=>{this.pa.has(e)||t.push(new Ow(e))})),this.pa.forEach((n=>{e.has(n)||t.push(new Dw(n))})),t}Oa(e){this.fa=e.gs,this.pa=Xf();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return yw.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,0===this.ga,this.hasCachedResults)}}const Mw="SyncEngine";class Fw{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Uw{constructor(e){this.key=e,this.Ba=!1}}class Vw{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.La={},this.ka=new jf((e=>Lf(e)),Of),this.qa=new Map,this.Qa=new Set,this.$a=new $h(Yu.comparator),this.Ua=new Map,this.Ka=new gy,this.Wa={},this.Ga=new Map,this.za=Bg.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return!0===this.ja}}async function zw(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=mb(e);let i;const s=r.ka.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Na()):i=await Bw(r,t,n,!0),i}async function jw(e,t){const n=mb(e);await Bw(n,t,!0,!1)}async function Bw(e,t,n,r){const i=await Ky(e.localStore,Nf(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await qw(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&zv(e.remoteStore,i),a}async function qw(e,t,n,r,i){e.Ha=(t,n,r)=>async function(e,t,n,r){let i=t.view.ba(n);i.ls&&(i=await Qy(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ba(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return tb(e,t.targetId,a.Ma),a.snapshot}(e,t,n,r);const s=await Qy(e.localStore,t,!0),o=new Lw(t,s.gs),a=o.ba(s.documents),l=Gp.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=o.applyChanges(a,e.isPrimaryClient,l);tb(e,n,u.Ma);const c=new Fw(t,n,o);return e.ka.set(t,c),e.qa.has(n)?e.qa.get(n).push(t):e.qa.set(n,[t]),u.snapshot}async function $w(e,t,n){const r=bu(e),i=r.ka.get(t),s=r.qa.get(i.targetId);if(s.length>1)return r.qa.set(i.targetId,s.filter((e=>!Of(e,t)))),void r.ka.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Gy(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&jv(r.remoteStore,i.targetId),Zw(r,i.targetId)})).catch(uc)):(Zw(r,i.targetId),await Gy(r.localStore,i.targetId,!0))}async function Hw(e,t){const n=bu(e),r=n.ka.get(t),i=n.qa.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),jv(n.remoteStore,r.targetId))}async function Ww(e,t){const n=bu(e);try{const e=await function(e,t){const n=bu(e),r=t.snapshotVersion;let i=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.ds.newChangeBuffer({trackRemovals:!0});i=n.Ts;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Hr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Hr.addMatchingKeys(e,s.addedDocuments,a))));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(Xh.EMPTY_BYTE_STRING,$u.min()).withLastLimboFreeSnapshotVersion($u.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,u,s)&&o.push(n.Hr.updateTargetData(e,u))}));let a=qf(),l=Xf();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Hy(e,s,t.documentUpdates).next((e=>{a=e.Vs,l=e.fs}))),!r.isEqual($u.min())){const t=n.Hr.getLastRemoteSnapshotVersion(e).next((t=>n.Hr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return cc.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.Ts=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Ua.get(t);r&&(wu(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Ba=!0:e.modifiedDocuments.size>0?wu(r.Ba):e.removedDocuments.size>0&&(wu(r.Ba),r.Ba=!1))})),await ib(n,e,t)}catch(e){await uc(e)}}function Kw(e,t,n){const r=bu(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ka.forEach(((n,r)=>{const i=r.view.sa(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=bu(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.ta)i.sa(t)&&(r=!0)})),r&&kw(n)}(r.eventManager,t),e.length&&r.La.p_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Gw(e,t,n){const r=bu(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Ua.get(t),s=i&&i.key;if(s){let e=new $h(Yu.comparator);e=e.insert(s,$d.newNoDocument(s,$u.min()));const n=Xf().add(s),i=new Kp($u.min(),new Map,new $h(Lu),e,n);await Ww(r,i),r.$a=r.$a.remove(s),r.Ua.delete(t),rb(r)}else await Gy(r.localStore,t,!1).then((()=>Zw(r,t,n))).catch(uc)}async function Qw(e,t){const n=bu(e),r=t.batch.batchId;try{const e=await function(e,t){const n=bu(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.ds.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=cc.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);wu(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Xf();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Xw(n,r,null),Jw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ib(n,e)}catch(e){await uc(e)}}async function Yw(e,t,n){const r=bu(e);try{const e=await function(e,t){const n=bu(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(wu(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Xw(r,t,n),Jw(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await ib(r,e)}catch(n){await uc(n)}}function Jw(e,t){(e.Ga.get(t)||[]).forEach((e=>{e.resolve()})),e.Ga.delete(t)}function Xw(e,t,n){const r=bu(e);let i=r.Wa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Wa[r.currentUser.toKey()]=i}}function Zw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.qa.get(t))e.ka.delete(r),n&&e.La.Ja(r,n);e.qa.delete(t),e.isPrimaryClient&&e.Ka.br(t).forEach((t=>{e.Ka.containsKey(t)||eb(e,t)}))}function eb(e,t){e.Qa.delete(t.path.canonicalString());const n=e.$a.get(t);null!==n&&(jv(e.remoteStore,n),e.$a=e.$a.remove(t),e.Ua.delete(n),rb(e))}function tb(e,t,n){for(const r of n)r instanceof Dw?(e.Ka.addReference(r.key,t),nb(e,r)):r instanceof Ow?(pu(Mw,"Document no longer in limbo: "+r.key),e.Ka.removeReference(r.key,t),e.Ka.containsKey(r.key)||eb(e,r.key)):vu()}function nb(e,t){const n=t.key,r=n.path.canonicalString();e.$a.get(n)||e.Qa.has(r)||(pu(Mw,"New document in limbo: "+n),e.Qa.add(r),rb(e))}function rb(e){for(;e.Qa.size>0&&e.$a.size<e.maxConcurrentLimboResolutions;){const t=e.Qa.values().next().value;e.Qa.delete(t);const n=new Yu(Ku.fromString(t)),r=e.za.next();e.Ua.set(r,new Uw(n)),e.$a=e.$a.insert(n,r),zv(e.remoteStore,new Mm(Nf(If(n.path)),r,"TargetPurposeLimboResolution",kc.ae))}}async function ib(e,t,n){const r=bu(e),i=[],s=[],o=[];r.ka.isEmpty()||(r.ka.forEach(((e,a)=>{o.push(r.Ha(a,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Fy.Yi(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.La.p_(i),await async function(e,t){const n=bu(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>cc.forEach(t,(t=>cc.forEach(t.Hi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>cc.forEach(t.Ji,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!yc(e))throw e;pu(zy,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ts=n.Ts.insert(e,i)}}}(r.localStore,s))}async function sb(e,t){const n=bu(e);if(!n.currentUser.isEqual(t)){pu(Mw,"User change. New user:",t.toKey());const e=await qy(n.localStore,t);n.currentUser=t,function(e,t){e.Ga.forEach((e=>{e.forEach((e=>{e.reject(new Eu(_u.CANCELLED,t))}))})),e.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await ib(n,e.Rs)}}function ob(e,t){const n=bu(e),r=n.Ua.get(t);if(r&&r.Ba)return Xf().add(r.key);{let e=Xf();const r=n.qa.get(t);if(!r)return e;for(const t of r){const r=n.ka.get(t);e=e.unionWith(r.view.Sa)}return e}}async function ab(e,t){const n=bu(e),r=await Qy(n.localStore,t.query,!0),i=t.view.Oa(r);return n.isPrimaryClient&&tb(n,t.targetId,i.Ma),i}async function lb(e,t){const n=bu(e);return Jy(n.localStore,t).then((e=>ib(n,e)))}async function ub(e,t,n,r){const i=bu(e),s=await function(e,t){const n=bu(e),r=bu(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Ln(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):cc.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await ew(i.remoteStore):"acknowledged"===n||"rejected"===n?(Xw(i,t,r||null),Jw(i,t),function(e,t){bu(bu(e).mutationQueue).qn(t)}(i.localStore,t)):vu(),await ib(i,s)):pu(Mw,"Cannot apply mutation batch with id: "+t)}async function cb(e,t,n){const r=bu(e),i=[],s=[];for(const o of t){let e;const t=r.qa.get(o);if(t&&0!==t.length){e=await Ky(r.localStore,Nf(t[0]));for(const e of t){const t=r.ka.get(e),n=await ab(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await Yy(r.localStore,o);e=await Ky(r.localStore,t),await qw(r,hb(t),o,!1,e.resumeToken)}i.push(e)}return r.La.p_(s),i}function hb(e){return kf(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function db(e){return function(e){return bu(bu(e).persistence).zi()}(bu(e).localStore)}async function fb(e,t,n,r){const i=bu(e);if(i.ja)return void pu(Mw,"Ignoring unexpected query state notification.");const s=i.qa.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await Jy(i.localStore,Uf(s[0])),r=Kp.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Xh.EMPTY_BYTE_STRING);await ib(i,e,r);break}case"rejected":await Gy(i.localStore,t,!0),Zw(i,t,r);break;default:vu()}}async function pb(e,t,n){const r=mb(e);if(r.ja){for(const e of t){if(r.qa.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){pu(Mw,"Adding an already active target "+e);continue}const t=await Yy(r.localStore,e),n=await Ky(r.localStore,t);await qw(r,hb(t),n.targetId,!1,n.resumeToken),zv(r.remoteStore,n)}for(const e of n)r.qa.has(e)&&await Gy(r.localStore,e,!1).then((()=>{jv(r.remoteStore,e),Zw(r,e)})).catch(uc)}}function mb(e){const t=bu(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ww.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ob.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Gw.bind(null,t),t.La.p_=Sw.bind(null,t.eventManager),t.La.Ja=Tw.bind(null,t.eventManager),t}function gb(e){const t=bu(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Qw.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Yw.bind(null,t),t}class yb{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cv(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return By(this.persistence,new Vy,e.initialUser,this.serializer)}Xa(e){return new Ey(Ty.ri,this.serializer)}Za(e){return new fv}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yb.provider={build:()=>new yb};class vb extends yb{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){wu(this.persistence.referenceDelegate instanceof ky);const n=this.persistence.referenceDelegate.garbageCollector;return new Jg(n,e.asyncQueue,t)}Xa(e){const t=void 0!==this.cacheSizeBytes?Og.withCacheSize(this.cacheSizeBytes):Og.DEFAULT;return new Ey((e=>ky.ri(e,t)),this.serializer)}}class wb extends yb{constructor(e,t,n){super(),this.ru=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ru.initialize(this,e),await gb(this.ru.syncEngine),await ew(this.ru.remoteStore),await this.persistence.Ci((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}eu(e){return By(this.persistence,new Vy,e.initialUser,this.serializer)}tu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Jg(n,e.asyncQueue,t)}nu(e,t){const n=new Tc(t,this.persistence);return new Sc(e.asyncQueue,n)}Xa(e){const t=My(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Og.withCacheSize(this.cacheSizeBytes):Og.DEFAULT;return new Dy(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,kv(),Iv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(e){return new fv}}class bb extends wb{constructor(e,t){super(e,t,!1),this.ru=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.ru.syncEngine;this.sharedClientState instanceof dv&&(this.sharedClientState.syncEngine={uo:ub.bind(null,t),co:fb.bind(null,t),lo:pb.bind(null,t),zi:db.bind(null,t),ao:lb.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ci((async e=>{await async function(e,t){const n=bu(e);if(mb(n),gb(n),!0===t&&!0!==n.ja){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await cb(n,e.toArray());n.ja=!0,await cw(n.remoteStore,!0);for(const r of t)zv(n.remoteStore,r)}else if(!1===t&&!1!==n.ja){const e=[];let t=Promise.resolve();n.qa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(Zw(n,i),Gy(n.localStore,i,!0)))),jv(n.remoteStore,i)})),await t,await cb(n,e),function(e){const t=bu(e);t.Ua.forEach(((e,n)=>{jv(t.remoteStore,n)})),t.Ka.Dr(),t.Ua=new Map,t.$a=new $h(Yu.comparator)}(n),n.ja=!1,await cw(n.remoteStore,!1)}}(this.ru.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}Za(e){const t=kv();if(!dv.D(t))throw new Eu(_u.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=My(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new dv(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class _b{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Kw(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=sb.bind(null,this.syncEngine),await cw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new ww}createDatastore(e){const t=Cv(e.databaseInfo.databaseId),n=function(e){return new Tv(e)}(e.databaseInfo);return function(e,t,n,r){return new Ov(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Fv(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Kw(this.syncEngine,e,0)),gv.D()?new gv:new pv)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Vw(e,t,n,r,i,s);return o&&(a.ja=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=bu(e);pu(Mv,"RemoteStore shutting down."),t.W_.add(5),await Vv(t),t.z_.shutdown(),t.j_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}function Eb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}_b.provider={build:()=>new _b};class Sb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):mu("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class Tb{constructor(e,t){this.ou=e,this.serializer=t,this.metadata=new Su,this.buffer=new Uint8Array,this._u=new TextDecoder("utf-8"),this.au().then((e=>{e&&e.Ea()?this.metadata.resolve(e.Ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.Ia)}`))}),(e=>this.metadata.reject(e)))}close(){return this.ou.cancel()}async getMetadata(){return this.metadata.promise}async Ya(){return await this.getMetadata(),this.au()}async au(){const e=await this.uu();if(null===e)return null;const t=this._u.decode(e),n=Number(t);isNaN(n)&&this.cu(`length string (${t}) is not valid number`);const r=await this.lu(n);return new xw(JSON.parse(r),e.length+n)}hu(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async uu(){for(;this.hu()<0&&!await this.Pu(););if(0===this.buffer.length)return null;const e=this.hu();e<0&&this.cu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async lu(e){for(;this.buffer.length<e;)await this.Pu()&&this.cu("Reached the end of bundle when more is expected.");const t=this._u.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}cu(e){throw this.ou.cancel(),new Error(`Invalid bundle format: ${e}`)}async Pu(){const e=await this.ou.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class kb{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Eu(_u.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=bu(e),r={documents:t.map((e=>pm(n.serializer,e)))},i=await n.Co("BatchGetDocuments",n.serializer.databaseId,Ku.emptyPath(),r,t.length),s=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){wu(!!t.found),t.found.name,t.found.updateTime;const n=mm(e,t.found.name),r=cm(t.found.updateTime),i=t.found.createTime?cm(t.found.createTime):$u.min(),s=new Bd({mapValue:{fields:t.found.fields}});return $d.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){wu(!!t.missing),wu(!!t.readTime);const n=mm(e,t.missing),r=cm(t.readTime);return $d.newNoDocument(n,r)}(e,t):vu()}(n.serializer,e);s.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=s.get(e.toString());wu(!!t),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Rp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=Yu.fromPath(t);this.mutations.push(new Pp(n,this.precondition(n)))})),await async function(e,t){const n=bu(e),r={writes:t.map((e=>Em(n.serializer,e)))};await n.So("Commit",n.serializer.databaseId,Ku.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw vu();t=$u.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Eu(_u.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual($u.min())?vp.exists(!1):vp.updateTime(t):vp.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual($u.min()))throw new Eu(_u.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return vp.updateTime(t)}return vp.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Ib{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Tu=n.maxAttempts,this.a_=new Av(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo((async()=>{const e=new kb(this.datastore),t=this.du(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Au(e)}))))})).catch((e=>{this.Au(e)}))}))}du(e){try{const t=this.updateFunction(e);return!Cc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Au(e){this.Tu>0&&this.Ru(e)?(this.Tu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Eu(),Promise.resolve())))):this.deferred.reject(e)}Ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Vp(t)}return!1}}const Cb="FirestoreClient";class Ab{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=cu.UNAUTHENTICATED,this.clientId=Ou.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{pu(Cb,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(pu(Cb,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Su;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=pw(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function xb(e,t){e.asyncQueue.verifyOperationInProgress(),pu(Cb,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await qy(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Nb(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Rb(e);pu(Cb,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>uw(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>uw(t.remoteStore,n))),e._onlineComponents=t}async function Rb(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){pu(Cb,"Using user provided OfflineComponentProvider");try{await xb(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===_u.FAILED_PRECONDITION||e.code===_u.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;gu("Error using user provided cache. Falling back to memory cache: "+n),await xb(e,new yb)}}else pu(Cb,"Using default OfflineComponentProvider"),await xb(e,new vb(void 0));return e._offlineComponents}async function Pb(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(pu(Cb,"Using user provided OnlineComponentProvider"),await Nb(e,e._uninitializedComponentsProvider._online)):(pu(Cb,"Using default OnlineComponentProvider"),await Nb(e,new _b))),e._onlineComponents}function Db(e){return Rb(e).then((e=>e.persistence))}function Ob(e){return Rb(e).then((e=>e.localStore))}function Lb(e){return Pb(e).then((e=>e.remoteStore))}function Mb(e){return Pb(e).then((e=>e.syncEngine))}function Fb(e){return Pb(e).then((e=>e.datastore))}async function Ub(e){const t=await Pb(e),n=t.eventManager;return n.onListen=zw.bind(null,t.syncEngine),n.onUnlisten=$w.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=jw.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Hw.bind(null,t.syncEngine),n}function Vb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Su;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Sb({next:a=>{s.su(),t.enqueueAndForget((()=>Ew(e,o)));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new Eu(_u.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?i.reject(new Eu(_u.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),o=new Aw(If(n.path),s,{includeMetadataChanges:!0,Ta:!0});return _w(e,o)}(await Ub(e),e.asyncQueue,t,n,r))),r.promise}function zb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Su;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Sb({next:n=>{s.su(),t.enqueueAndForget((()=>Ew(e,o))),n.fromCache&&"server"===r.source?i.reject(new Eu(_u.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Aw(n,s,{includeMetadataChanges:!0,Ta:!0});return _w(e,o)}(await Ub(e),e.asyncQueue,t,n,r))),r.promise}function jb(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?Du().encode(e):e,function(e,t){return new Tb(e,t)}(function(e,t){if(e instanceof Uint8Array)return Eb(e,t);if(e instanceof ArrayBuffer)return Eb(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Cv(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=bu(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=bu(e),r=cm(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.Yr.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(Pw(r));const i=new Rw(r,e.localStore,t.serializer);let s=await t.Ya();for(;s;){const e=await i.Aa(s);e&&n._updateProgress(e),s=await t.Ya()}const o=await i.complete();return await ib(e,o.ma,void 0),await function(e,t){const n=bu(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.Yr.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.Va)}catch(e){return gu(Mw,`Loading bundle failed with ${e}`),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await Mb(e),i,r)}))}function Bb(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const qb=new Map;function $b(e,t,n){if(!n)throw new Eu(_u.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Hb(e,t,n,r){if(!0===t&&!0===r)throw new Eu(_u.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Wb(e){if(!Yu.isDocumentKey(e))throw new Eu(_u.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Kb(e){if(Yu.isDocumentKey(e))throw new Eu(_u.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Gb(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":vu()}function Qb(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Eu(_u.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gb(e);throw new Eu(_u.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Yb(e,t){if(t<=0)throw new Eu(_u.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}const Jb="firestore.googleapis.com",Xb=!0;class Zb{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Eu(_u.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Jb,this.ssl=Xb}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Xb;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Dg;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Gg)throw new Eu(_u.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Hb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Bb(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Eu(_u.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Eu(_u.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Eu(_u.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class e_{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Eu(_u.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Eu(_u.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zb(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ku;switch(e.type){case"firstParty":return new xu(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Eu(_u.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=qb.get(e);t&&(pu("ComponentProvider","Removing Datastore"),qb.delete(e),t.terminate())}(this),Promise.resolve()}}function t_(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Qb(e,e_))._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:e._getEmulatorOptions()}),a=`${t}:${n}`;s.host!==Jb&&s.host!==a&&gu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},s),{host:a,ssl:!1,emulatorOptions:r});if(!Rt(l,o)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=cu.MOCK_USER;else{t=vt(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Eu(_u.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new cu(s)}e._authCredentials=new Iu(new Tu(t,n))}}class n_{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new n_(this.firestore,e,this._query)}}class r_{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new i_(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new r_(this.firestore,e,this._key)}}class i_ extends n_{constructor(e,t,n){super(e,t,If(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new r_(this.firestore,null,new Yu(e))}withConverter(e){return new i_(this.firestore,e,this._path)}}function s_(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Vt(e),$b("collection","path",t),e instanceof e_){const n=Ku.fromString(t,...r);return Kb(n),new i_(e,null,n)}{if(!(e instanceof r_||e instanceof i_))throw new Eu(_u.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ku.fromString(t,...r));return Kb(n),new i_(e.firestore,null,n)}}function o_(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Vt(e),1===arguments.length&&(t=Ou.newId()),$b("doc","path",t),e instanceof e_){const n=Ku.fromString(t,...r);return Wb(n),new r_(e,null,new Yu(n))}{if(!(e instanceof r_||e instanceof i_))throw new Eu(_u.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ku.fromString(t,...r));return Wb(n),new r_(e.firestore,e instanceof i_?e.converter:null,new Yu(n))}}function a_(e,t){return e=Vt(e),t=Vt(t),(e instanceof r_||e instanceof i_)&&(t instanceof r_||t instanceof i_)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function l_(e,t){return e=Vt(e),t=Vt(t),e instanceof n_&&t instanceof n_&&e.firestore===t.firestore&&Of(e._query,t._query)&&e.converter===t.converter}const u_="AsyncQueue";class c_{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Av(this,"async_queue_retry"),this.Su=()=>{const e=Iv();e&&pu(u_,"Visibility state changed to "+e.visibilityState),this.a_.t_()},this.bu=e;const t=Iv();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Iv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise((()=>{}));const t=new Su;return this.vu((()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Vu.push(e),this.Cu())))}async Cu(){if(0!==this.Vu.length){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(fk){if(!yc(fk))throw fk;pu(u_,"Operation failed with retryable error: "+fk)}this.Vu.length>0&&this.a_.Xo((()=>this.Cu()))}}vu(e){const t=this.bu.then((()=>(this.pu=!0,e().catch((e=>{this.gu=e,this.pu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw mu("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.pu=!1,e))))));return this.bu=t,t}enqueueAfterDelay(e,t,n){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const r=fw.createAndSchedule(this,e,t,n,(e=>this.Fu(e)));return this.fu.push(r),r}Du(){this.gu&&vu()}verifyOperationInProgress(){}async Mu(){let e;do{e=this.bu,await e}while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then((()=>{this.fu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.fu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Mu()}))}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function h_(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class d_{constructor(){this._progressObserver={},this._taskCompletionResolver=new Su,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class f_ extends e_{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new c_,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new c_(e),this._firestoreClient=void 0,await e}}}function p_(e){if(e._terminated)throw new Eu(_u.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||m_(e),e._firestoreClient}function m_(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new cd(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Bb(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Ab(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}function g_(e,t,n){if((e=Qb(e,f_))._firestoreClient||e._terminated)throw new Eu(_u.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(e._componentsProvider||e._getSettings().localCache)throw new Eu(_u.FAILED_PRECONDITION,"SDK cache is already specified.");e._componentsProvider={_online:t,_offline:n},m_(e)}function y_(e){return function(e){const t=new Su;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=bu(e);Wv(n.remoteStore)||pu(Mw,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=bu(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(e===Ic)return void t.resolve();const r=n.Ga.get(e)||[];r.push(t),n.Ga.set(e,r)}catch(e){const n=pw(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Mb(e),t))),t.promise}(p_(e=Qb(e,f_)))}function v_(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Db(e),n=await Lb(e);return t.setNetworkEnabled(!0),function(e){const t=bu(e);return t.W_.delete(0),Uv(t)}(n)}))}(p_(e=Qb(e,f_)))}function w_(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Db(e),n=await Lb(e);return t.setNetworkEnabled(!1),async function(e){const t=bu(e);t.W_.add(0),await Vv(t),t.j_.set("Offline")}(n)}))}(p_(e=Qb(e,f_)))}function b_(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=bu(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.Yr.getNamedQuery(e,t)))}(await Ob(e),t)))}(p_(e=Qb(e,f_)),t).then((t=>t?new n_(e,null,t.query):null))}class __{constructor(e){this._byteString=e}static fromBase64String(e){try{return new __(Xh.fromBase64String(e))}catch(e){throw new Eu(_u.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new __(Xh.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class E_{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Eu(_u.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qu(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class S_{constructor(e){this._methodName=e}}class T_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Eu(_u.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Eu(_u.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Lu(this._lat,e._lat)||Lu(this._long,e._long)}}class k_{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const I_=/^__.*__$/;class C_{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Cp(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ip(e,this.data,t,this.fieldTransforms)}}class A_{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Cp(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function x_(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vu()}}class N_{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Bu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new N_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ku({path:n,Qu:!1});return r.$u(e),r}Uu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ku({path:n,Qu:!1});return r.Bu(),r}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Y_(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(0===e.length)throw this.Wu("Document fields must not be empty");if(x_(this.Lu)&&I_.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class R_{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Cv(e)}ju(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new N_({Lu:e,methodName:t,zu:n,path:Qu.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function P_(e){const t=e._freezeSettings(),n=Cv(e._databaseId);return new R_(e._databaseId,!!t.ignoreUndefinedProperties,n)}function D_(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.ju(s.merge||s.mergeFields?2:0,t,n,i);W_("Data must be an object, but it was:",o,r);const a=$_(r,o);let l,u;if(s.merge)l=new Yh(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=K_(t,r,n);if(!o.contains(i))throw new Eu(_u.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);J_(e,i)||e.push(i)}l=new Yh(e),u=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,u=o.fieldTransforms;return new C_(new Bd(a),l,u)}class O_ extends S_{_toFieldTransform(e){if(2!==e.Lu)throw 1===e.Lu?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof O_}}function L_(e,t,n){return new N_({Lu:3,zu:t.settings.zu,methodName:e._methodName,Qu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class M_ extends S_{_toFieldTransform(e){return new gp(e.path,new lp)}isEqual(e){return e instanceof M_}}class F_ extends S_{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=L_(this,e,!0),n=this.Hu.map((e=>q_(e,t))),r=new up(n);return new gp(e.path,r)}isEqual(e){return e instanceof F_&&Rt(this.Hu,e.Hu)}}class U_ extends S_{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=L_(this,e,!0),n=this.Hu.map((e=>q_(e,t))),r=new hp(n);return new gp(e.path,r)}isEqual(e){return e instanceof U_&&Rt(this.Hu,e.Hu)}}class V_ extends S_{constructor(e,t){super(e),this.Ju=t}_toFieldTransform(e){const t=new fp(e.serializer,rp(e.serializer,this.Ju));return new gp(e.path,t)}isEqual(e){return e instanceof V_&&this.Ju===e.Ju}}function z_(e,t,n,r){const i=e.ju(1,t,n);W_("Data must be an object, but it was:",i,r);const s=[],o=Bd.empty();Bh(r,((e,r)=>{const a=Q_(t,e,n);r=Vt(r);const l=i.Uu(a);if(r instanceof O_)s.push(a);else{const e=q_(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new Yh(s);return new A_(o,a,i.fieldTransforms)}function j_(e,t,n,r,i,s){const o=e.ju(1,t,n),a=[K_(t,r,n)],l=[i];if(s.length%2!=0)throw new Eu(_u.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(K_(t,s[d])),l.push(s[d+1]);const u=[],c=Bd.empty();for(let d=a.length-1;d>=0;--d)if(!J_(u,a[d])){const e=a[d];let t=l[d];t=Vt(t);const n=o.Uu(e);if(t instanceof O_)u.push(e);else{const r=q_(t,n);null!=r&&(u.push(e),c.set(e,r))}}const h=new Yh(u);return new A_(c,h,o.fieldTransforms)}function B_(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return q_(n,e.ju(r?4:3,t))}function q_(e,t){if(H_(e=Vt(e)))return W_("Unsupported field value:",t,e),$_(e,t);if(e instanceof S_)return function(e,t){if(!x_(t.Lu))throw t.Wu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Wu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Qu&&4!==t.Lu)throw t.Wu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=q_(i,t.Ku(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Vt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return rp(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=qu.fromDate(e);return{timestampValue:am(t.serializer,n)}}if(e instanceof qu){const n=new qu(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:am(t.serializer,n)}}if(e instanceof T_)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof __)return{bytesValue:lm(t.serializer,e._byteString)};if(e instanceof r_){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Wu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:hm(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof k_)return function(e,t){return{mapValue:{fields:{[fd]:{stringValue:gd},[yd]:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Wu("VectorValues must only contain numeric values.");return tp(t.serializer,e)}))}}}}}}(e,t);throw t.Wu(`Unsupported field value: ${Gb(e)}`)}(e,t)}function $_(e,t){const n={};return qh(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Bh(e,((e,r)=>{const i=q_(r,t.qu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function H_(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof qu||e instanceof T_||e instanceof __||e instanceof r_||e instanceof S_||e instanceof k_)}function W_(e,t,n){if(!H_(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Gb(n);throw"an object"===r?t.Wu(e+" a custom object"):t.Wu(e+" "+r)}}function K_(e,t,n){if((t=Vt(t))instanceof E_)return t._internalPath;if("string"==typeof t)return Q_(e,t);throw Y_("Field path arguments must be of type string or ",e,!1,void 0,n)}const G_=new RegExp("[~\\*/\\[\\]]");function Q_(e,t,n){if(t.search(G_)>=0)throw Y_(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new E_(...t.split("."))._internalPath}catch(r){throw Y_(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Y_(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Eu(_u.INVALID_ARGUMENT,a+e+l)}function J_(e,t){return e.some((e=>e.isEqual(t)))}class X_{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new r_(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Z_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(eE("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Z_ extends X_{data(){return super.data()}}function eE(e,t){return"string"==typeof t?Q_(e,t):t instanceof E_?t._internalPath:t._delegate._internalPath}function tE(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Eu(_u.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nE{}class rE extends nE{}function iE(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof nE&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof oE)).length,n=e.filter((e=>e instanceof sE)).length;if(t>1||t>0&&n>0)throw new Eu(_u.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class sE extends rE{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new sE(e,t,n)}_apply(e){const t=this._parse(e);return pE(e._query,t),new n_(e.firestore,e.converter,Pf(e._query,t))}_parse(e){const t=P_(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Eu(_u.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){fE(o,s);const t=[];for(const n of o)t.push(dE(r,e,n));a={arrayValue:{values:t}}}else a=dE(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||fE(o,s),a=B_(n,t,o,"in"===s||"not-in"===s);return Jd.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class oE extends nE{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new oE(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Xd.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)pE(n,i),n=Pf(n,i)}(e._query,t),new n_(e.firestore,e.converter,Pf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class aE extends rE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new aE(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Eu(_u.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Eu(_u.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Gd(t,n)}(e._query,this._field,this._direction);return new n_(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Tf(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class lE extends rE{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new lE(e,t,n)}_apply(e){return new n_(e.firestore,e.converter,Df(e._query,this._limit,this._limitType))}}class uE extends rE{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new uE(e,t,n)}_apply(e){const t=hE(e,this.type,this._docOrFields,this._inclusive);return new n_(e.firestore,e.converter,function(e,t){return new Tf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class cE extends rE{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new cE(e,t,n)}_apply(e){const t=hE(e,this.type,this._docOrFields,this._inclusive);return new n_(e.firestore,e.converter,function(e,t){return new Tf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function hE(e,t,n,r){if(n[0]=Vt(n[0]),n[0]instanceof X_)return function(e,t,n,r,i){if(!r)throw new Eu(_u.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const o of xf(e))if(o.field.isKeyField())s.push(Ad(t,r.key));else{const e=r.data.field(o.field);if(ad(e))throw new Eu(_u.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Eu(_u.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}s.push(e)}return new Hd(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=P_(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Eu(_u.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new Eu(_u.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof s}`);if(!Af(e)&&-1!==s.indexOf("/"))throw new Eu(_u.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${r}() must be a plain document ID, but '${s}' contains a slash.`);const n=e.path.child(Ku.fromString(s));if(!Yu.isDocumentKey(n))throw new Eu(_u.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new Yu(n);a.push(Ad(t,i))}else{const e=B_(n,r,s);a.push(e)}}return new Hd(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function dE(e,t,n){if("string"==typeof(n=Vt(n))){if(""===n)throw new Eu(_u.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Af(t)&&-1!==n.indexOf("/"))throw new Eu(_u.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Ku.fromString(n));if(!Yu.isDocumentKey(r))throw new Eu(_u.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ad(e,new Yu(r))}if(n instanceof r_)return Ad(e,n._key);throw new Eu(_u.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gb(n)}.`)}function fE(e,t){if(!Array.isArray(e)||0===e.length)throw new Eu(_u.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function pE(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Eu(_u.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Eu(_u.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class mE{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(wd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return td(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(nd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw vu()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Bh(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[yd].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>td(e.doubleValue)));return new k_(i)}convertGeoPoint(e){return new T_(td(e.latitude),td(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ld(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ud(e));default:return null}}convertTimestamp(e){const t=ed(e);return new qu(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ku.fromString(e);wu(Lm(n));const r=new dd(n.get(1),n.get(3)),i=new Yu(n.popFirst(5));return r.isEqual(t)||mu(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function gE(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class yE extends mE{constructor(e){super(),this.firestore=e}convertBytes(e){return new __(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new r_(this.firestore,null,t)}}class vE{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wE extends X_{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new bE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(eE("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class bE extends wE{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class _E{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new vE(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new bE(this._firestore,this._userDataWriter,n.key,n,new vE(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Eu(_u.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new bE(e._firestore,e._userDataWriter,n.doc.key,n.doc,new vE(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new bE(e._firestore,e._userDataWriter,t.doc.key,t.doc,new vE(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:EE(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function EE(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vu()}}function SE(e,t){return e instanceof wE&&t instanceof wE?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof _E&&t instanceof _E&&e._firestore===t._firestore&&l_(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class TE extends mE{constructor(e){super(),this.firestore=e}convertBytes(e){return new __(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new r_(this.firestore,null,t)}}function kE(e){e=Qb(e,r_);const t=Qb(e.firestore,f_),n=p_(t),r=new TE(t);return function(e,t){const n=new Su;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=bu(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Eu(_u.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=pw(e,`Failed to get document '${t} from cache`);n.reject(r)}}(await Ob(e),t,n))),n.promise}(n,e._key).then((n=>new wE(t,r,e._key,n,new vE(null!==n&&n.hasLocalMutations,!0),e.converter)))}function IE(e){e=Qb(e,n_);const t=Qb(e.firestore,f_),n=p_(t),r=new TE(t);return function(e,t){const n=new Su;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await Qy(e,t,!0),i=new Lw(t,r.gs),s=i.ba(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=pw(e,`Failed to execute query '${t} against cache`);n.reject(r)}}(await Ob(e),t,n))),n.promise}(n,e._query).then((n=>new _E(t,r,e,n)))}function CE(e,t,n){e=Qb(e,r_);const r=Qb(e.firestore,f_),i=gE(e.converter,t,n);return RE(r,[D_(P_(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,vp.none())])}function AE(e,t,n){e=Qb(e,r_);const r=Qb(e.firestore,f_),i=P_(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=Vt(t))||t instanceof E_?j_(i,"updateDoc",e._key,t,n,a):z_(i,"updateDoc",e._key,t),RE(r,[s.toMutation(e._key,vp.exists(!0))])}function xE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=Vt(e);let a={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||h_(n[l])||(a=n[l],l++);const u={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(h_(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let c,h,d;if(e instanceof r_)h=Qb(e.firestore,f_),d=If(e._key.path),c={next:t=>{n[l]&&n[l](PE(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=Qb(e,n_);h=Qb(t.firestore,f_),d=t._query;const r=new TE(h);c={next:e=>{n[l]&&n[l](new _E(h,r,t,e))},error:n[l+1],complete:n[l+2]},tE(e._query)}return function(e,t,n,r){const i=new Sb(r),s=new Aw(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>_w(await Ub(e),s))),()=>{i.su(),e.asyncQueue.enqueueAndForget((async()=>Ew(await Ub(e),s)))}}(p_(h),d,u,c)}function NE(e,t){return function(e,t){const n=new Sb(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){bu(e).ia.add(t),t.next()}(await Ub(e),n))),()=>{n.su(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){bu(e).ia.delete(t)}(await Ub(e),n)))}}(p_(e=Qb(e,f_)),h_(t)?t:{next:t})}function RE(e,t){return function(e,t){const n=new Su;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=gb(e);try{const e=await function(e,t){const n=bu(e),r=qu.now(),i=t.reduce(((e,t)=>e.add(t.key)),Xf());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=qf(),l=Xf();return n.ds.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Tp(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Cp(e.key,t,qd(t.value.mapValue),vp.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Wf(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Wa[e.currentUser.toKey()];r||(r=new $h(Lu)),r=r.insert(t,n),e.Wa[e.currentUser.toKey()]=r}(r,e.batchId,n),await ib(r,e.changes),await ew(r.remoteStore)}catch(e){const t=pw(e,"Failed to persist write");n.reject(t)}}(await Mb(e),t,n))),n.promise}(p_(e),t)}function PE(e,t,n){const r=n.docs.get(t._key),i=new TE(e);return new wE(e,i,t._key,r,new vE(n.hasPendingWrites,n.fromCache),t.converter)}const DE={maxAttempts:5};class OE{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=P_(e)}set(e,t,n){this._verifyNotCommitted();const r=LE(e,this._firestore),i=gE(r.converter,t,n),s=D_(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,vp.none())),this}update(e,t,n){this._verifyNotCommitted();const r=LE(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Vt(t))||t instanceof E_?j_(this._dataReader,"WriteBatch.update",r._key,t,n,o):z_(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,vp.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=LE(e,this._firestore);return this._mutations=this._mutations.concat(new Rp(t._key,vp.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Eu(_u.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function LE(e,t){if((e=Vt(e)).firestore!==t)throw new Eu(_u.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class ME{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=P_(e)}get(e){const t=LE(e,this._firestore),n=new yE(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return vu();const r=e[0];if(r.isFoundDocument())return new X_(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new X_(this._firestore,n,t._key,null,t.converter);throw vu()}))}set(e,t,n){const r=LE(e,this._firestore),i=gE(r.converter,t,n),s=D_(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=LE(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Vt(t))||t instanceof E_?j_(this._dataReader,"Transaction.update",r._key,t,n,o):z_(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=LE(e,this._firestore);return this._transaction.delete(t._key),this}}class FE extends ME{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=LE(e,this._firestore),n=new TE(this._firestore);return super.get(e).then((e=>new wE(this._firestore,n,t._key,e._document,new vE(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){hu=e}(ar),Jn(new zt("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new f_(new Cu(e.getProvider("auth-internal")),new Ru(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Eu(_u.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dd(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),fr(lu,uu,e),fr(lu,uu,"esm2017")}();function UE(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Eu("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}function VE(){if("undefined"===typeof Uint8Array)throw new Eu("unimplemented","Uint8Arrays are not available in this environment.")}function zE(){if("undefined"==typeof atob)throw new Eu("unimplemented","Blobs are unavailable in Firestore in this environment.")}class jE{constructor(e){this._delegate=e}static fromBase64String(e){return zE(),new jE(__.fromBase64String(e))}static fromUint8Array(e){return VE(),new jE(__.fromUint8Array(e))}toBase64(){return zE(),this._delegate.toBase64()}toUint8Array(){return VE(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function BE(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class qE{enableIndexedDbPersistence(e,t){return function(e,t){gu("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings();return g_(e,_b.provider,{build:e=>new wb(e,n.cacheSizeBytes,null==t?void 0:t.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return async function(e){gu("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=e._freezeSettings();g_(e,_b.provider,{build:e=>new bb(e,t.cacheSizeBytes)})}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Eu(_u.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Su;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!fc.D())return Promise.resolve();const t=e+Py;await fc.delete(t)}(My(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class $E{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof dd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||gu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t_(this._delegate,e,t,n)}enableNetwork(){return v_(this._delegate)}disableNetwork(){return w_(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Hb("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return y_(this._delegate)}onSnapshotsInSync(e){return NE(this._delegate,e)}get app(){if(!this._appCompat)throw new Eu("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new iS(this,s_(this._delegate,e))}catch(fk){throw YE(fk,"collection()","Firestore.collection()")}}doc(e){try{return new QE(this,o_(this._delegate,e))}catch(fk){throw YE(fk,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new tS(this,function(e,t){if(e=Qb(e,e_),$b("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Eu(_u.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new n_(e,null,function(e){return new Tf(Ku.emptyPath(),e)}(t))}(this._delegate,e))}catch(fk){throw YE(fk,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=Qb(e,f_);const r=Object.assign(Object.assign({},DE),n);return function(e){if(e.maxAttempts<1)throw new Eu(_u.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Su;return e.asyncQueue.enqueueAndForget((async()=>{const i=await Fb(e);new Ib(e.asyncQueue,i,n,t,r).Iu()})),r.promise}(p_(e),(n=>t(new FE(e,n))),r)}(this._delegate,(t=>e(new WE(this,t))))}batch(){return p_(this._delegate),new KE(new OE(this._delegate,(e=>RE(this._delegate,e))))}loadBundle(e){return function(e,t){const n=p_(e=Qb(e,f_)),r=new d_;return jb(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return b_(this._delegate,e).then((e=>e?new tS(this,e):null))}}class HE extends mE{constructor(e){super(),this.firestore=e}convertBytes(e){return new jE(new __(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return QE.forKey(t,this.firestore,null)}}class WE{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new HE(e)}get(e){const t=sS(e);return this._delegate.get(t).then((e=>new ZE(this._firestore,new wE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=sS(e);return n?(UE("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=sS(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=sS(e);return this._delegate.delete(t),this}}class KE{constructor(e){this._delegate=e}set(e,t,n){const r=sS(e);return n?(UE("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=sS(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=sS(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class GE{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new bE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new eS(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=GE.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new GE(e,new HE(e),t),r.set(t,i)),i}}GE.INSTANCES=new WeakMap;class QE{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new HE(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Eu("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new QE(t,new r_(t._delegate,n,new Yu(e)))}static forKey(e,t,n){return new QE(t,new r_(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new iS(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new iS(this.firestore,s_(this._delegate,e))}catch(fk){throw YE(fk,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=Vt(e))instanceof r_&&a_(this._delegate,e)}set(e,t){t=UE("DocumentReference.set",t);try{return t?CE(this._delegate,e,t):CE(this._delegate,e)}catch(fk){throw YE(fk,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?AE(this._delegate,e):AE(this._delegate,e,t,...r)}catch(fk){throw YE(fk,"updateDoc()","DocumentReference.update()")}}delete(){return RE(Qb((e=this._delegate).firestore,f_),[new Rp(e._key,vp.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=JE(t),i=XE(t,(e=>new ZE(this.firestore,new wE(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return xE(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?kE(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Qb(e,r_);const t=Qb(e.firestore,f_);return Vb(p_(t),e._key,{source:"server"}).then((n=>PE(t,e,n)))}(this._delegate):function(e){e=Qb(e,r_);const t=Qb(e.firestore,f_);return Vb(p_(t),e._key).then((n=>PE(t,e,n)))}(this._delegate),t.then((e=>new ZE(this.firestore,new wE(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new QE(this.firestore,e?this._delegate.withConverter(GE.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function YE(e,t,n){return e.message=e.message.replace(t,n),e}function JE(e){for(const t of e)if("object"===typeof t&&!BE(t))return t;return{}}function XE(e,t){var n,r;let i;return i=BE(e[0])?e[0]:BE(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class ZE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new QE(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return SE(this._delegate,e._delegate)}}class eS extends ZE{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||vu(),t}}class tS{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new HE(e)}where(e,t,n){try{return new tS(this.firestore,iE(this._delegate,function(e,t,n){const r=t,i=eE("where",e);return sE._create(i,r,n)}(e,t,n)))}catch(fk){throw YE(fk,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new tS(this.firestore,iE(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=eE("orderBy",e);return aE._create(n,t)}(e,t)))}catch(fk){throw YE(fk,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new tS(this.firestore,iE(this._delegate,(Yb("limit",t=e),lE._create("limit",t,"F"))))}catch(t){throw YE(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new tS(this.firestore,iE(this._delegate,(Yb("limitToLast",t=e),lE._create("limitToLast",t,"L"))))}catch(t){throw YE(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new tS(this.firestore,iE(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return uE._create("startAt",t,!0)}(...arguments)))}catch(fk){throw YE(fk,"startAt()","Query.startAt()")}}startAfter(){try{return new tS(this.firestore,iE(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return uE._create("startAfter",t,!1)}(...arguments)))}catch(fk){throw YE(fk,"startAfter()","Query.startAfter()")}}endBefore(){try{return new tS(this.firestore,iE(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return cE._create("endBefore",t,!1)}(...arguments)))}catch(fk){throw YE(fk,"endBefore()","Query.endBefore()")}}endAt(){try{return new tS(this.firestore,iE(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return cE._create("endAt",t,!0)}(...arguments)))}catch(fk){throw YE(fk,"endAt()","Query.endAt()")}}isEqual(e){return l_(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?IE(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Qb(e,n_);const t=Qb(e.firestore,f_),n=p_(t),r=new TE(t);return zb(n,e._query,{source:"server"}).then((n=>new _E(t,r,e,n)))}(this._delegate):function(e){e=Qb(e,n_);const t=Qb(e.firestore,f_),n=p_(t),r=new TE(t);return tE(e._query),zb(n,e._query).then((n=>new _E(t,r,e,n)))}(this._delegate),t.then((e=>new rS(this.firestore,new _E(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=JE(t),i=XE(t,(e=>new rS(this.firestore,new _E(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return xE(this._delegate,r,i)}withConverter(e){return new tS(this.firestore,e?this._delegate.withConverter(GE.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class nS{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new eS(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class rS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new tS(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new eS(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new nS(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new eS(this._firestore,n))}))}isEqual(e){return SE(this._delegate,e._delegate)}}class iS extends tS{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new QE(this.firestore,e):null}doc(e){try{return new QE(this.firestore,void 0===e?o_(this._delegate):o_(this._delegate,e))}catch(fk){throw YE(fk,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=Qb(e.firestore,f_),r=o_(e),i=gE(e.converter,t);return RE(n,[D_(P_(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,vp.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new QE(this.firestore,e)))}isEqual(e){return a_(this._delegate,e._delegate)}withConverter(e){return new iS(this.firestore,e?this._delegate.withConverter(GE.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function sS(e){return Qb(e,r_)}class oS{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new E_(...t)}static documentId(){return new oS(Qu.keyField().canonicalString())}isEqual(e){return(e=Vt(e))instanceof E_&&this._delegate._internalPath.isEqual(e._internalPath)}}class aS{static serverTimestamp(){const e=new M_("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new aS(e)}static delete(){const e=new O_("deleteField");return e._methodName="FieldValue.delete",new aS(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new F_("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new aS(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new U_("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new aS(e)}static increment(e){const t=new V_("increment",e);return t._methodName="FieldValue.increment",new aS(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}const lS={Firestore:$E,GeoPoint:T_,Timestamp:qu,Blob:jE,Transaction:WE,WriteBatch:KE,DocumentReference:QE,DocumentSnapshot:ZE,Query:tS,QueryDocumentSnapshot:eS,QuerySnapshot:rS,CollectionReference:iS,FieldPath:oS,FieldValue:aS,setLogLevel:function(e){var t;t=e,du.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new zt("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},lS)))}(e,((e,t)=>new $E(e,t,new qE))),e.registerVersion("@firebase/firestore-compat","0.3.45")}(Nr);const uS="firebasestorage.googleapis.com",cS="storageBucket";class hS extends Ct{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(pS(e),`Firebase Storage: ${t} (${pS(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,hS.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return pS(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var dS,fS;function pS(e){return"storage/"+e}function mS(){return new hS(dS.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function gS(){return new hS(dS.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function yS(){return new hS(dS.CANCELED,"User canceled the upload/download.")}function vS(){return new hS(dS.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function wS(e){return new hS(dS.INVALID_ARGUMENT,e)}function bS(){return new hS(dS.APP_DELETED,"The Firebase app was deleted.")}function _S(e){return new hS(dS.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ES(e,t){return new hS(dS.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function SS(e){throw new hS(dS.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(dS||(dS={}));class TS{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=TS.makeFromUrl(e,t)}catch(fk){return new TS(e,"")}if(""===n.path)return n;throw r=e,new hS(dS.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${o}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${t===uS?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new TS(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new hS(dS.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class kS{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function IS(e){return"string"===typeof e||e instanceof String}function CS(e){return AS()&&e instanceof Blob}function AS(){return"undefined"!==typeof Blob}function xS(e,t,n,r){if(r<t)throw wS(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw wS(`Invalid value for '${e}'. Expected ${n} or less.`)}function NS(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function RS(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function PS(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(fS||(fS={}));class DS{constructor(e,t,n,r,i,s,o,a,l,u,c){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=u,this.connectionFactory_=c,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new OS(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===fS.NO_ERROR,i=n.getStatus();if(!t||PS(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===fS.ABORT;return void e(!1,new OS(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new OS(s,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(fk){r(fk)}else if(null!==i){const e=mS();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?bS():yS())}else{r(gS())}};this.canceled_?t(0,new OS(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return 2===a}let u=!1;function c(){if(!u){u=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((()=>{i=null,e(f,l())}),t)}function d(){s&&clearTimeout(s)}function f(e){if(u)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return d(),void c.call(null,e,...n);if(l()||o)return d(),void c.call(null,e,...n);let s;r<64&&(r*=2),1===a?(a=2,s=0):s=1e3*(r+Math.random()),h(s)}let p=!1;function m(e){p||(p=!0,d(),u||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),s=setTimeout((()=>{o=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class OS{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function LS(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function MS(){const e=LS();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(AS())return new Blob(n);throw new hS(dS.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function FS(e){if("undefined"===typeof atob)throw t="base-64",new hS(dS.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`);var t;return atob(e)}const US={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class VS{constructor(e,t){this.data=e,this.contentType=t||null}}function zS(e,t){switch(e){case US.RAW:return new VS(jS(t));case US.BASE64:case US.BASE64URL:return new VS(BS(e,t));case US.DATA_URL:return new VS(function(e){const t=new qS(e);return t.base64?BS(US.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(fk){throw ES(US.DATA_URL,"Malformed data URL.")}return jS(t)}(t.rest)}(t),new qS(t).contentType)}throw mS()}function jS(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function BS(e,t){switch(e){case US.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw ES(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case US.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw ES(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=FS(t)}catch(fk){if(fk.message.includes("polyfill"))throw fk;throw ES(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class qS{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw ES(US.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class $S{constructor(e,t){let n=0,r="";CS(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(CS(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new $S(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new $S(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(AS()){const e=t.map((e=>e instanceof $S?e.data_:e));return new $S(MS.apply(null,e))}{const e=t.map((e=>IS(e)?zS(US.RAW,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new $S(r,!0)}}uploadData(){return this.data_}}function HS(e){let t;try{t=JSON.parse(e)}catch(fk){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function WS(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function KS(e,t){return t}class GS{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||KS}}let QS=null;function YS(){if(QS)return QS;const e=[];e.push(new GS("bucket")),e.push(new GS("generation")),e.push(new GS("metageneration")),e.push(new GS("name","fullPath",!0));const t=new GS("name");t.xform=function(e,t){return function(e){return!IS(e)||e.length<2?e:WS(e)}(t)},e.push(t);const n=new GS("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new GS("timeCreated")),e.push(new GS("updated")),e.push(new GS("md5Hash",null,!0)),e.push(new GS("cacheControl",null,!0)),e.push(new GS("contentDisposition",null,!0)),e.push(new GS("contentEncoding",null,!0)),e.push(new GS("contentLanguage",null,!0)),e.push(new GS("contentType",null,!0)),e.push(new GS("metadata","customMetadata",!0)),QS=e,QS}function JS(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new TS(n,r);return t._makeStorageReference(i)}})}(r,e),r}function XS(e,t,n){const r=HS(t);if(null===r)return null;return JS(e,r,n)}function ZS(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}const eT="prefixes",tT="items";function nT(e,t,n){const r=HS(n);if(null===r)return null;return function(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[eT])for(const i of n[eT]){const n=i.replace(/\/$/,""),s=e._makeStorageReference(new TS(t,n));r.prefixes.push(s)}if(n[tT])for(const i of n[tT]){const n=e._makeStorageReference(new TS(t,i.name));r.items.push(n)}return r}(e,t,r)}class rT{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function iT(e){if(!e)throw mS()}function sT(e,t){return function(n,r){const i=XS(e,r,t);return iT(null!==i),i}}function oT(e,t){return function(n,r){const i=XS(e,r,t);return iT(null!==i),function(e,t,n,r){const i=HS(t);if(null===i)return null;if(!IS(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map((t=>{const i=e.bucket,s=e.fullPath;return NS("/b/"+o(i)+"/o/"+o(s),n,r)+RS({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function aT(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new hS(dS.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new hS(dS.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new hS(dS.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new hS(dS.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function lT(e){const t=aT(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new hS(dS.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function uT(e,t,n){const r=NS(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new rT(r,"GET",sT(e,n),i);return s.errorHandler=lT(t),s}function cT(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=NS(t.bucketOnlyServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,l=new rT(o,"GET",function(e,t){return function(n,r){const i=nT(e,t,r);return iT(null!==i),i}}(e,t.bucket),a);return l.urlParams=s,l.errorHandler=aT(t),l}function hT(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function dT(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const l=hT(t,r,i),u="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+ZS(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",c="\r\n--"+a+"--",h=$S.getBlob(u,r,c);if(null===h)throw vS();const d={name:l.fullPath},f=NS(s,e.host,e._protocol),p=e.maxUploadRetryTime,m=new rT(f,"POST",sT(e,n),p);return m.urlParams=d,m.headers=o,m.body=h.uploadData(),m.errorHandler=aT(t),m}class fT{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function pT(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(fk){iT(!1)}return iT(!!n&&-1!==(t||["active"]).indexOf(n)),n}const mT=262144;function gT(e,t,n,r,i,s,o,a){const l=new fT(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw new hS(dS.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const u=l.total-l.current;let c=u;i>0&&(c=Math.min(c,i));const h=l.current,d=h+c;let f="";f=0===c?"finalize":u===c?"upload, finalize":"upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":`${l.current}`},m=r.slice(h,d);if(null===m)throw vS();const g=t.maxUploadRetryTime,y=new rT(n,"POST",(function(e,n){const i=pT(e,["active","final"]),o=l.current+c,a=r.size();let u;return u="final"===i?sT(t,s)(e,n):null,new fT(o,a,"final"===i,u)}),g);return y.headers=p,y.body=m.uploadData(),y.progressCallback=a||null,y.errorHandler=aT(e),y}const yT={STATE_CHANGED:"state_changed"},vT={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function wT(e){switch(e){case"running":case"pausing":case"canceling":return vT.RUNNING;case"paused":return vT.PAUSED;case"success":return vT.SUCCESS;case"canceled":return vT.CANCELED;default:return vT.ERROR}}class bT{constructor(e,t,n){const r=function(e){return"function"===typeof e}(e)||null!=t||null!=n;if(r)this.next=e,this.error=null!==t&&void 0!==t?t:void 0,this.complete=null!==n&&void 0!==n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function _T(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((()=>e(...n)))}}class ET{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=fS.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=fS.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=fS.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw SS("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw SS("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw SS("cannot .getStatus() before sending");try{return this.xhr_.status}catch(fk){return-1}}getResponse(){if(!this.sent_)throw SS("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw SS("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class ST extends ET{initXhr(){this.xhr_.responseType="text"}}function TT(){return new ST}class kT{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=YS(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(dS.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(PS(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=gS()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(dS.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t,this._start()})),this._promise.then(null,(()=>{}))}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((()=>{this.pendingTimeout=void 0,this._continueUpload()}),this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((t=>{let[n,r]=t;switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}}))}_createResumable(){this._resolveToken(((e,t)=>{const n=function(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o=hT(t,r,i),a={name:o.fullPath},l=NS(s,e.host,e._protocol),u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},c=ZS(o,n),h=e.maxUploadRetryTime,d=new rT(l,"POST",(function(e){let t;pT(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(fk){iT(!1)}return iT(IS(t)),t}),h);return d.urlParams=a,d.headers=u,d.body=c,d.errorHandler=aT(t),d}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,TT,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()}),this._errorHandler)}))}_fetchStatus(){const e=this._uploadUrl;this._resolveToken(((t,n)=>{const r=function(e,t,n,r){const i=e.maxUploadRetryTime,s=new rT(n,"POST",(function(e){const t=pT(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(fk){iT(!1)}n||iT(!1);const i=Number(n);return iT(!isNaN(i)),new fT(i,r.size(),"final"===t)}),i);return s.headers={"X-Goog-Upload-Command":"query"},s.errorHandler=aT(t),s}(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,TT,t,n);this._request=i,i.getPromise().then((e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()}),this._errorHandler)}))}_continueUpload(){const e=mT*this._chunkMultiplier,t=new fT(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken(((r,i)=>{let s;try{s=gT(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(fk){return this._error=fk,void this._transition("error")}const o=this._ref.storage._makeRequest(s,TT,r,i,!1);this._request=o,o.getPromise().then((e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()}),this._errorHandler)}))}_increaseMultiplier(){2*(mT*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken(((e,t)=>{const n=uT(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,TT,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._transition("success")}),this._metadataErrorHandler)}))}_oneShotUpload(){this._resolveToken(((e,t)=>{const n=dT(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,TT,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")}),this._errorHandler)}))}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=yS(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=wT(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const i=new bT(t||void 0,n||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach((e=>{this._notifyObserver(e)}))}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(wT(this._state)){case vT.SUCCESS:_T(this._resolve.bind(null,this.snapshot))();break;case vT.CANCELED:case vT.ERROR:_T(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(wT(this._state)){case vT.RUNNING:case vT.PAUSED:e.next&&_T(e.next.bind(e,this.snapshot))();break;case vT.SUCCESS:e.complete&&_T(e.complete.bind(e))();break;default:e.error&&_T(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class IT{constructor(e,t){this._service=e,this._location=t instanceof TS?t:TS.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new IT(e,t)}get root(){const e=new TS(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return WS(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new TS(this._location.bucket,e);return new IT(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw _S(e)}}function CT(e){const t={prefixes:[],items:[]};return AT(e,t).then((()=>t))}async function AT(e,t,n){const r={pageToken:n},i=await xT(e,r);t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&await AT(e,t,i.nextPageToken)}function xT(e,t){null!=t&&"number"===typeof t.maxResults&&xS("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=cT(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,TT)}function NT(e,t){e._throwIfRoot("updateMetadata");const n=function(e,t,n,r){const i=NS(t.fullServerUrl(),e.host,e._protocol),s=ZS(n,r),o=e.maxOperationRetryTime,a=new rT(i,"PATCH",sT(e,r),o);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=s,a.errorHandler=lT(t),a}(e.storage,e._location,t,YS());return e.storage.makeRequestWithTokens(n,TT)}function RT(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=NS(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new rT(r,"GET",oT(e,n),i);return s.errorHandler=lT(t),s}(e.storage,e._location,YS());return e.storage.makeRequestWithTokens(t,TT).then((e=>{if(null===e)throw new hS(dS.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function PT(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=NS(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new rT(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=lT(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,TT)}function DT(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new TS(e._location.bucket,n);return new IT(e.storage,r)}function OT(e,t){if(e instanceof FT){const n=e;if(null==n._bucket)throw new hS(dS.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+cS+"' property when initializing the app?");const r=new IT(n,n._bucket);return null!=t?OT(r,t):r}return void 0!==t?DT(e,t):e}function LT(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof FT)return new IT(e,t);throw wS("To use ref(service, url), the first argument must be a Storage instance.")}return OT(e,t)}function MT(e,t){const n=null===t||void 0===t?void 0:t[cS];return null==n?null:TS.makeFromBucketSpec(n,e)}class FT{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=uS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?TS.makeFromBucketSpec(r,this._host):MT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=TS.makeFromBucketSpec(this._url,e):this._bucket=MT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){xS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){xS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(tr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new IT(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new kS(bS());{const s=function(e,t,n,r,i,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=RS(e.urlParams),l=e.url+a,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new DS(l,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const UT="@firebase/storage",VT="0.13.7",zT="storage";function jT(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new kT(e,new $S(t),n)}(e=Vt(e),t,n)}function BT(e){return function(e){e._throwIfRoot("getMetadata");const t=uT(e.storage,e._location,YS());return e.storage.makeRequestWithTokens(t,TT)}(e=Vt(e))}function qT(e,t){return LT(e=Vt(e),t)}function $T(e,t,n){!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:vt(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function HT(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new FT(r,i,s,n,ar)}Jn(new zt(zT,HT,"PUBLIC").setMultipleInstances(!0)),fr(UT,VT,""),fr(UT,VT,"esm2017");class WT{constructor(e,t,n){this._delegate=e,this.task=t,this.ref=n}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class KT{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new WT(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then((t=>{if(e)return e(new WT(t,this,this._ref))}),t)}on(e,t,n,r){let i;return t&&(i="function"===typeof t?e=>t(new WT(e,this,this._ref)):{next:t.next?e=>t.next(new WT(e,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,i,n||void 0,r||void 0)}}class GT{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map((e=>new QT(e,this._service)))}get items(){return this._delegate.items.map((e=>new QT(e,this._service)))}get nextPageToken(){return this._delegate.nextPageToken||null}}class QT{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(e,t){return DT(e,t)}(this._delegate,e);return new QT(t,this.storage)}get root(){return new QT(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new QT(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new KT(jT(this._delegate,e,t),this)}putString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:US.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");const r=zS(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new KT(new kT(this._delegate,new $S(r.data,!0),i),this)}listAll(){return function(e){return CT(e=Vt(e))}(this._delegate).then((e=>new GT(e,this.storage)))}list(e){return function(e,t){return xT(e=Vt(e),t)}(this._delegate,e||void 0).then((e=>new GT(e,this.storage)))}getMetadata(){return BT(this._delegate)}updateMetadata(e){return function(e,t){return NT(e=Vt(e),t)}(this._delegate,e)}getDownloadURL(){return function(e){return RT(e=Vt(e))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(e){return PT(e=Vt(e))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw _S(e)}}class YT{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(JT(e))throw wS("ref() expected a child path but got a URL, use refFromURL instead.");return new QT(qT(this._delegate,e),this)}refFromURL(e){if(!JT(e))throw wS("refFromURL() expected a full URL but got a child path, use ref() instead.");try{TS.makeFromUrl(e,this._delegate.host)}catch(fk){throw wS("refFromUrl() expected a valid full URL but got an invalid one.")}return new QT(qT(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};$T(this._delegate,e,t,n)}}function JT(e){return/^[A-Za-z]+:\/\//.test(e)}function XT(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new YT(r,i)}!function(e){const t={TaskState:vT,TaskEvent:yT,StringFormat:US,Storage:YT,Reference:QT};e.INTERNAL.registerComponent(new zt("storage-compat",XT,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.17")}(Nr);Nr.initializeApp({apiKey:"AIzaSyA6UJGNu8DQYYWLIWXAkoL53uTdr8cMsgY",authDomain:"nwitter-eecee.firebaseapp.com",projectId:"nwitter-eecee",storageBucket:"nwitter-eecee.firebasestorage.app",messagingSenderId:"657152044135",appId:"1:657152044135:web:915c7f8f1f17a93dd9f8c2"});const ZT=Nr,ek=Nr.auth(),tk=Nr.firestore(),nk=Nr.storage();var rk=n(579);const ik=()=>{const[e,t]=(0,s.useState)(""),[n,r]=(0,s.useState)(""),[i,o]=(0,s.useState)(!0),[a,l]=(0,s.useState)(""),u=e=>{const{target:{name:n,value:i}}=e;"email"===n?t(i):"password"===n&&r(i)};return(0,rk.jsxs)(rk.Fragment,{children:[(0,rk.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{let t;t=i?await ek.createUserWithEmailAndPassword(e,n):await ek.signInWithEmailAndPassword(e,n)}catch(a){l(a.message)}},children:[(0,rk.jsx)("input",{name:"email",type:"email",placeholder:"Email",required:!0,value:e,onChange:u}),(0,rk.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:n,onChange:u}),(0,rk.jsx)("input",{type:"submit",value:i?"Create Account":"Log In"}),a]}),(0,rk.jsx)("span",{onClick:()=>o((e=>!e)),children:i?"Sign In":"Create Account"})]})},sk=()=>{const e=async e=>{const{target:{name:t}}=e;let n;"google"===t?n=new ZT.auth.GoogleAuthProvider:"github"===t&&(n=new ZT.auth.GithubAuthProvider);await ek.signInWithPopup(n)};return(0,rk.jsxs)("div",{children:[(0,rk.jsx)(ik,{}),(0,rk.jsxs)("div",{children:[(0,rk.jsx)("button",{onClick:e,name:"google",children:"Continue with Google"}),(0,rk.jsx)("button",{onClick:e,name:"github",children:"Continue with Github"})]})]})},ok=e=>{let{nweetObj:t,isOwner:n}=e;const[r,i]=(0,s.useState)(!1),[o,a]=(0,s.useState)(t.text),l=()=>i((e=>!e));return(0,rk.jsx)("div",{children:r?(0,rk.jsxs)(rk.Fragment,{children:[(0,rk.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),await tk.doc(`nweets/${t.id}`).update({text:o}),i(!1)},children:[(0,rk.jsx)("input",{onChange:e=>{const{target:{value:t}}=e;a(t)},value:o,required:!0}),(0,rk.jsx)("input",{type:"submit",value:"Update Nweet"})]}),(0,rk.jsx)("button",{onClick:l,children:"Cancel"})]}):(0,rk.jsxs)(rk.Fragment,{children:[(0,rk.jsx)("h4",{children:t.text}),t.attachmentUrl&&(0,rk.jsx)("img",{src:t.attachmentUrl,width:"50px",height:"50px"}),n&&(0,rk.jsxs)(rk.Fragment,{children:[(0,rk.jsx)("button",{onClick:async()=>{window.confirm("Delete Nweet Message?")&&(await tk.doc(`nweets/${t.id}`).delete(),""!==t.attachmentUrl&&await nk.refFromURL(t.attachmentUrl).delete())},children:"Delete Nweet"}),(0,rk.jsx)("button",{onClick:l,children:"Edit Nweet"})]})]})})},ak=e=>{let{userObj:t}=e;const[n,r]=(0,s.useState)(""),[i,o]=(0,s.useState)("");return(0,rk.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),await tk.collection("nweets").add({text:n,createdAt:Date.now(),creatorId:t.uid}),r("")},children:[(0,rk.jsx)("input",{value:n,onChange:e=>{e.preventDefault();const{target:{value:t}}=e;r(t)},type:"text",placeholder:"What's on your mind?",maxLength:120}),(0,rk.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const{target:{files:t}}=e,n=t[0],r=new FileReader;r.onloadend=e=>{const{target:{result:t}}=e},r.readAsDataURL(n)}}),(0,rk.jsx)("input",{type:"submit",value:"Nweet"}),i&&(0,rk.jsxs)("div",{children:[(0,rk.jsx)("img",{src:i,width:"50px",height:"50px"}),(0,rk.jsx)("button",{onClick:()=>o(""),children:"Clear"})]})]})},lk=e=>{let{userObj:t}=e;const[n,r]=(0,s.useState)([]);return(0,s.useEffect)((()=>{tk.collection("nweets").onSnapshot((e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));r(t)}))}),[]),(0,rk.jsxs)(rk.Fragment,{children:[(0,rk.jsx)(ak,{userObj:t}),(0,rk.jsx)("div",{children:n.map((e=>(0,rk.jsx)(ok,{nweetObj:e,isOwner:e.creatorId===t.uid},e.id)))})]})},uk=e=>{let{userObj:t,refreshUser:n}=e;const[r,i]=(0,s.useState)(t.displayName),o=te();return(0,rk.jsxs)(rk.Fragment,{children:[(0,rk.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),t.displayName!==r&&(await t.updateProfile({displayName:r}),n())},children:[(0,rk.jsx)("input",{type:"text",placeholder:"Display Name",onChange:e=>{const{target:{value:t}}=e;i(t)},value:r}),(0,rk.jsx)("input",{type:"submit",value:"Update Profile"})]}),(0,rk.jsx)("button",{onClick:()=>{ek.signOut(),o("/")},children:"Log Out"})]})},ck=e=>{let{userObj:t}=e;return(0,rk.jsx)("nav",{children:(0,rk.jsxs)("ul",{children:[(0,rk.jsx)("li",{children:(0,rk.jsx)(et,{to:"/",children:"Home"})}),(0,rk.jsx)("li",{children:(0,rk.jsxs)(et,{to:"/profile",children:[t.displayName,"\uc758 Profile"]})})]})})},hk=e=>{let{isLoggedIn:t,userObj:n,refreshUser:r}=e;return(0,rk.jsxs)(Xe,{children:[t&&(0,rk.jsx)(ck,{userObj:n}),(0,rk.jsx)(ve,{children:t?(0,rk.jsxs)(rk.Fragment,{children:[(0,rk.jsx)(ge,{exact:!0,path:"/",element:(0,rk.jsx)(lk,{userObj:n})}),(0,rk.jsx)(ge,{exact:!0,path:"/profile",element:(0,rk.jsx)(uk,{userObj:n,refreshUser:r})})]}):(0,rk.jsx)(ge,{exact:!0,path:"/",element:(0,rk.jsx)(sk,{})})})]})};const dk=function(){const[e,t]=(0,s.useState)(!1),[n,r]=(0,s.useState)(null);return(0,s.useEffect)((()=>{ek.onAuthStateChanged((e=>{r(!!e&&{uid:e.uid,displayName:e.displayName,updateProfile:t=>e.updateProfile(t)}),t(!0)}))}),[]),(0,rk.jsx)(rk.Fragment,{children:e?(0,rk.jsx)(hk,{isLoggedIn:Boolean(n),userObj:n,refreshUser:()=>{const e=ek.currentUser;r({uid:e.uid,displayName:e.displayName,updateProfile:t=>e.updateProfile(t)})}}):"initializing..."})};(0,i.createRoot)(document.getElementById("root")).render((0,rk.jsx)(dk,{}),document.getElementById("root"))})();
//# sourceMappingURL=main.cf05836b.js.map